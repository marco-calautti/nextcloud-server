{"version":3,"file":"comments-comments-app.js?v=32cd2dd9414701f62ff6","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/node_modules/pinia/dist/pinia.mjs","webpack:///nextcloud/node_modules/@vueuse/components/index.mjs","webpack:///nextcloud/node_modules/vue-observe-visibility/dist/vue-observe-visibility.esm.js","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyText.vue","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyText.vue?vue&type=script&lang=js","webpack://nextcloud/./node_modules/vue-material-design-icons/MessageReplyText.vue?2121","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyText.vue?vue&type=template&id=5b37a4cf","webpack:///nextcloud/node_modules/vue-material-design-icons/Refresh.vue","webpack:///nextcloud/node_modules/vue-material-design-icons/Refresh.vue?vue&type=script&lang=js","webpack://nextcloud/./node_modules/vue-material-design-icons/Refresh.vue?0940","webpack:///nextcloud/node_modules/vue-material-design-icons/Refresh.vue?vue&type=template&id=7301d745","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/assert-valid-pattern.js","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/brace-expressions.js","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/unescape.js","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/ast.js","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/index.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/headers.js","webpack:///nextcloud/node_modules/webdav/node_modules/minimatch/dist/esm/escape.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/dav.js","webpack:///nextcloud/node_modules/layerr/dist/layerr.js","webpack:///nextcloud/apps/comments/src/utils/davUtils.js","webpack:///nextcloud/apps/comments/src/services/DavClient.js","webpack:///nextcloud/apps/comments/src/services/GetComments.ts","webpack:///nextcloud/node_modules/webdav/dist/node/response.js","webpack://nextcloud/./apps/comments/src/components/Comment.vue?d1f7","webpack:///nextcloud/apps/comments/src/utils/decodeHtmlEntities.js","webpack:///nextcloud/apps/comments/src/store/deletedCommentLimbo.js","webpack:///nextcloud/apps/comments/src/logger.js","webpack:///nextcloud/apps/comments/src/mixins/CommentMixin.js","webpack:///nextcloud/apps/comments/src/services/EditComment.js","webpack:///nextcloud/apps/comments/src/services/DeleteComment.js","webpack:///nextcloud/apps/comments/src/services/NewComment.js","webpack:///nextcloud/apps/comments/src/components/Comment.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/comments/src/components/Comment.vue","webpack://nextcloud/./apps/comments/src/components/Comment.vue?d12f","webpack://nextcloud/./apps/comments/src/components/Comment.vue?7f26","webpack:///nextcloud/apps/comments/src/mixins/CommentView.ts","webpack:///nextcloud/apps/comments/src/views/Comments.vue","webpack:///nextcloud/apps/comments/src/views/Comments.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/comments/src/services/ReadComments.ts","webpack:///nextcloud/apps/comments/src/utils/cancelableRequest.js","webpack://nextcloud/./apps/comments/src/views/Comments.vue?2e2c","webpack://nextcloud/./apps/comments/src/views/Comments.vue?f45b","webpack://nextcloud/./apps/comments/src/views/Comments.vue?0e41","webpack:///nextcloud/apps/comments/src/services/CommentsInstance.js","webpack:///nextcloud/apps/comments/src/comments-app.js","webpack:///nextcloud/node_modules/balanced-match/index.js","webpack:///nextcloud/node_modules/brace-expansion/index.js","webpack:///nextcloud/apps/comments/src/components/Comment.vue?vue&type=style&index=0&id=6f6ef97e&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/comments/src/views/Comments.vue?vue&type=style&index=0&id=222c65b2&prod&lang=scss&scoped=true","webpack:///nextcloud/node_modules/fast-xml-parser/src/fxp.js","webpack:///nextcloud/node_modules/nested-property/dist/nested-property.js","webpack:///nextcloud/node_modules/path-posix/index.js","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*!\n * pinia v2.1.7\n * (c) 2023 Eduardo San Martin Morote\n * @license MIT\n */\nimport { hasInjectionContext, inject, toRaw, watch, unref, markRaw, effectScope, ref, isVue2, isRef, isReactive, set, getCurrentScope, onScopeDispose, getCurrentInstance, reactive, toRef, del, nextTick, computed, toRefs } from 'vue-demi';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\n/**\n * setActivePinia must be called to handle SSR at the top of functions like\n * `fetch`, `setup`, `serverPrefetch` and others\n */\nlet activePinia;\n/**\n * Sets or unsets the active pinia. Used in SSR and internally when calling\n * actions and getters\n *\n * @param pinia - Pinia instance\n */\n// @ts-expect-error: cannot constrain the type of the return\nconst setActivePinia = (pinia) => (activePinia = pinia);\n/**\n * Get the currently active pinia if there is any.\n */\nconst getActivePinia = () => (hasInjectionContext() && inject(piniaSymbol)) || activePinia;\nconst piniaSymbol = ((process.env.NODE_ENV !== 'production') ? Symbol('pinia') : /* istanbul ignore next */ Symbol());\n\nfunction isPlainObject(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\no) {\n    return (o &&\n        typeof o === 'object' &&\n        Object.prototype.toString.call(o) === '[object Object]' &&\n        typeof o.toJSON !== 'function');\n}\n// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }\n// TODO: can we change these to numbers?\n/**\n * Possible types for SubscriptionCallback\n */\nvar MutationType;\n(function (MutationType) {\n    /**\n     * Direct mutation of the state:\n     *\n     * - `store.name = 'new name'`\n     * - `store.$state.name = 'new name'`\n     * - `store.list.push('new item')`\n     */\n    MutationType[\"direct\"] = \"direct\";\n    /**\n     * Mutated the state with `$patch` and an object\n     *\n     * - `store.$patch({ name: 'newName' })`\n     */\n    MutationType[\"patchObject\"] = \"patch object\";\n    /**\n     * Mutated the state with `$patch` and a function\n     *\n     * - `store.$patch(state => state.name = 'newName')`\n     */\n    MutationType[\"patchFunction\"] = \"patch function\";\n    // maybe reset? for $state = {} and $reset\n})(MutationType || (MutationType = {}));\n\nconst IS_CLIENT = typeof window !== 'undefined';\n/**\n * Should we add the devtools plugins.\n * - only if dev mode or forced through the prod devtools flag\n * - not in test\n * - only if window exists (could change in the future)\n */\nconst USE_DEVTOOLS = ((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test') && IS_CLIENT;\n\n/*\n * FileSaver.js A saveAs() FileSaver implementation.\n *\n * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin\n * Morote.\n *\n * License : MIT\n */\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nconst _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window\n    ? window\n    : typeof self === 'object' && self.self === self\n        ? self\n        : typeof global === 'object' && global.global === global\n            ? global\n            : typeof globalThis === 'object'\n                ? globalThis\n                : { HTMLElement: null })();\nfunction bom(blob, { autoBom = false } = {}) {\n    // prepend BOM for UTF-8 XML and text/* types (including HTML)\n    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n    if (autoBom &&\n        /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });\n    }\n    return blob;\n}\nfunction download(url, name, opts) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        saveAs(xhr.response, name, opts);\n    };\n    xhr.onerror = function () {\n        console.error('could not download file');\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    // use sync to avoid popup blocker\n    xhr.open('HEAD', url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) { }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n    try {\n        node.dispatchEvent(new MouseEvent('click'));\n    }\n    catch (e) {\n        const evt = document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        node.dispatchEvent(evt);\n    }\n}\nconst _navigator = \n typeof navigator === 'object' ? navigator : { userAgent: '' };\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nconst isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&\n    /AppleWebKit/.test(_navigator.userAgent) &&\n    !/Safari/.test(_navigator.userAgent))();\nconst saveAs = !IS_CLIENT\n    ? () => { } // noop\n    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program\n        typeof HTMLAnchorElement !== 'undefined' &&\n            'download' in HTMLAnchorElement.prototype &&\n            !isMacOSWebView\n            ? downloadSaveAs\n            : // Use msSaveOrOpenBlob as a second approach\n                'msSaveOrOpenBlob' in _navigator\n                    ? msSaveAs\n                    : // Fallback to using FileReader and a popup\n                        fileSaverSaveAs;\nfunction downloadSaveAs(blob, name = 'download', opts) {\n    const a = document.createElement('a');\n    a.download = name;\n    a.rel = 'noopener'; // tabnabbing\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n    if (typeof blob === 'string') {\n        // Support regular links\n        a.href = blob;\n        if (a.origin !== location.origin) {\n            if (corsEnabled(a.href)) {\n                download(blob, name, opts);\n            }\n            else {\n                a.target = '_blank';\n                click(a);\n            }\n        }\n        else {\n            click(a);\n        }\n    }\n    else {\n        // Support blobs\n        a.href = URL.createObjectURL(blob);\n        setTimeout(function () {\n            URL.revokeObjectURL(a.href);\n        }, 4e4); // 40s\n        setTimeout(function () {\n            click(a);\n        }, 0);\n    }\n}\nfunction msSaveAs(blob, name = 'download', opts) {\n    if (typeof blob === 'string') {\n        if (corsEnabled(blob)) {\n            download(blob, name, opts);\n        }\n        else {\n            const a = document.createElement('a');\n            a.href = blob;\n            a.target = '_blank';\n            setTimeout(function () {\n                click(a);\n            });\n        }\n    }\n    else {\n        // @ts-ignore: works on windows\n        navigator.msSaveOrOpenBlob(bom(blob, opts), name);\n    }\n}\nfunction fileSaverSaveAs(blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank');\n    if (popup) {\n        popup.document.title = popup.document.body.innerText = 'downloading...';\n    }\n    if (typeof blob === 'string')\n        return download(blob, name, opts);\n    const force = blob.type === 'application/octet-stream';\n    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;\n    const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&\n        typeof FileReader !== 'undefined') {\n        // Safari doesn't allow downloading of blob URLs\n        const reader = new FileReader();\n        reader.onloadend = function () {\n            let url = reader.result;\n            if (typeof url !== 'string') {\n                popup = null;\n                throw new Error('Wrong reader.result type');\n            }\n            url = isChromeIOS\n                ? url\n                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');\n            if (popup) {\n                popup.location.href = url;\n            }\n            else {\n                location.assign(url);\n            }\n            popup = null; // reverse-tabnabbing #460\n        };\n        reader.readAsDataURL(blob);\n    }\n    else {\n        const url = URL.createObjectURL(blob);\n        if (popup)\n            popup.location.assign(url);\n        else\n            location.href = url;\n        popup = null; // reverse-tabnabbing #460\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 4e4); // 40s\n    }\n}\n\n/**\n * Shows a toast or console.log\n *\n * @param message - message to log\n * @param type - different color of the tooltip\n */\nfunction toastMessage(message, type) {\n    const piniaMessage = ' ' + message;\n    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {\n        // No longer available :(\n        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);\n    }\n    else if (type === 'error') {\n        console.error(piniaMessage);\n    }\n    else if (type === 'warn') {\n        console.warn(piniaMessage);\n    }\n    else {\n        console.log(piniaMessage);\n    }\n}\nfunction isPinia(o) {\n    return '_a' in o && 'install' in o;\n}\n\n/**\n * This file contain devtools actions, they are not Pinia actions.\n */\n// ---\nfunction checkClipboardAccess() {\n    if (!('clipboard' in navigator)) {\n        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');\n        return true;\n    }\n}\nfunction checkNotFocusedError(error) {\n    if (error instanceof Error &&\n        error.message.toLowerCase().includes('document is not focused')) {\n        toastMessage('You need to activate the \"Emulate a focused page\" setting in the \"Rendering\" panel of devtools.', 'warn');\n        return true;\n    }\n    return false;\n}\nasync function actionGlobalCopyState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));\n        toastMessage('Global state copied to clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalPasteState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));\n        toastMessage('Global state pasted from clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalSaveState(pinia) {\n    try {\n        saveAs(new Blob([JSON.stringify(pinia.state.value)], {\n            type: 'text/plain;charset=utf-8',\n        }), 'pinia-state.json');\n    }\n    catch (error) {\n        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nlet fileInput;\nfunction getFileOpener() {\n    if (!fileInput) {\n        fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = '.json';\n    }\n    function openFile() {\n        return new Promise((resolve, reject) => {\n            fileInput.onchange = async () => {\n                const files = fileInput.files;\n                if (!files)\n                    return resolve(null);\n                const file = files.item(0);\n                if (!file)\n                    return resolve(null);\n                return resolve({ text: await file.text(), file });\n            };\n            // @ts-ignore: TODO: changed from 4.3 to 4.4\n            fileInput.oncancel = () => resolve(null);\n            fileInput.onerror = reject;\n            fileInput.click();\n        });\n    }\n    return openFile;\n}\nasync function actionGlobalOpenStateFile(pinia) {\n    try {\n        const open = getFileOpener();\n        const result = await open();\n        if (!result)\n            return;\n        const { text, file } = result;\n        loadStoresState(pinia, JSON.parse(text));\n        toastMessage(`Global state imported from \"${file.name}\".`);\n    }\n    catch (error) {\n        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nfunction loadStoresState(pinia, state) {\n    for (const key in state) {\n        const storeState = pinia.state.value[key];\n        // store is already instantiated, patch it\n        if (storeState) {\n            Object.assign(storeState, state[key]);\n        }\n        else {\n            // store is not instantiated, set the initial state\n            pinia.state.value[key] = state[key];\n        }\n    }\n}\n\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\nconst PINIA_ROOT_LABEL = ' Pinia (root)';\nconst PINIA_ROOT_ID = '_root';\nfunction formatStoreForInspectorTree(store) {\n    return isPinia(store)\n        ? {\n            id: PINIA_ROOT_ID,\n            label: PINIA_ROOT_LABEL,\n        }\n        : {\n            id: store.$id,\n            label: store.$id,\n        };\n}\nfunction formatStoreForInspectorState(store) {\n    if (isPinia(store)) {\n        const storeNames = Array.from(store._s.keys());\n        const storeMap = store._s;\n        const state = {\n            state: storeNames.map((storeId) => ({\n                editable: true,\n                key: storeId,\n                value: store.state.value[storeId],\n            })),\n            getters: storeNames\n                .filter((id) => storeMap.get(id)._getters)\n                .map((id) => {\n                const store = storeMap.get(id);\n                return {\n                    editable: false,\n                    key: id,\n                    value: store._getters.reduce((getters, key) => {\n                        getters[key] = store[key];\n                        return getters;\n                    }, {}),\n                };\n            }),\n        };\n        return state;\n    }\n    const state = {\n        state: Object.keys(store.$state).map((key) => ({\n            editable: true,\n            key,\n            value: store.$state[key],\n        })),\n    };\n    // avoid adding empty getters\n    if (store._getters && store._getters.length) {\n        state.getters = store._getters.map((getterName) => ({\n            editable: false,\n            key: getterName,\n            value: store[getterName],\n        }));\n    }\n    if (store._customProperties.size) {\n        state.customProperties = Array.from(store._customProperties).map((key) => ({\n            editable: true,\n            key,\n            value: store[key],\n        }));\n    }\n    return state;\n}\nfunction formatEventData(events) {\n    if (!events)\n        return {};\n    if (Array.isArray(events)) {\n        // TODO: handle add and delete for arrays and objects\n        return events.reduce((data, event) => {\n            data.keys.push(event.key);\n            data.operations.push(event.type);\n            data.oldValue[event.key] = event.oldValue;\n            data.newValue[event.key] = event.newValue;\n            return data;\n        }, {\n            oldValue: {},\n            keys: [],\n            operations: [],\n            newValue: {},\n        });\n    }\n    else {\n        return {\n            operation: formatDisplay(events.type),\n            key: formatDisplay(events.key),\n            oldValue: events.oldValue,\n            newValue: events.newValue,\n        };\n    }\n}\nfunction formatMutationType(type) {\n    switch (type) {\n        case MutationType.direct:\n            return 'mutation';\n        case MutationType.patchFunction:\n            return '$patch';\n        case MutationType.patchObject:\n            return '$patch';\n        default:\n            return 'unknown';\n    }\n}\n\n// timeline can be paused when directly changing the state\nlet isTimelineActive = true;\nconst componentStateTypes = [];\nconst MUTATIONS_LAYER_ID = 'pinia:mutations';\nconst INSPECTOR_ID = 'pinia';\nconst { assign: assign$1 } = Object;\n/**\n * Gets the displayed name of a store in devtools\n *\n * @param id - id of the store\n * @returns a formatted string\n */\nconst getStoreType = (id) => ' ' + id;\n/**\n * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab\n * as soon as it is added to the application.\n *\n * @param app - Vue application\n * @param pinia - pinia instance\n */\nfunction registerPiniaDevtools(app, pinia) {\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n    }, (api) => {\n        if (typeof api.now !== 'function') {\n            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        api.addTimelineLayer({\n            id: MUTATIONS_LAYER_ID,\n            label: `Pinia `,\n            color: 0xe5df88,\n        });\n        api.addInspector({\n            id: INSPECTOR_ID,\n            label: 'Pinia ',\n            icon: 'storage',\n            treeFilterPlaceholder: 'Search stores',\n            actions: [\n                {\n                    icon: 'content_copy',\n                    action: () => {\n                        actionGlobalCopyState(pinia);\n                    },\n                    tooltip: 'Serialize and copy the state',\n                },\n                {\n                    icon: 'content_paste',\n                    action: async () => {\n                        await actionGlobalPasteState(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Replace the state with the content of your clipboard',\n                },\n                {\n                    icon: 'save',\n                    action: () => {\n                        actionGlobalSaveState(pinia);\n                    },\n                    tooltip: 'Save the state as a JSON file',\n                },\n                {\n                    icon: 'folder_open',\n                    action: async () => {\n                        await actionGlobalOpenStateFile(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Import the state from a JSON file',\n                },\n            ],\n            nodeActions: [\n                {\n                    icon: 'restore',\n                    tooltip: 'Reset the state (with \"$reset\")',\n                    action: (nodeId) => {\n                        const store = pinia._s.get(nodeId);\n                        if (!store) {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it wasn't found.`, 'warn');\n                        }\n                        else if (typeof store.$reset !== 'function') {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it doesn't have a \"$reset\" method implemented.`, 'warn');\n                        }\n                        else {\n                            store.$reset();\n                            toastMessage(`Store \"${nodeId}\" reset.`);\n                        }\n                    },\n                },\n            ],\n        });\n        api.on.inspectComponent((payload, ctx) => {\n            const proxy = (payload.componentInstance &&\n                payload.componentInstance.proxy);\n            if (proxy && proxy._pStores) {\n                const piniaStores = payload.componentInstance.proxy._pStores;\n                Object.values(piniaStores).forEach((store) => {\n                    payload.instanceData.state.push({\n                        type: getStoreType(store.$id),\n                        key: 'state',\n                        editable: true,\n                        value: store._isOptionsAPI\n                            ? {\n                                _custom: {\n                                    value: toRaw(store.$state),\n                                    actions: [\n                                        {\n                                            icon: 'restore',\n                                            tooltip: 'Reset the state of this store',\n                                            action: () => store.$reset(),\n                                        },\n                                    ],\n                                },\n                            }\n                            : // NOTE: workaround to unwrap transferred refs\n                                Object.keys(store.$state).reduce((state, key) => {\n                                    state[key] = store.$state[key];\n                                    return state;\n                                }, {}),\n                    });\n                    if (store._getters && store._getters.length) {\n                        payload.instanceData.state.push({\n                            type: getStoreType(store.$id),\n                            key: 'getters',\n                            editable: false,\n                            value: store._getters.reduce((getters, key) => {\n                                try {\n                                    getters[key] = store[key];\n                                }\n                                catch (error) {\n                                    // @ts-expect-error: we just want to show it in devtools\n                                    getters[key] = error;\n                                }\n                                return getters;\n                            }, {}),\n                        });\n                    }\n                });\n            }\n        });\n        api.on.getInspectorTree((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                let stores = [pinia];\n                stores = stores.concat(Array.from(pinia._s.values()));\n                payload.rootNodes = (payload.filter\n                    ? stores.filter((store) => '$id' in store\n                        ? store.$id\n                            .toLowerCase()\n                            .includes(payload.filter.toLowerCase())\n                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))\n                    : stores).map(formatStoreForInspectorTree);\n            }\n        });\n        api.on.getInspectorState((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    // this could be the selected store restored for a different project\n                    // so it's better not to say anything here\n                    return;\n                }\n                if (inspectedStore) {\n                    payload.state = formatStoreForInspectorState(inspectedStore);\n                }\n            }\n        });\n        api.on.editInspectorState((payload, ctx) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    return toastMessage(`store \"${payload.nodeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (!isPinia(inspectedStore)) {\n                    // access only the state\n                    if (path.length !== 1 ||\n                        !inspectedStore._customProperties.has(path[0]) ||\n                        path[0] in inspectedStore.$state) {\n                        path.unshift('$state');\n                    }\n                }\n                else {\n                    // Root access, we can omit the `.value` because the devtools API does it for us\n                    path.unshift('state');\n                }\n                isTimelineActive = false;\n                payload.set(inspectedStore, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n        api.on.editComponentState((payload) => {\n            if (payload.type.startsWith('')) {\n                const storeId = payload.type.replace(/^\\s*/, '');\n                const store = pinia._s.get(storeId);\n                if (!store) {\n                    return toastMessage(`store \"${storeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (path[0] !== 'state') {\n                    return toastMessage(`Invalid path for store \"${storeId}\":\\n${path}\\nOnly state can be modified.`);\n                }\n                // rewrite the first entry to be able to directly set the state as\n                // well as any other path\n                path[0] = '$state';\n                isTimelineActive = false;\n                payload.set(store, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n    });\n}\nfunction addStoreToDevtools(app, store) {\n    if (!componentStateTypes.includes(getStoreType(store.$id))) {\n        componentStateTypes.push(getStoreType(store.$id));\n    }\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n        settings: {\n            logStoreChanges: {\n                label: 'Notify about new/deleted stores',\n                type: 'boolean',\n                defaultValue: true,\n            },\n            // useEmojis: {\n            //   label: 'Use emojis in messages ',\n            //   type: 'boolean',\n            //   defaultValue: true,\n            // },\n        },\n    }, (api) => {\n        // gracefully handle errors\n        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;\n        store.$onAction(({ after, onError, name, args }) => {\n            const groupId = runningActionId++;\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: ' ' + name,\n                    subtitle: 'start',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        action: formatDisplay(name),\n                        args,\n                    },\n                    groupId,\n                },\n            });\n            after((result) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        title: ' ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            result,\n                        },\n                        groupId,\n                    },\n                });\n            });\n            onError((error) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        logType: 'error',\n                        title: ' ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            error,\n                        },\n                        groupId,\n                    },\n                });\n            });\n        }, true);\n        store._customProperties.forEach((name) => {\n            watch(() => unref(store[name]), (newValue, oldValue) => {\n                api.notifyComponentUpdate();\n                api.sendInspectorState(INSPECTOR_ID);\n                if (isTimelineActive) {\n                    api.addTimelineEvent({\n                        layerId: MUTATIONS_LAYER_ID,\n                        event: {\n                            time: now(),\n                            title: 'Change',\n                            subtitle: name,\n                            data: {\n                                newValue,\n                                oldValue,\n                            },\n                            groupId: activeAction,\n                        },\n                    });\n                }\n            }, { deep: true });\n        });\n        store.$subscribe(({ events, type }, state) => {\n            api.notifyComponentUpdate();\n            api.sendInspectorState(INSPECTOR_ID);\n            if (!isTimelineActive)\n                return;\n            // rootStore.state[store.id] = state\n            const eventData = {\n                time: now(),\n                title: formatMutationType(type),\n                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),\n                groupId: activeAction,\n            };\n            if (type === MutationType.patchFunction) {\n                eventData.subtitle = '';\n            }\n            else if (type === MutationType.patchObject) {\n                eventData.subtitle = '';\n            }\n            else if (events && !Array.isArray(events)) {\n                eventData.subtitle = events.type;\n            }\n            if (events) {\n                eventData.data['rawEvent(s)'] = {\n                    _custom: {\n                        display: 'DebuggerEvent',\n                        type: 'object',\n                        tooltip: 'raw DebuggerEvent[]',\n                        value: events,\n                    },\n                };\n            }\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: eventData,\n            });\n        }, { detached: true, flush: 'sync' });\n        const hotUpdate = store._hotUpdate;\n        store._hotUpdate = markRaw((newStore) => {\n            hotUpdate(newStore);\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: ' ' + store.$id,\n                    subtitle: 'HMR update',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        info: formatDisplay(`HMR update`),\n                    },\n                },\n            });\n            // update the devtools too\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n        });\n        const { $dispose } = store;\n        store.$dispose = () => {\n            $dispose();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n            api.getSettings().logStoreChanges &&\n                toastMessage(`Disposed \"${store.$id}\" store `);\n        };\n        // trigger an update so it can display new registered stores\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n        api.getSettings().logStoreChanges &&\n            toastMessage(`\"${store.$id}\" store installed `);\n    });\n}\nlet runningActionId = 0;\nlet activeAction;\n/**\n * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the\n * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state\n * mutation to the action.\n *\n * @param store - store to patch\n * @param actionNames - list of actionst to patch\n */\nfunction patchActionForGrouping(store, actionNames, wrapWithProxy) {\n    // original actions of the store as they are given by pinia. We are going to override them\n    const actions = actionNames.reduce((storeActions, actionName) => {\n        // use toRaw to avoid tracking #541\n        storeActions[actionName] = toRaw(store)[actionName];\n        return storeActions;\n    }, {});\n    for (const actionName in actions) {\n        store[actionName] = function () {\n            // the running action id is incremented in a before action hook\n            const _actionId = runningActionId;\n            const trackedStore = wrapWithProxy\n                ? new Proxy(store, {\n                    get(...args) {\n                        activeAction = _actionId;\n                        return Reflect.get(...args);\n                    },\n                    set(...args) {\n                        activeAction = _actionId;\n                        return Reflect.set(...args);\n                    },\n                })\n                : store;\n            // For Setup Stores we need https://github.com/tc39/proposal-async-context\n            activeAction = _actionId;\n            const retValue = actions[actionName].apply(trackedStore, arguments);\n            // this is safer as async actions in Setup Stores would associate mutations done outside of the action\n            activeAction = undefined;\n            return retValue;\n        };\n    }\n}\n/**\n * pinia.use(devtoolsPlugin)\n */\nfunction devtoolsPlugin({ app, store, options }) {\n    // HMR module\n    if (store.$id.startsWith('__hot:')) {\n        return;\n    }\n    // detect option api vs setup api\n    store._isOptionsAPI = !!options.state;\n    patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);\n    // Upgrade the HMR to also update the new actions\n    const originalHotUpdate = store._hotUpdate;\n    toRaw(store)._hotUpdate = function (newStore) {\n        originalHotUpdate.apply(this, arguments);\n        patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);\n    };\n    addStoreToDevtools(app, \n    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?\n    store);\n}\n\n/**\n * Creates a Pinia instance to be used by the application\n */\nfunction createPinia() {\n    const scope = effectScope(true);\n    // NOTE: here we could check the window object for a state and directly set it\n    // if there is anything like it with Vue 3 SSR\n    const state = scope.run(() => ref({}));\n    let _p = [];\n    // plugins added before calling app.use(pinia)\n    let toBeInstalled = [];\n    const pinia = markRaw({\n        install(app) {\n            // this allows calling useStore() outside of a component setup after\n            // installing pinia's plugin\n            setActivePinia(pinia);\n            if (!isVue2) {\n                pinia._a = app;\n                app.provide(piniaSymbol, pinia);\n                app.config.globalProperties.$pinia = pinia;\n                /* istanbul ignore else */\n                if (USE_DEVTOOLS) {\n                    registerPiniaDevtools(app, pinia);\n                }\n                toBeInstalled.forEach((plugin) => _p.push(plugin));\n                toBeInstalled = [];\n            }\n        },\n        use(plugin) {\n            if (!this._a && !isVue2) {\n                toBeInstalled.push(plugin);\n            }\n            else {\n                _p.push(plugin);\n            }\n            return this;\n        },\n        _p,\n        // it's actually undefined here\n        // @ts-expect-error\n        _a: null,\n        _e: scope,\n        _s: new Map(),\n        state,\n    });\n    // pinia devtools rely on dev only features so they cannot be forced unless\n    // the dev build of Vue is used. Avoid old browsers like IE11.\n    if (USE_DEVTOOLS && typeof Proxy !== 'undefined') {\n        pinia.use(devtoolsPlugin);\n    }\n    return pinia;\n}\n\n/**\n * Checks if a function is a `StoreDefinition`.\n *\n * @param fn - object to test\n * @returns true if `fn` is a StoreDefinition\n */\nconst isUseStore = (fn) => {\n    return typeof fn === 'function' && typeof fn.$id === 'string';\n};\n/**\n * Mutates in place `newState` with `oldState` to _hot update_ it. It will\n * remove any key not existing in `newState` and recursively merge plain\n * objects.\n *\n * @param newState - new state object to be patched\n * @param oldState - old state that should be used to patch newState\n * @returns - newState\n */\nfunction patchObject(newState, oldState) {\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in oldState) {\n        const subPatch = oldState[key];\n        // skip the whole sub tree\n        if (!(key in newState)) {\n            continue;\n        }\n        const targetValue = newState[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            newState[key] = patchObject(targetValue, subPatch);\n        }\n        else {\n            // objects are either a bit more complex (e.g. refs) or primitives, so we\n            // just set the whole thing\n            if (isVue2) {\n                set(newState, key, subPatch);\n            }\n            else {\n                newState[key] = subPatch;\n            }\n        }\n    }\n    return newState;\n}\n/**\n * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.\n *\n * @example\n * ```js\n * const useUser = defineStore(...)\n * if (import.meta.hot) {\n *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))\n * }\n * ```\n *\n * @param initialUseStore - return of the defineStore to hot update\n * @param hot - `import.meta.hot`\n */\nfunction acceptHMRUpdate(initialUseStore, hot) {\n    // strip as much as possible from iife.prod\n    if (!(process.env.NODE_ENV !== 'production')) {\n        return () => { };\n    }\n    return (newModule) => {\n        const pinia = hot.data.pinia || initialUseStore._pinia;\n        if (!pinia) {\n            // this store is still not used\n            return;\n        }\n        // preserve the pinia instance across loads\n        hot.data.pinia = pinia;\n        // console.log('got data', newStore)\n        for (const exportName in newModule) {\n            const useStore = newModule[exportName];\n            // console.log('checking for', exportName)\n            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {\n                // console.log('Accepting update for', useStore.$id)\n                const id = useStore.$id;\n                if (id !== initialUseStore.$id) {\n                    console.warn(`The id of the store changed from \"${initialUseStore.$id}\" to \"${id}\". Reloading.`);\n                    // return import.meta.hot.invalidate()\n                    return hot.invalidate();\n                }\n                const existingStore = pinia._s.get(id);\n                if (!existingStore) {\n                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);\n                    return;\n                }\n                useStore(pinia, existingStore);\n            }\n        }\n    };\n}\n\nconst noop = () => { };\nfunction addSubscription(subscriptions, callback, detached, onCleanup = noop) {\n    subscriptions.push(callback);\n    const removeSubscription = () => {\n        const idx = subscriptions.indexOf(callback);\n        if (idx > -1) {\n            subscriptions.splice(idx, 1);\n            onCleanup();\n        }\n    };\n    if (!detached && getCurrentScope()) {\n        onScopeDispose(removeSubscription);\n    }\n    return removeSubscription;\n}\nfunction triggerSubscriptions(subscriptions, ...args) {\n    subscriptions.slice().forEach((callback) => {\n        callback(...args);\n    });\n}\n\nconst fallbackRunWithContext = (fn) => fn();\nfunction mergeReactiveObjects(target, patchToApply) {\n    // Handle Map instances\n    if (target instanceof Map && patchToApply instanceof Map) {\n        patchToApply.forEach((value, key) => target.set(key, value));\n    }\n    // Handle Set instances\n    if (target instanceof Set && patchToApply instanceof Set) {\n        patchToApply.forEach(target.add, target);\n    }\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in patchToApply) {\n        if (!patchToApply.hasOwnProperty(key))\n            continue;\n        const subPatch = patchToApply[key];\n        const targetValue = target[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            target.hasOwnProperty(key) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might\n            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that\n            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.\n            target[key] = mergeReactiveObjects(targetValue, subPatch);\n        }\n        else {\n            // @ts-expect-error: subPatch is a valid value\n            target[key] = subPatch;\n        }\n    }\n    return target;\n}\nconst skipHydrateSymbol = (process.env.NODE_ENV !== 'production')\n    ? Symbol('pinia:skipHydration')\n    : /* istanbul ignore next */ Symbol();\nconst skipHydrateMap = /*#__PURE__*/ new WeakMap();\n/**\n * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a\n * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.\n *\n * @param obj - target object\n * @returns obj\n */\nfunction skipHydrate(obj) {\n    return isVue2\n        ? // in @vue/composition-api, the refs are sealed so defineProperty doesn't work...\n            /* istanbul ignore next */ skipHydrateMap.set(obj, 1) && obj\n        : Object.defineProperty(obj, skipHydrateSymbol, {});\n}\n/**\n * Returns whether a value should be hydrated\n *\n * @param obj - target variable\n * @returns true if `obj` should be hydrated\n */\nfunction shouldHydrate(obj) {\n    return isVue2\n        ? /* istanbul ignore next */ !skipHydrateMap.has(obj)\n        : !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);\n}\nconst { assign } = Object;\nfunction isComputed(o) {\n    return !!(isRef(o) && o.effect);\n}\nfunction createOptionsStore(id, options, pinia, hot) {\n    const { state, actions, getters } = options;\n    const initialState = pinia.state.value[id];\n    let store;\n    function setup() {\n        if (!initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(pinia.state.value, id, state ? state() : {});\n            }\n            else {\n                pinia.state.value[id] = state ? state() : {};\n            }\n        }\n        // avoid creating a state in pinia.state.value\n        const localState = (process.env.NODE_ENV !== 'production') && hot\n            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary\n                toRefs(ref(state ? state() : {}).value)\n            : toRefs(pinia.state.value[id]);\n        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {\n            if ((process.env.NODE_ENV !== 'production') && name in localState) {\n                console.warn(`[]: A getter cannot have the same name as another state property. Rename one of them. Found with \"${name}\" in store \"${id}\".`);\n            }\n            computedGetters[name] = markRaw(computed(() => {\n                setActivePinia(pinia);\n                // it was created just before\n                const store = pinia._s.get(id);\n                // allow cross using stores\n                /* istanbul ignore next */\n                if (isVue2 && !store._r)\n                    return;\n                // @ts-expect-error\n                // return getters![name].call(context, context)\n                // TODO: avoid reading the getter while assigning with a global variable\n                return getters[name].call(store, store);\n            }));\n            return computedGetters;\n        }, {}));\n    }\n    store = createSetupStore(id, setup, options, pinia, hot, true);\n    return store;\n}\nfunction createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {\n    let scope;\n    const optionsForPlugin = assign({ actions: {} }, options);\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !pinia._e.active) {\n        throw new Error('Pinia destroyed');\n    }\n    // watcher options for $subscribe\n    const $subscribeOptions = {\n        deep: true,\n        // flush: 'post',\n    };\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production') && !isVue2) {\n        $subscribeOptions.onTrigger = (event) => {\n            /* istanbul ignore else */\n            if (isListening) {\n                debuggerEvents = event;\n                // avoid triggering this while the store is being built and the state is being set in pinia\n            }\n            else if (isListening == false && !store._hotUpdating) {\n                // let patch send all the events together later\n                /* istanbul ignore else */\n                if (Array.isArray(debuggerEvents)) {\n                    debuggerEvents.push(event);\n                }\n                else {\n                    console.error(' debuggerEvents should be an array. This is most likely an internal Pinia bug.');\n                }\n            }\n        };\n    }\n    // internal state\n    let isListening; // set to true at the end\n    let isSyncListening; // set to true at the end\n    let subscriptions = [];\n    let actionSubscriptions = [];\n    let debuggerEvents;\n    const initialState = pinia.state.value[$id];\n    // avoid setting the state for option stores if it is set\n    // by the setup\n    if (!isOptionsStore && !initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n        /* istanbul ignore if */\n        if (isVue2) {\n            set(pinia.state.value, $id, {});\n        }\n        else {\n            pinia.state.value[$id] = {};\n        }\n    }\n    const hotState = ref({});\n    // avoid triggering too many listeners\n    // https://github.com/vuejs/pinia/issues/1129\n    let activeListener;\n    function $patch(partialStateOrMutator) {\n        let subscriptionMutation;\n        isListening = isSyncListening = false;\n        // reset the debugger events since patches are sync\n        /* istanbul ignore else */\n        if ((process.env.NODE_ENV !== 'production')) {\n            debuggerEvents = [];\n        }\n        if (typeof partialStateOrMutator === 'function') {\n            partialStateOrMutator(pinia.state.value[$id]);\n            subscriptionMutation = {\n                type: MutationType.patchFunction,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        else {\n            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);\n            subscriptionMutation = {\n                type: MutationType.patchObject,\n                payload: partialStateOrMutator,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        const myListenerId = (activeListener = Symbol());\n        nextTick().then(() => {\n            if (activeListener === myListenerId) {\n                isListening = true;\n            }\n        });\n        isSyncListening = true;\n        // because we paused the watcher, we need to manually call the subscriptions\n        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);\n    }\n    const $reset = isOptionsStore\n        ? function $reset() {\n            const { state } = options;\n            const newState = state ? state() : {};\n            // we use a patch to group all changes into one single subscription\n            this.$patch(($state) => {\n                assign($state, newState);\n            });\n        }\n        : /* istanbul ignore next */\n            (process.env.NODE_ENV !== 'production')\n                ? () => {\n                    throw new Error(`: Store \"${$id}\" is built using the setup syntax and does not implement $reset().`);\n                }\n                : noop;\n    function $dispose() {\n        scope.stop();\n        subscriptions = [];\n        actionSubscriptions = [];\n        pinia._s.delete($id);\n    }\n    /**\n     * Wraps an action to handle subscriptions.\n     *\n     * @param name - name of the action\n     * @param action - action to wrap\n     * @returns a wrapped action to handle subscriptions\n     */\n    function wrapAction(name, action) {\n        return function () {\n            setActivePinia(pinia);\n            const args = Array.from(arguments);\n            const afterCallbackList = [];\n            const onErrorCallbackList = [];\n            function after(callback) {\n                afterCallbackList.push(callback);\n            }\n            function onError(callback) {\n                onErrorCallbackList.push(callback);\n            }\n            // @ts-expect-error\n            triggerSubscriptions(actionSubscriptions, {\n                args,\n                name,\n                store,\n                after,\n                onError,\n            });\n            let ret;\n            try {\n                ret = action.apply(this && this.$id === $id ? this : store, args);\n                // handle sync errors\n            }\n            catch (error) {\n                triggerSubscriptions(onErrorCallbackList, error);\n                throw error;\n            }\n            if (ret instanceof Promise) {\n                return ret\n                    .then((value) => {\n                    triggerSubscriptions(afterCallbackList, value);\n                    return value;\n                })\n                    .catch((error) => {\n                    triggerSubscriptions(onErrorCallbackList, error);\n                    return Promise.reject(error);\n                });\n            }\n            // trigger after callbacks\n            triggerSubscriptions(afterCallbackList, ret);\n            return ret;\n        };\n    }\n    const _hmrPayload = /*#__PURE__*/ markRaw({\n        actions: {},\n        getters: {},\n        state: [],\n        hotState,\n    });\n    const partialStore = {\n        _p: pinia,\n        // _s: scope,\n        $id,\n        $onAction: addSubscription.bind(null, actionSubscriptions),\n        $patch,\n        $reset,\n        $subscribe(callback, options = {}) {\n            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());\n            const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {\n                if (options.flush === 'sync' ? isSyncListening : isListening) {\n                    callback({\n                        storeId: $id,\n                        type: MutationType.direct,\n                        events: debuggerEvents,\n                    }, state);\n                }\n            }, assign({}, $subscribeOptions, options)));\n            return removeSubscription;\n        },\n        $dispose,\n    };\n    /* istanbul ignore if */\n    if (isVue2) {\n        // start as non ready\n        partialStore._r = false;\n    }\n    const store = reactive((process.env.NODE_ENV !== 'production') || USE_DEVTOOLS\n        ? assign({\n            _hmrPayload,\n            _customProperties: markRaw(new Set()), // devtools custom properties\n        }, partialStore\n        // must be added later\n        // setupStore\n        )\n        : partialStore);\n    // store the partial store now so the setup of stores can instantiate each other before they are finished without\n    // creating infinite loops.\n    pinia._s.set($id, store);\n    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;\n    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped\n    const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(setup)));\n    // overwrite existing actions to support $onAction\n    for (const key in setupStore) {\n        const prop = setupStore[key];\n        if ((isRef(prop) && !isComputed(prop)) || isReactive(prop)) {\n            // mark it as a piece of state to be serialized\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                set(hotState.value, key, toRef(setupStore, key));\n                // createOptionStore directly sets the state in pinia.state.value so we\n                // can just skip that\n            }\n            else if (!isOptionsStore) {\n                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created\n                if (initialState && shouldHydrate(prop)) {\n                    if (isRef(prop)) {\n                        prop.value = initialState[key];\n                    }\n                    else {\n                        // probably a reactive object, lets recursively assign\n                        // @ts-expect-error: prop is unknown\n                        mergeReactiveObjects(prop, initialState[key]);\n                    }\n                }\n                // transfer the ref to the pinia state to keep everything in sync\n                /* istanbul ignore if */\n                if (isVue2) {\n                    set(pinia.state.value[$id], key, prop);\n                }\n                else {\n                    pinia.state.value[$id][key] = prop;\n                }\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.state.push(key);\n            }\n            // action\n        }\n        else if (typeof prop === 'function') {\n            // @ts-expect-error: we are overriding the function we avoid wrapping if\n            const actionValue = (process.env.NODE_ENV !== 'production') && hot ? prop : wrapAction(key, prop);\n            // this a hot module replacement store because the hotUpdate method needs\n            // to do it with the right context\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(setupStore, key, actionValue);\n            }\n            else {\n                // @ts-expect-error\n                setupStore[key] = actionValue;\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.actions[key] = prop;\n            }\n            // list actions so they can be used in plugins\n            // @ts-expect-error\n            optionsForPlugin.actions[key] = prop;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            // add getters for devtools\n            if (isComputed(prop)) {\n                _hmrPayload.getters[key] = isOptionsStore\n                    ? // @ts-expect-error\n                        options.getters[key]\n                    : prop;\n                if (IS_CLIENT) {\n                    const getters = setupStore._getters ||\n                        // @ts-expect-error: same\n                        (setupStore._getters = markRaw([]));\n                    getters.push(key);\n                }\n            }\n        }\n    }\n    // add the state, getters, and action properties\n    /* istanbul ignore if */\n    if (isVue2) {\n        Object.keys(setupStore).forEach((key) => {\n            set(store, key, setupStore[key]);\n        });\n    }\n    else {\n        assign(store, setupStore);\n        // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.\n        // Make `storeToRefs()` work with `reactive()` #799\n        assign(toRaw(store), setupStore);\n    }\n    // use this instead of a computed with setter to be able to create it anywhere\n    // without linking the computed lifespan to wherever the store is first\n    // created.\n    Object.defineProperty(store, '$state', {\n        get: () => ((process.env.NODE_ENV !== 'production') && hot ? hotState.value : pinia.state.value[$id]),\n        set: (state) => {\n            /* istanbul ignore if */\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                throw new Error('cannot set hotState');\n            }\n            $patch(($state) => {\n                assign($state, state);\n            });\n        },\n    });\n    // add the hotUpdate before plugins to allow them to override it\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production')) {\n        store._hotUpdate = markRaw((newStore) => {\n            store._hotUpdating = true;\n            newStore._hmrPayload.state.forEach((stateKey) => {\n                if (stateKey in store.$state) {\n                    const newStateTarget = newStore.$state[stateKey];\n                    const oldStateSource = store.$state[stateKey];\n                    if (typeof newStateTarget === 'object' &&\n                        isPlainObject(newStateTarget) &&\n                        isPlainObject(oldStateSource)) {\n                        patchObject(newStateTarget, oldStateSource);\n                    }\n                    else {\n                        // transfer the ref\n                        newStore.$state[stateKey] = oldStateSource;\n                    }\n                }\n                // patch direct access properties to allow store.stateProperty to work as\n                // store.$state.stateProperty\n                set(store, stateKey, toRef(newStore.$state, stateKey));\n            });\n            // remove deleted state properties\n            Object.keys(store.$state).forEach((stateKey) => {\n                if (!(stateKey in newStore.$state)) {\n                    del(store, stateKey);\n                }\n            });\n            // avoid devtools logging this as a mutation\n            isListening = false;\n            isSyncListening = false;\n            pinia.state.value[$id] = toRef(newStore._hmrPayload, 'hotState');\n            isSyncListening = true;\n            nextTick().then(() => {\n                isListening = true;\n            });\n            for (const actionName in newStore._hmrPayload.actions) {\n                const action = newStore[actionName];\n                set(store, actionName, wrapAction(actionName, action));\n            }\n            // TODO: does this work in both setup and option store?\n            for (const getterName in newStore._hmrPayload.getters) {\n                const getter = newStore._hmrPayload.getters[getterName];\n                const getterValue = isOptionsStore\n                    ? // special handling of options api\n                        computed(() => {\n                            setActivePinia(pinia);\n                            return getter.call(store, store);\n                        })\n                    : getter;\n                set(store, getterName, getterValue);\n            }\n            // remove deleted getters\n            Object.keys(store._hmrPayload.getters).forEach((key) => {\n                if (!(key in newStore._hmrPayload.getters)) {\n                    del(store, key);\n                }\n            });\n            // remove old actions\n            Object.keys(store._hmrPayload.actions).forEach((key) => {\n                if (!(key in newStore._hmrPayload.actions)) {\n                    del(store, key);\n                }\n            });\n            // update the values used in devtools and to allow deleting new properties later on\n            store._hmrPayload = newStore._hmrPayload;\n            store._getters = newStore._getters;\n            store._hotUpdating = false;\n        });\n    }\n    if (USE_DEVTOOLS) {\n        const nonEnumerable = {\n            writable: true,\n            configurable: true,\n            // avoid warning on devtools trying to display this property\n            enumerable: false,\n        };\n        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {\n            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));\n        });\n    }\n    /* istanbul ignore if */\n    if (isVue2) {\n        // mark the store as ready before plugins\n        store._r = true;\n    }\n    // apply all plugins\n    pinia._p.forEach((extender) => {\n        /* istanbul ignore else */\n        if (USE_DEVTOOLS) {\n            const extensions = scope.run(() => extender({\n                store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            }));\n            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));\n            assign(store, extensions);\n        }\n        else {\n            assign(store, scope.run(() => extender({\n                store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            })));\n        }\n    });\n    if ((process.env.NODE_ENV !== 'production') &&\n        store.$state &&\n        typeof store.$state === 'object' &&\n        typeof store.$state.constructor === 'function' &&\n        !store.$state.constructor.toString().includes('[native code]')) {\n        console.warn(`[]: The \"state\" must be a plain object. It cannot be\\n` +\n            `\\tstate: () => new MyClass()\\n` +\n            `Found in store \"${store.$id}\".`);\n    }\n    // only apply hydrate to option stores with an initial state in pinia\n    if (initialState &&\n        isOptionsStore &&\n        options.hydrate) {\n        options.hydrate(store.$state, initialState);\n    }\n    isListening = true;\n    isSyncListening = true;\n    return store;\n}\nfunction defineStore(\n// TODO: add proper types from above\nidOrOptions, setup, setupOptions) {\n    let id;\n    let options;\n    const isSetupStore = typeof setup === 'function';\n    if (typeof idOrOptions === 'string') {\n        id = idOrOptions;\n        // the option store setup will contain the actual options in this case\n        options = isSetupStore ? setupOptions : setup;\n    }\n    else {\n        options = idOrOptions;\n        id = idOrOptions.id;\n        if ((process.env.NODE_ENV !== 'production') && typeof id !== 'string') {\n            throw new Error(`[]: \"defineStore()\" must be passed a store id as its first argument.`);\n        }\n    }\n    function useStore(pinia, hot) {\n        const hasContext = hasInjectionContext();\n        pinia =\n            // in test mode, ignore the argument provided as we can always retrieve a\n            // pinia instance with getActivePinia()\n            ((process.env.NODE_ENV === 'test') && activePinia && activePinia._testing ? null : pinia) ||\n                (hasContext ? inject(piniaSymbol, null) : null);\n        if (pinia)\n            setActivePinia(pinia);\n        if ((process.env.NODE_ENV !== 'production') && !activePinia) {\n            throw new Error(`[]: \"getActivePinia()\" was called but there was no active Pinia. Are you trying to use a store before calling \"app.use(pinia)\"?\\n` +\n                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\\n` +\n                `This will fail in production.`);\n        }\n        pinia = activePinia;\n        if (!pinia._s.has(id)) {\n            // creating the store registers it in `pinia._s`\n            if (isSetupStore) {\n                createSetupStore(id, setup, options, pinia);\n            }\n            else {\n                createOptionsStore(id, options, pinia);\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                // @ts-expect-error: not the right inferred type\n                useStore._pinia = pinia;\n            }\n        }\n        const store = pinia._s.get(id);\n        if ((process.env.NODE_ENV !== 'production') && hot) {\n            const hotId = '__hot:' + id;\n            const newStore = isSetupStore\n                ? createSetupStore(hotId, setup, options, pinia, true)\n                : createOptionsStore(hotId, assign({}, options), pinia, true);\n            hot._hotUpdate(newStore);\n            // cleanup the state properties and the store from the cache\n            delete pinia.state.value[hotId];\n            pinia._s.delete(hotId);\n        }\n        if ((process.env.NODE_ENV !== 'production') && IS_CLIENT) {\n            const currentInstance = getCurrentInstance();\n            // save stores in instances to access them devtools\n            if (currentInstance &&\n                currentInstance.proxy &&\n                // avoid adding stores that are just built for hot module replacement\n                !hot) {\n                const vm = currentInstance.proxy;\n                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});\n                cache[id] = store;\n            }\n        }\n        // StoreGeneric cannot be casted towards Store\n        return store;\n    }\n    useStore.$id = id;\n    return useStore;\n}\n\nlet mapStoreSuffix = 'Store';\n/**\n * Changes the suffix added by `mapStores()`. Can be set to an empty string.\n * Defaults to `\"Store\"`. Make sure to extend the MapStoresCustomization\n * interface if you are using TypeScript.\n *\n * @param suffix - new suffix\n */\nfunction setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS\n) {\n    mapStoreSuffix = suffix;\n}\n/**\n * Allows using stores without the composition API (`setup()`) by generating an\n * object to be spread in the `computed` field of a component. It accepts a list\n * of store definitions.\n *\n * @example\n * ```js\n * export default {\n *   computed: {\n *     // other computed properties\n *     ...mapStores(useUserStore, useCartStore)\n *   },\n *\n *   created() {\n *     this.userStore // store with id \"user\"\n *     this.cartStore // store with id \"cart\"\n *   }\n * }\n * ```\n *\n * @param stores - list of stores to map to an object\n */\nfunction mapStores(...stores) {\n    if ((process.env.NODE_ENV !== 'production') && Array.isArray(stores[0])) {\n        console.warn(`[]: Directly pass all stores to \"mapStores()\" without putting them in an array:\\n` +\n            `Replace\\n` +\n            `\\tmapStores([useAuthStore, useCartStore])\\n` +\n            `with\\n` +\n            `\\tmapStores(useAuthStore, useCartStore)\\n` +\n            `This will fail in production if not fixed.`);\n        stores = stores[0];\n    }\n    return stores.reduce((reduced, useStore) => {\n        // @ts-expect-error: $id is added by defineStore\n        reduced[useStore.$id + mapStoreSuffix] = function () {\n            return useStore(this.$pinia);\n        };\n        return reduced;\n    }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = function () {\n                return useStore(this.$pinia)[key];\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function () {\n                const store = useStore(this.$pinia);\n                const storeKey = keysOrMapper[key];\n                // for some reason TS is unable to infer the type of storeKey to be a\n                // function\n                return typeof storeKey === 'function'\n                    ? storeKey.call(this, store)\n                    : store[storeKey];\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Alias for `mapState()`. You should use `mapState()` instead.\n * @deprecated use `mapState()` instead.\n */\nconst mapGetters = mapState;\n/**\n * Allows directly using actions from your store without using the composition\n * API (`setup()`) by generating an object to be spread in the `methods` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapActions(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                return useStore(this.$pinia)[key](...args);\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                return useStore(this.$pinia)[keysOrMapper[key]](...args);\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapWritableState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-ignore\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[key];\n                },\n                set(value) {\n                    // it's easier to type it here as any\n                    return (useStore(this.$pinia)[key] = value);\n                },\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-ignore\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[keysOrMapper[key]];\n                },\n                set(value) {\n                    // it's easier to type it here as any\n                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);\n                },\n            };\n            return reduced;\n        }, {});\n}\n\n/**\n * Creates an object of references with all the state, getters, and plugin-added\n * state properties of the store. Similar to `toRefs()` but specifically\n * designed for Pinia stores so methods and non reactive properties are\n * completely ignored.\n *\n * @param store - store to extract the refs from\n */\nfunction storeToRefs(store) {\n    // See https://github.com/vuejs/pinia/issues/852\n    // It's easier to just use toRefs() even if it includes more stuff\n    if (isVue2) {\n        // @ts-expect-error: toRefs include methods and others\n        return toRefs(store);\n    }\n    else {\n        store = toRaw(store);\n        const refs = {};\n        for (const key in store) {\n            const value = store[key];\n            if (isRef(value) || isReactive(value)) {\n                // @ts-expect-error: the key is state or getter\n                refs[key] =\n                    // ---\n                    toRef(store, key);\n            }\n        }\n        return refs;\n    }\n}\n\n/**\n * Vue 2 Plugin that must be installed for pinia to work. Note **you don't need\n * this plugin if you are using Nuxt.js**. Use the `buildModule` instead:\n * https://pinia.vuejs.org/ssr/nuxt.html.\n *\n * @example\n * ```js\n * import Vue from 'vue'\n * import { PiniaVuePlugin, createPinia } from 'pinia'\n *\n * Vue.use(PiniaVuePlugin)\n * const pinia = createPinia()\n *\n * new Vue({\n *   el: '#app',\n *   // ...\n *   pinia,\n * })\n * ```\n *\n * @param _Vue - `Vue` imported from 'vue'.\n */\nconst PiniaVuePlugin = function (_Vue) {\n    // Equivalent of\n    // app.config.globalProperties.$pinia = pinia\n    _Vue.mixin({\n        beforeCreate() {\n            const options = this.$options;\n            if (options.pinia) {\n                const pinia = options.pinia;\n                // HACK: taken from provide(): https://github.com/vuejs/composition-api/blob/main/src/apis/inject.ts#L31\n                /* istanbul ignore else */\n                if (!this._provided) {\n                    const provideCache = {};\n                    Object.defineProperty(this, '_provided', {\n                        get: () => provideCache,\n                        set: (v) => Object.assign(provideCache, v),\n                    });\n                }\n                this._provided[piniaSymbol] = pinia;\n                // propagate the pinia instance in an SSR friendly way\n                // avoid adding it to nuxt twice\n                /* istanbul ignore else */\n                if (!this.$pinia) {\n                    this.$pinia = pinia;\n                }\n                pinia._a = this;\n                if (IS_CLIENT) {\n                    // this allows calling useStore() outside of a component setup after\n                    // installing pinia's plugin\n                    setActivePinia(pinia);\n                }\n                if (USE_DEVTOOLS) {\n                    registerPiniaDevtools(pinia._a, pinia);\n                }\n            }\n            else if (!this.$pinia && options.parent && options.parent.$pinia) {\n                this.$pinia = options.parent.$pinia;\n            }\n        },\n        destroyed() {\n            delete this._pStores;\n        },\n    });\n};\n\nexport { MutationType, PiniaVuePlugin, acceptHMRUpdate, createPinia, defineStore, getActivePinia, mapActions, mapGetters, mapState, mapStores, mapWritableState, setActivePinia, setMapStoreSuffix, skipHydrate, storeToRefs };\n","import { defineComponent, ref, h, watch, computed, reactive, shallowRef, nextTick, getCurrentInstance, onMounted, isVue2, watchEffect, toRefs } from 'vue-demi';\nimport { onClickOutside as onClickOutside$1, useActiveElement, useBattery, useBrowserLocation, useClipboard, useDark, useDeviceMotion, useDeviceOrientation, useDevicePixelRatio, useDevicesList, useDocumentVisibility, useStorage as useStorage$1, isClient as isClient$1, useDraggable, useElementBounding, useElementSize as useElementSize$1, useElementVisibility as useElementVisibility$1, useEyeDropper, useFullscreen, useGeolocation, useIdle, useMouse, useMouseInElement, useMousePressed, useNetwork, useNow, useObjectUrl, useOffsetPagination, useOnline, usePageLeave, usePointer, usePointerLock, usePreferredColorScheme, usePreferredContrast, usePreferredDark as usePreferredDark$1, usePreferredLanguages, usePreferredReducedMotion, useTimeAgo, useTimestamp, useVirtualList, useWindowFocus, useWindowSize } from '@vueuse/core';\nimport { toValue, isClient, noop, isObject, tryOnScopeDispose, isIOS, directiveHooks, pausableWatch, tryOnMounted, toRef, useToggle, notNullish, promiseTimeout, until, useDebounceFn, useThrottleFn } from '@vueuse/shared';\n\nconst OnClickOutside = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"OnClickOutside\",\n  props: [\"as\", \"options\"],\n  emits: [\"trigger\"],\n  setup(props, { slots, emit }) {\n    const target = ref();\n    onClickOutside$1(target, (e) => {\n      emit(\"trigger\", e);\n    }, props.options);\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default());\n    };\n  }\n});\n\nfunction unrefElement(elRef) {\n  var _a;\n  const plain = toValue(elRef);\n  return (_a = plain == null ? void 0 : plain.$el) != null ? _a : plain;\n}\n\nconst defaultWindow = isClient ? window : void 0;\n\nfunction useEventListener(...args) {\n  let target;\n  let events;\n  let listeners;\n  let options;\n  if (typeof args[0] === \"string\" || Array.isArray(args[0])) {\n    [events, listeners, options] = args;\n    target = defaultWindow;\n  } else {\n    [target, events, listeners, options] = args;\n  }\n  if (!target)\n    return noop;\n  if (!Array.isArray(events))\n    events = [events];\n  if (!Array.isArray(listeners))\n    listeners = [listeners];\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener, options2) => {\n    el.addEventListener(event, listener, options2);\n    return () => el.removeEventListener(event, listener, options2);\n  };\n  const stopWatch = watch(\n    () => [unrefElement(target), toValue(options)],\n    ([el, options2]) => {\n      cleanup();\n      if (!el)\n        return;\n      const optionsClone = isObject(options2) ? { ...options2 } : options2;\n      cleanups.push(\n        ...events.flatMap((event) => {\n          return listeners.map((listener) => register(el, event, listener, optionsClone));\n        })\n      );\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return stop;\n}\n\nlet _iOSWorkaround = false;\nfunction onClickOutside(target, handler, options = {}) {\n  const { window = defaultWindow, ignore = [], capture = true, detectIframe = false } = options;\n  if (!window)\n    return noop;\n  if (isIOS && !_iOSWorkaround) {\n    _iOSWorkaround = true;\n    Array.from(window.document.body.children).forEach((el) => el.addEventListener(\"click\", noop));\n    window.document.documentElement.addEventListener(\"click\", noop);\n  }\n  let shouldListen = true;\n  const shouldIgnore = (event) => {\n    return ignore.some((target2) => {\n      if (typeof target2 === \"string\") {\n        return Array.from(window.document.querySelectorAll(target2)).some((el) => el === event.target || event.composedPath().includes(el));\n      } else {\n        const el = unrefElement(target2);\n        return el && (event.target === el || event.composedPath().includes(el));\n      }\n    });\n  };\n  const listener = (event) => {\n    const el = unrefElement(target);\n    if (!el || el === event.target || event.composedPath().includes(el))\n      return;\n    if (event.detail === 0)\n      shouldListen = !shouldIgnore(event);\n    if (!shouldListen) {\n      shouldListen = true;\n      return;\n    }\n    handler(event);\n  };\n  const cleanup = [\n    useEventListener(window, \"click\", listener, { passive: true, capture }),\n    useEventListener(window, \"pointerdown\", (e) => {\n      const el = unrefElement(target);\n      shouldListen = !shouldIgnore(e) && !!(el && !e.composedPath().includes(el));\n    }, { passive: true }),\n    detectIframe && useEventListener(window, \"blur\", (event) => {\n      setTimeout(() => {\n        var _a;\n        const el = unrefElement(target);\n        if (((_a = window.document.activeElement) == null ? void 0 : _a.tagName) === \"IFRAME\" && !(el == null ? void 0 : el.contains(window.document.activeElement))) {\n          handler(event);\n        }\n      }, 0);\n    })\n  ].filter(Boolean);\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\n\nconst vOnClickOutside = {\n  [directiveHooks.mounted](el, binding) {\n    const capture = !binding.modifiers.bubble;\n    if (typeof binding.value === \"function\") {\n      el.__onClickOutside_stop = onClickOutside(el, binding.value, { capture });\n    } else {\n      const [handler, options] = binding.value;\n      el.__onClickOutside_stop = onClickOutside(el, handler, Object.assign({ capture }, options));\n    }\n  },\n  [directiveHooks.unmounted](el) {\n    el.__onClickOutside_stop();\n  }\n};\n\nfunction createKeyPredicate(keyFilter) {\n  if (typeof keyFilter === \"function\")\n    return keyFilter;\n  else if (typeof keyFilter === \"string\")\n    return (event) => event.key === keyFilter;\n  else if (Array.isArray(keyFilter))\n    return (event) => keyFilter.includes(event.key);\n  return () => true;\n}\nfunction onKeyStroke(...args) {\n  let key;\n  let handler;\n  let options = {};\n  if (args.length === 3) {\n    key = args[0];\n    handler = args[1];\n    options = args[2];\n  } else if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      key = true;\n      handler = args[0];\n      options = args[1];\n    } else {\n      key = args[0];\n      handler = args[1];\n    }\n  } else {\n    key = true;\n    handler = args[0];\n  }\n  const {\n    target = defaultWindow,\n    eventName = \"keydown\",\n    passive = false,\n    dedupe = false\n  } = options;\n  const predicate = createKeyPredicate(key);\n  const listener = (e) => {\n    if (e.repeat && toValue(dedupe))\n      return;\n    if (predicate(e))\n      handler(e);\n  };\n  return useEventListener(target, eventName, listener, passive);\n}\n\nconst vOnKeyStroke = {\n  [directiveHooks.mounted](el, binding) {\n    var _a, _b;\n    const keys = (_b = (_a = binding.arg) == null ? void 0 : _a.split(\",\")) != null ? _b : true;\n    if (typeof binding.value === \"function\") {\n      onKeyStroke(keys, binding.value, {\n        target: el\n      });\n    } else {\n      const [handler, options] = binding.value;\n      onKeyStroke(keys, handler, {\n        target: el,\n        ...options\n      });\n    }\n  }\n};\n\nconst DEFAULT_DELAY = 500;\nconst DEFAULT_THRESHOLD = 10;\nfunction onLongPress(target, handler, options) {\n  var _a, _b;\n  const elementRef = computed(() => unrefElement(target));\n  let timeout;\n  let posStart;\n  let startTimestamp;\n  let hasLongPressed = false;\n  function clear() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = void 0;\n    }\n    posStart = void 0;\n    startTimestamp = void 0;\n    hasLongPressed = false;\n  }\n  function onRelease(ev) {\n    var _a2, _b2, _c;\n    const [_startTimestamp, _posStart, _hasLongPressed] = [startTimestamp, posStart, hasLongPressed];\n    clear();\n    if (!(options == null ? void 0 : options.onMouseUp) || !_posStart || !_startTimestamp)\n      return;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - _posStart.x;\n    const dy = ev.y - _posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    options.onMouseUp(ev.timeStamp - _startTimestamp, distance, _hasLongPressed);\n  }\n  function onDown(ev) {\n    var _a2, _b2, _c, _d;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    clear();\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    posStart = {\n      x: ev.x,\n      y: ev.y\n    };\n    startTimestamp = ev.timeStamp;\n    timeout = setTimeout(\n      () => {\n        hasLongPressed = true;\n        handler(ev);\n      },\n      (_d = options == null ? void 0 : options.delay) != null ? _d : DEFAULT_DELAY\n    );\n  }\n  function onMove(ev) {\n    var _a2, _b2, _c, _d;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if (!posStart || (options == null ? void 0 : options.distanceThreshold) === false)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - posStart.x;\n    const dy = ev.y - posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    if (distance >= ((_d = options == null ? void 0 : options.distanceThreshold) != null ? _d : DEFAULT_THRESHOLD))\n      clear();\n  }\n  const listenerOptions = {\n    capture: (_a = options == null ? void 0 : options.modifiers) == null ? void 0 : _a.capture,\n    once: (_b = options == null ? void 0 : options.modifiers) == null ? void 0 : _b.once\n  };\n  const cleanup = [\n    useEventListener(elementRef, \"pointerdown\", onDown, listenerOptions),\n    useEventListener(elementRef, \"pointermove\", onMove, listenerOptions),\n    useEventListener(elementRef, [\"pointerup\", \"pointerleave\"], onRelease, listenerOptions)\n  ];\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\n\nconst OnLongPress = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"OnLongPress\",\n  props: [\"as\", \"options\"],\n  emits: [\"trigger\"],\n  setup(props, { slots, emit }) {\n    const target = ref();\n    onLongPress(\n      target,\n      (e) => {\n        emit(\"trigger\", e);\n      },\n      props.options\n    );\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default());\n    };\n  }\n});\n\nconst vOnLongPress = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\")\n      onLongPress(el, binding.value, { modifiers: binding.modifiers });\n    else\n      onLongPress(el, ...binding.value);\n  }\n};\n\nconst UseActiveElement = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseActiveElement\",\n  setup(props, { slots }) {\n    const data = reactive({\n      element: useActiveElement()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseBattery = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseBattery\",\n  setup(props, { slots }) {\n    const data = reactive(useBattery(props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseBrowserLocation = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseBrowserLocation\",\n  setup(props, { slots }) {\n    const data = reactive(useBrowserLocation());\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseClipboard = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseClipboard\",\n  props: [\n    \"source\",\n    \"read\",\n    \"navigator\",\n    \"copiedDuring\",\n    \"legacy\"\n  ],\n  setup(props, { slots }) {\n    const data = reactive(useClipboard(props));\n    return () => {\n      var _a;\n      return (_a = slots.default) == null ? void 0 : _a.call(slots, data);\n    };\n  }\n});\n\nconst _global = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nconst globalKey = \"__vueuse_ssr_handlers__\";\nconst handlers = /* @__PURE__ */ getHandlers();\nfunction getHandlers() {\n  if (!(globalKey in _global))\n    _global[globalKey] = _global[globalKey] || {};\n  return _global[globalKey];\n}\nfunction getSSRHandler(key, fallback) {\n  return handlers[key] || fallback;\n}\n\nfunction guessSerializerType(rawInit) {\n  return rawInit == null ? \"any\" : rawInit instanceof Set ? \"set\" : rawInit instanceof Map ? \"map\" : rawInit instanceof Date ? \"date\" : typeof rawInit === \"boolean\" ? \"boolean\" : typeof rawInit === \"string\" ? \"string\" : typeof rawInit === \"object\" ? \"object\" : !Number.isNaN(rawInit) ? \"number\" : \"any\";\n}\n\nconst StorageSerializers = {\n  boolean: {\n    read: (v) => v === \"true\",\n    write: (v) => String(v)\n  },\n  object: {\n    read: (v) => JSON.parse(v),\n    write: (v) => JSON.stringify(v)\n  },\n  number: {\n    read: (v) => Number.parseFloat(v),\n    write: (v) => String(v)\n  },\n  any: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  string: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  map: {\n    read: (v) => new Map(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v.entries()))\n  },\n  set: {\n    read: (v) => new Set(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v))\n  },\n  date: {\n    read: (v) => new Date(v),\n    write: (v) => v.toISOString()\n  }\n};\nconst customStorageEventName = \"vueuse-storage\";\nfunction useStorage(key, defaults, storage, options = {}) {\n  var _a;\n  const {\n    flush = \"pre\",\n    deep = true,\n    listenToStorageChanges = true,\n    writeDefaults = true,\n    mergeDefaults = false,\n    shallow,\n    window = defaultWindow,\n    eventFilter,\n    onError = (e) => {\n      console.error(e);\n    },\n    initOnMounted\n  } = options;\n  const data = (shallow ? shallowRef : ref)(typeof defaults === \"function\" ? defaults() : defaults);\n  if (!storage) {\n    try {\n      storage = getSSRHandler(\"getDefaultStorage\", () => {\n        var _a2;\n        return (_a2 = defaultWindow) == null ? void 0 : _a2.localStorage;\n      })();\n    } catch (e) {\n      onError(e);\n    }\n  }\n  if (!storage)\n    return data;\n  const rawInit = toValue(defaults);\n  const type = guessSerializerType(rawInit);\n  const serializer = (_a = options.serializer) != null ? _a : StorageSerializers[type];\n  const { pause: pauseWatch, resume: resumeWatch } = pausableWatch(\n    data,\n    () => write(data.value),\n    { flush, deep, eventFilter }\n  );\n  if (window && listenToStorageChanges) {\n    tryOnMounted(() => {\n      useEventListener(window, \"storage\", update);\n      useEventListener(window, customStorageEventName, updateFromCustomEvent);\n      if (initOnMounted)\n        update();\n    });\n  }\n  if (!initOnMounted)\n    update();\n  function dispatchWriteEvent(oldValue, newValue) {\n    if (window) {\n      window.dispatchEvent(new CustomEvent(customStorageEventName, {\n        detail: {\n          key,\n          oldValue,\n          newValue,\n          storageArea: storage\n        }\n      }));\n    }\n  }\n  function write(v) {\n    try {\n      const oldValue = storage.getItem(key);\n      if (v == null) {\n        dispatchWriteEvent(oldValue, null);\n        storage.removeItem(key);\n      } else {\n        const serialized = serializer.write(v);\n        if (oldValue !== serialized) {\n          storage.setItem(key, serialized);\n          dispatchWriteEvent(oldValue, serialized);\n        }\n      }\n    } catch (e) {\n      onError(e);\n    }\n  }\n  function read(event) {\n    const rawValue = event ? event.newValue : storage.getItem(key);\n    if (rawValue == null) {\n      if (writeDefaults && rawInit != null)\n        storage.setItem(key, serializer.write(rawInit));\n      return rawInit;\n    } else if (!event && mergeDefaults) {\n      const value = serializer.read(rawValue);\n      if (typeof mergeDefaults === \"function\")\n        return mergeDefaults(value, rawInit);\n      else if (type === \"object\" && !Array.isArray(value))\n        return { ...rawInit, ...value };\n      return value;\n    } else if (typeof rawValue !== \"string\") {\n      return rawValue;\n    } else {\n      return serializer.read(rawValue);\n    }\n  }\n  function update(event) {\n    if (event && event.storageArea !== storage)\n      return;\n    if (event && event.key == null) {\n      data.value = rawInit;\n      return;\n    }\n    if (event && event.key !== key)\n      return;\n    pauseWatch();\n    try {\n      if ((event == null ? void 0 : event.newValue) !== serializer.write(data.value))\n        data.value = read(event);\n    } catch (e) {\n      onError(e);\n    } finally {\n      if (event)\n        nextTick(resumeWatch);\n      else\n        resumeWatch();\n    }\n  }\n  function updateFromCustomEvent(event) {\n    update(event.detail);\n  }\n  return data;\n}\n\nfunction useMounted() {\n  const isMounted = ref(false);\n  const instance = getCurrentInstance();\n  if (instance) {\n    onMounted(() => {\n      isMounted.value = true;\n    }, isVue2 ? void 0 : instance);\n  }\n  return isMounted;\n}\n\nfunction useSupported(callback) {\n  const isMounted = useMounted();\n  return computed(() => {\n    isMounted.value;\n    return Boolean(callback());\n  });\n}\n\nfunction useMediaQuery(query, options = {}) {\n  const { window = defaultWindow } = options;\n  const isSupported = useSupported(() => window && \"matchMedia\" in window && typeof window.matchMedia === \"function\");\n  let mediaQuery;\n  const matches = ref(false);\n  const handler = (event) => {\n    matches.value = event.matches;\n  };\n  const cleanup = () => {\n    if (!mediaQuery)\n      return;\n    if (\"removeEventListener\" in mediaQuery)\n      mediaQuery.removeEventListener(\"change\", handler);\n    else\n      mediaQuery.removeListener(handler);\n  };\n  const stopWatch = watchEffect(() => {\n    if (!isSupported.value)\n      return;\n    cleanup();\n    mediaQuery = window.matchMedia(toValue(query));\n    if (\"addEventListener\" in mediaQuery)\n      mediaQuery.addEventListener(\"change\", handler);\n    else\n      mediaQuery.addListener(handler);\n    matches.value = mediaQuery.matches;\n  });\n  tryOnScopeDispose(() => {\n    stopWatch();\n    cleanup();\n    mediaQuery = void 0;\n  });\n  return matches;\n}\n\nfunction usePreferredDark(options) {\n  return useMediaQuery(\"(prefers-color-scheme: dark)\", options);\n}\n\nfunction useColorMode(options = {}) {\n  const {\n    selector = \"html\",\n    attribute = \"class\",\n    initialValue = \"auto\",\n    window = defaultWindow,\n    storage,\n    storageKey = \"vueuse-color-scheme\",\n    listenToStorageChanges = true,\n    storageRef,\n    emitAuto,\n    disableTransition = true\n  } = options;\n  const modes = {\n    auto: \"\",\n    light: \"light\",\n    dark: \"dark\",\n    ...options.modes || {}\n  };\n  const preferredDark = usePreferredDark({ window });\n  const system = computed(() => preferredDark.value ? \"dark\" : \"light\");\n  const store = storageRef || (storageKey == null ? toRef(initialValue) : useStorage(storageKey, initialValue, storage, { window, listenToStorageChanges }));\n  const state = computed(() => store.value === \"auto\" ? system.value : store.value);\n  const updateHTMLAttrs = getSSRHandler(\n    \"updateHTMLAttrs\",\n    (selector2, attribute2, value) => {\n      const el = typeof selector2 === \"string\" ? window == null ? void 0 : window.document.querySelector(selector2) : unrefElement(selector2);\n      if (!el)\n        return;\n      let style;\n      if (disableTransition) {\n        style = window.document.createElement(\"style\");\n        const styleString = \"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\";\n        style.appendChild(document.createTextNode(styleString));\n        window.document.head.appendChild(style);\n      }\n      if (attribute2 === \"class\") {\n        const current = value.split(/\\s/g);\n        Object.values(modes).flatMap((i) => (i || \"\").split(/\\s/g)).filter(Boolean).forEach((v) => {\n          if (current.includes(v))\n            el.classList.add(v);\n          else\n            el.classList.remove(v);\n        });\n      } else {\n        el.setAttribute(attribute2, value);\n      }\n      if (disableTransition) {\n        window.getComputedStyle(style).opacity;\n        document.head.removeChild(style);\n      }\n    }\n  );\n  function defaultOnChanged(mode) {\n    var _a;\n    updateHTMLAttrs(selector, attribute, (_a = modes[mode]) != null ? _a : mode);\n  }\n  function onChanged(mode) {\n    if (options.onChanged)\n      options.onChanged(mode, defaultOnChanged);\n    else\n      defaultOnChanged(mode);\n  }\n  watch(state, onChanged, { flush: \"post\", immediate: true });\n  tryOnMounted(() => onChanged(state.value));\n  const auto = computed({\n    get() {\n      return emitAuto ? store.value : state.value;\n    },\n    set(v) {\n      store.value = v;\n    }\n  });\n  try {\n    return Object.assign(auto, { store, system, state });\n  } catch (e) {\n    return auto;\n  }\n}\n\nconst UseColorMode = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseColorMode\",\n  props: [\"selector\", \"attribute\", \"modes\", \"onChanged\", \"storageKey\", \"storage\", \"emitAuto\"],\n  setup(props, { slots }) {\n    const mode = useColorMode(props);\n    const data = reactive({\n      mode,\n      system: mode.system,\n      store: mode.store\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDark = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDark\",\n  props: [\"selector\", \"attribute\", \"valueDark\", \"valueLight\", \"onChanged\", \"storageKey\", \"storage\"],\n  setup(props, { slots }) {\n    const isDark = useDark(props);\n    const data = reactive({\n      isDark,\n      toggleDark: useToggle(isDark)\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDeviceMotion = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDeviceMotion\",\n  setup(props, { slots }) {\n    const data = reactive(useDeviceMotion());\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDeviceOrientation = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDeviceOrientation\",\n  setup(props, { slots }) {\n    const data = reactive(useDeviceOrientation());\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDevicePixelRatio = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDevicePixelRatio\",\n  setup(props, { slots }) {\n    const data = reactive({\n      pixelRatio: useDevicePixelRatio()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDevicesList = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDevicesList\",\n  props: [\"onUpdated\", \"requestPermissions\", \"constraints\"],\n  setup(props, { slots }) {\n    const data = reactive(useDevicesList(props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDocumentVisibility = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDocumentVisibility\",\n  setup(props, { slots }) {\n    const data = reactive({\n      visibility: useDocumentVisibility()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseDraggable = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseDraggable\",\n  props: [\n    \"storageKey\",\n    \"storageType\",\n    \"initialValue\",\n    \"exact\",\n    \"preventDefault\",\n    \"stopPropagation\",\n    \"pointerTypes\",\n    \"as\",\n    \"handle\",\n    \"axis\",\n    \"onStart\",\n    \"onMove\",\n    \"onEnd\",\n    \"disabled\"\n  ],\n  setup(props, { slots }) {\n    const target = ref();\n    const handle = computed(() => {\n      var _a;\n      return (_a = props.handle) != null ? _a : target.value;\n    });\n    const disabled = computed(() => !!props.disabled);\n    const storageValue = props.storageKey && useStorage$1(\n      props.storageKey,\n      toValue(props.initialValue) || { x: 0, y: 0 },\n      isClient$1 ? props.storageType === \"session\" ? sessionStorage : localStorage : void 0\n    );\n    const initialValue = storageValue || props.initialValue || { x: 0, y: 0 };\n    const onEnd = (position, event) => {\n      var _a;\n      (_a = props.onEnd) == null ? void 0 : _a.call(props, position, event);\n      if (!storageValue)\n        return;\n      storageValue.value.x = position.x;\n      storageValue.value.y = position.y;\n    };\n    const data = reactive(useDraggable(target, {\n      ...props,\n      handle,\n      initialValue,\n      onEnd,\n      disabled\n    }));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target, style: `touch-action:none;${data.style}` }, slots.default(data));\n    };\n  }\n});\n\nconst UseElementBounding = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseElementBounding\",\n  props: [\"box\", \"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(useElementBounding(target));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nfunction useElementHover(el, options = {}) {\n  const {\n    delayEnter = 0,\n    delayLeave = 0,\n    window = defaultWindow\n  } = options;\n  const isHovered = ref(false);\n  let timer;\n  const toggle = (entering) => {\n    const delay = entering ? delayEnter : delayLeave;\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n    if (delay)\n      timer = setTimeout(() => isHovered.value = entering, delay);\n    else\n      isHovered.value = entering;\n  };\n  if (!window)\n    return isHovered;\n  useEventListener(el, \"mouseenter\", () => toggle(true), { passive: true });\n  useEventListener(el, \"mouseleave\", () => toggle(false), { passive: true });\n  return isHovered;\n}\n\nconst vElementHover = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\") {\n      const isHovered = useElementHover(el);\n      watch(isHovered, (v) => binding.value(v));\n    }\n  }\n};\n\nconst UseElementSize = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseElementSize\",\n  props: [\"width\", \"height\", \"box\", \"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(useElementSize$1(target, { width: props.width, height: props.height }, { box: props.box }));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nfunction useResizeObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...observerOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"ResizeObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => Array.isArray(target) ? target.map((el) => unrefElement(el)) : [unrefElement(target)]);\n  const stopWatch = watch(\n    targets,\n    (els) => {\n      cleanup();\n      if (isSupported.value && window) {\n        observer = new ResizeObserver(callback);\n        for (const _el of els)\n          _el && observer.observe(_el, observerOptions);\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const stop = () => {\n    cleanup();\n    stopWatch();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop\n  };\n}\n\nfunction useElementSize(target, initialSize = { width: 0, height: 0 }, options = {}) {\n  const { window = defaultWindow, box = \"content-box\" } = options;\n  const isSVG = computed(() => {\n    var _a, _b;\n    return (_b = (_a = unrefElement(target)) == null ? void 0 : _a.namespaceURI) == null ? void 0 : _b.includes(\"svg\");\n  });\n  const width = ref(initialSize.width);\n  const height = ref(initialSize.height);\n  const { stop: stop1 } = useResizeObserver(\n    target,\n    ([entry]) => {\n      const boxSize = box === \"border-box\" ? entry.borderBoxSize : box === \"content-box\" ? entry.contentBoxSize : entry.devicePixelContentBoxSize;\n      if (window && isSVG.value) {\n        const $elem = unrefElement(target);\n        if ($elem) {\n          const rect = $elem.getBoundingClientRect();\n          width.value = rect.width;\n          height.value = rect.height;\n        }\n      } else {\n        if (boxSize) {\n          const formatBoxSize = Array.isArray(boxSize) ? boxSize : [boxSize];\n          width.value = formatBoxSize.reduce((acc, { inlineSize }) => acc + inlineSize, 0);\n          height.value = formatBoxSize.reduce((acc, { blockSize }) => acc + blockSize, 0);\n        } else {\n          width.value = entry.contentRect.width;\n          height.value = entry.contentRect.height;\n        }\n      }\n    },\n    options\n  );\n  tryOnMounted(() => {\n    const ele = unrefElement(target);\n    if (ele) {\n      width.value = \"offsetWidth\" in ele ? ele.offsetWidth : initialSize.width;\n      height.value = \"offsetHeight\" in ele ? ele.offsetHeight : initialSize.height;\n    }\n  });\n  const stop2 = watch(\n    () => unrefElement(target),\n    (ele) => {\n      width.value = ele ? initialSize.width : 0;\n      height.value = ele ? initialSize.height : 0;\n    }\n  );\n  function stop() {\n    stop1();\n    stop2();\n  }\n  return {\n    width,\n    height,\n    stop\n  };\n}\n\nconst vElementSize = {\n  [directiveHooks.mounted](el, binding) {\n    var _a;\n    const handler = typeof binding.value === \"function\" ? binding.value : (_a = binding.value) == null ? void 0 : _a[0];\n    const options = typeof binding.value === \"function\" ? [] : binding.value.slice(1);\n    const { width, height } = useElementSize(el, ...options);\n    watch([width, height], ([width2, height2]) => handler({ width: width2, height: height2 }));\n  }\n};\n\nconst UseElementVisibility = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseElementVisibility\",\n  props: [\"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive({\n      isVisible: useElementVisibility$1(target)\n    });\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nfunction useIntersectionObserver(target, callback, options = {}) {\n  const {\n    root,\n    rootMargin = \"0px\",\n    threshold = 0.1,\n    window = defaultWindow,\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => window && \"IntersectionObserver\" in window);\n  const targets = computed(() => {\n    const _target = toValue(target);\n    return (Array.isArray(_target) ? _target : [_target]).map(unrefElement).filter(notNullish);\n  });\n  let cleanup = noop;\n  const isActive = ref(immediate);\n  const stopWatch = isSupported.value ? watch(\n    () => [targets.value, unrefElement(root), isActive.value],\n    ([targets2, root2]) => {\n      cleanup();\n      if (!isActive.value)\n        return;\n      if (!targets2.length)\n        return;\n      const observer = new IntersectionObserver(\n        callback,\n        {\n          root: unrefElement(root2),\n          rootMargin,\n          threshold\n        }\n      );\n      targets2.forEach((el) => el && observer.observe(el));\n      cleanup = () => {\n        observer.disconnect();\n        cleanup = noop;\n      };\n    },\n    { immediate, flush: \"post\" }\n  ) : noop;\n  const stop = () => {\n    cleanup();\n    stopWatch();\n    isActive.value = false;\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    isActive,\n    pause() {\n      cleanup();\n      isActive.value = false;\n    },\n    resume() {\n      isActive.value = true;\n    },\n    stop\n  };\n}\n\nfunction useElementVisibility(element, options = {}) {\n  const { window = defaultWindow, scrollTarget, threshold = 0 } = options;\n  const elementIsVisible = ref(false);\n  useIntersectionObserver(\n    element,\n    (intersectionObserverEntries) => {\n      let isIntersecting = elementIsVisible.value;\n      let latestTime = 0;\n      for (const entry of intersectionObserverEntries) {\n        if (entry.time >= latestTime) {\n          latestTime = entry.time;\n          isIntersecting = entry.isIntersecting;\n        }\n      }\n      elementIsVisible.value = isIntersecting;\n    },\n    {\n      root: scrollTarget,\n      window,\n      threshold\n    }\n  );\n  return elementIsVisible;\n}\n\nconst vElementVisibility = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\") {\n      const handler = binding.value;\n      const isVisible = useElementVisibility(el);\n      watch(isVisible, (v) => handler(v), { immediate: true });\n    } else {\n      const [handler, options] = binding.value;\n      const isVisible = useElementVisibility(el, options);\n      watch(isVisible, (v) => handler(v), { immediate: true });\n    }\n  }\n};\n\nconst UseEyeDropper = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseEyeDropper\",\n  props: {\n    sRGBHex: String\n  },\n  setup(props, { slots }) {\n    const data = reactive(useEyeDropper());\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseFullscreen = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseFullscreen\",\n  props: [\"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(useFullscreen(target));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nconst UseGeolocation = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseGeolocation\",\n  props: [\"enableHighAccuracy\", \"maximumAge\", \"timeout\", \"navigator\"],\n  setup(props, { slots }) {\n    const data = reactive(useGeolocation(props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseIdle = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseIdle\",\n  props: [\"timeout\", \"events\", \"listenForVisibilityChange\", \"initialState\"],\n  setup(props, { slots }) {\n    const data = reactive(useIdle(props.timeout, props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nfunction useAsyncState(promise, initialState, options) {\n  const {\n    immediate = true,\n    delay = 0,\n    onError = noop,\n    onSuccess = noop,\n    resetOnExecute = true,\n    shallow = true,\n    throwError\n  } = options != null ? options : {};\n  const state = shallow ? shallowRef(initialState) : ref(initialState);\n  const isReady = ref(false);\n  const isLoading = ref(false);\n  const error = shallowRef(void 0);\n  async function execute(delay2 = 0, ...args) {\n    if (resetOnExecute)\n      state.value = initialState;\n    error.value = void 0;\n    isReady.value = false;\n    isLoading.value = true;\n    if (delay2 > 0)\n      await promiseTimeout(delay2);\n    const _promise = typeof promise === \"function\" ? promise(...args) : promise;\n    try {\n      const data = await _promise;\n      state.value = data;\n      isReady.value = true;\n      onSuccess(data);\n    } catch (e) {\n      error.value = e;\n      onError(e);\n      if (throwError)\n        throw e;\n    } finally {\n      isLoading.value = false;\n    }\n    return state.value;\n  }\n  if (immediate)\n    execute(delay);\n  const shell = {\n    state,\n    isReady,\n    isLoading,\n    error,\n    execute\n  };\n  function waitUntilIsLoaded() {\n    return new Promise((resolve, reject) => {\n      until(isLoading).toBe(false).then(() => resolve(shell)).catch(reject);\n    });\n  }\n  return {\n    ...shell,\n    then(onFulfilled, onRejected) {\n      return waitUntilIsLoaded().then(onFulfilled, onRejected);\n    }\n  };\n}\n\nasync function loadImage(options) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const { src, srcset, sizes, class: clazz, loading, crossorigin, referrerPolicy } = options;\n    img.src = src;\n    if (srcset)\n      img.srcset = srcset;\n    if (sizes)\n      img.sizes = sizes;\n    if (clazz)\n      img.className = clazz;\n    if (loading)\n      img.loading = loading;\n    if (crossorigin)\n      img.crossOrigin = crossorigin;\n    if (referrerPolicy)\n      img.referrerPolicy = referrerPolicy;\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n}\nfunction useImage(options, asyncStateOptions = {}) {\n  const state = useAsyncState(\n    () => loadImage(toValue(options)),\n    void 0,\n    {\n      resetOnExecute: true,\n      ...asyncStateOptions\n    }\n  );\n  watch(\n    () => toValue(options),\n    () => state.execute(asyncStateOptions.delay),\n    { deep: true }\n  );\n  return state;\n}\n\nconst UseImage = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseImage\",\n  props: [\n    \"src\",\n    \"srcset\",\n    \"sizes\",\n    \"as\",\n    \"alt\",\n    \"class\",\n    \"loading\",\n    \"crossorigin\",\n    \"referrerPolicy\"\n  ],\n  setup(props, { slots }) {\n    const data = reactive(useImage(props));\n    return () => {\n      if (data.isLoading && slots.loading)\n        return slots.loading(data);\n      else if (data.error && slots.error)\n        return slots.error(data.error);\n      if (slots.default)\n        return slots.default(data);\n      return h(props.as || \"img\", props);\n    };\n  }\n});\n\nconst ARRIVED_STATE_THRESHOLD_PIXELS = 1;\nfunction useScroll(element, options = {}) {\n  const {\n    throttle = 0,\n    idle = 200,\n    onStop = noop,\n    onScroll = noop,\n    offset = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    eventListenerOptions = {\n      capture: false,\n      passive: true\n    },\n    behavior = \"auto\",\n    window = defaultWindow,\n    onError = (e) => {\n      console.error(e);\n    }\n  } = options;\n  const internalX = ref(0);\n  const internalY = ref(0);\n  const x = computed({\n    get() {\n      return internalX.value;\n    },\n    set(x2) {\n      scrollTo(x2, void 0);\n    }\n  });\n  const y = computed({\n    get() {\n      return internalY.value;\n    },\n    set(y2) {\n      scrollTo(void 0, y2);\n    }\n  });\n  function scrollTo(_x, _y) {\n    var _a, _b, _c, _d;\n    if (!window)\n      return;\n    const _element = toValue(element);\n    if (!_element)\n      return;\n    (_c = _element instanceof Document ? window.document.body : _element) == null ? void 0 : _c.scrollTo({\n      top: (_a = toValue(_y)) != null ? _a : y.value,\n      left: (_b = toValue(_x)) != null ? _b : x.value,\n      behavior: toValue(behavior)\n    });\n    const scrollContainer = ((_d = _element == null ? void 0 : _element.document) == null ? void 0 : _d.documentElement) || (_element == null ? void 0 : _element.documentElement) || _element;\n    if (x != null)\n      internalX.value = scrollContainer.scrollLeft;\n    if (y != null)\n      internalY.value = scrollContainer.scrollTop;\n  }\n  const isScrolling = ref(false);\n  const arrivedState = reactive({\n    left: true,\n    right: false,\n    top: true,\n    bottom: false\n  });\n  const directions = reactive({\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  });\n  const onScrollEnd = (e) => {\n    if (!isScrolling.value)\n      return;\n    isScrolling.value = false;\n    directions.left = false;\n    directions.right = false;\n    directions.top = false;\n    directions.bottom = false;\n    onStop(e);\n  };\n  const onScrollEndDebounced = useDebounceFn(onScrollEnd, throttle + idle);\n  const setArrivedState = (target) => {\n    var _a;\n    if (!window)\n      return;\n    const el = ((_a = target == null ? void 0 : target.document) == null ? void 0 : _a.documentElement) || (target == null ? void 0 : target.documentElement) || unrefElement(target);\n    const { display, flexDirection } = getComputedStyle(el);\n    const scrollLeft = el.scrollLeft;\n    directions.left = scrollLeft < internalX.value;\n    directions.right = scrollLeft > internalX.value;\n    const left = Math.abs(scrollLeft) <= (offset.left || 0);\n    const right = Math.abs(scrollLeft) + el.clientWidth >= el.scrollWidth - (offset.right || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"row-reverse\") {\n      arrivedState.left = right;\n      arrivedState.right = left;\n    } else {\n      arrivedState.left = left;\n      arrivedState.right = right;\n    }\n    internalX.value = scrollLeft;\n    let scrollTop = el.scrollTop;\n    if (target === window.document && !scrollTop)\n      scrollTop = window.document.body.scrollTop;\n    directions.top = scrollTop < internalY.value;\n    directions.bottom = scrollTop > internalY.value;\n    const top = Math.abs(scrollTop) <= (offset.top || 0);\n    const bottom = Math.abs(scrollTop) + el.clientHeight >= el.scrollHeight - (offset.bottom || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"column-reverse\") {\n      arrivedState.top = bottom;\n      arrivedState.bottom = top;\n    } else {\n      arrivedState.top = top;\n      arrivedState.bottom = bottom;\n    }\n    internalY.value = scrollTop;\n  };\n  const onScrollHandler = (e) => {\n    var _a;\n    if (!window)\n      return;\n    const eventTarget = (_a = e.target.documentElement) != null ? _a : e.target;\n    setArrivedState(eventTarget);\n    isScrolling.value = true;\n    onScrollEndDebounced(e);\n    onScroll(e);\n  };\n  useEventListener(\n    element,\n    \"scroll\",\n    throttle ? useThrottleFn(onScrollHandler, throttle, true, false) : onScrollHandler,\n    eventListenerOptions\n  );\n  tryOnMounted(() => {\n    try {\n      const _element = toValue(element);\n      if (!_element)\n        return;\n      setArrivedState(_element);\n    } catch (e) {\n      onError(e);\n    }\n  });\n  useEventListener(\n    element,\n    \"scrollend\",\n    onScrollEnd,\n    eventListenerOptions\n  );\n  return {\n    x,\n    y,\n    isScrolling,\n    arrivedState,\n    directions,\n    measure() {\n      const _element = toValue(element);\n      if (window && _element)\n        setArrivedState(_element);\n    }\n  };\n}\n\nfunction resolveElement(el) {\n  if (typeof Window !== \"undefined\" && el instanceof Window)\n    return el.document.documentElement;\n  if (typeof Document !== \"undefined\" && el instanceof Document)\n    return el.documentElement;\n  return el;\n}\n\nfunction useInfiniteScroll(element, onLoadMore, options = {}) {\n  var _a;\n  const {\n    direction = \"bottom\",\n    interval = 100,\n    canLoadMore = () => true\n  } = options;\n  const state = reactive(useScroll(\n    element,\n    {\n      ...options,\n      offset: {\n        [direction]: (_a = options.distance) != null ? _a : 0,\n        ...options.offset\n      }\n    }\n  ));\n  const promise = ref();\n  const isLoading = computed(() => !!promise.value);\n  const observedElement = computed(() => {\n    return resolveElement(toValue(element));\n  });\n  const isElementVisible = useElementVisibility(observedElement);\n  function checkAndLoad() {\n    state.measure();\n    if (!observedElement.value || !isElementVisible.value || !canLoadMore(observedElement.value))\n      return;\n    const { scrollHeight, clientHeight, scrollWidth, clientWidth } = observedElement.value;\n    const isNarrower = direction === \"bottom\" || direction === \"top\" ? scrollHeight <= clientHeight : scrollWidth <= clientWidth;\n    if (state.arrivedState[direction] || isNarrower) {\n      if (!promise.value) {\n        promise.value = Promise.all([\n          onLoadMore(state),\n          new Promise((resolve) => setTimeout(resolve, interval))\n        ]).finally(() => {\n          promise.value = null;\n          nextTick(() => checkAndLoad());\n        });\n      }\n    }\n  }\n  watch(\n    () => [state.arrivedState[direction], isElementVisible.value],\n    checkAndLoad,\n    { immediate: true }\n  );\n  return {\n    isLoading\n  };\n}\n\nconst vInfiniteScroll = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\")\n      useInfiniteScroll(el, binding.value);\n    else\n      useInfiniteScroll(el, ...binding.value);\n  }\n};\n\nconst vIntersectionObserver = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\")\n      useIntersectionObserver(el, binding.value);\n    else\n      useIntersectionObserver(el, ...binding.value);\n  }\n};\n\nconst UseMouse = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseMouse\",\n  props: [\"touch\", \"resetOnTouchEnds\", \"initialValue\"],\n  setup(props, { slots }) {\n    const data = reactive(useMouse(props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseMouseInElement = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseMouseElement\",\n  props: [\"handleOutside\", \"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(useMouseInElement(target, props));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nconst UseMousePressed = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseMousePressed\",\n  props: [\"touch\", \"initialValue\", \"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(useMousePressed({ ...props, target }));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nconst UseNetwork = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseNetwork\",\n  setup(props, { slots }) {\n    const data = reactive(useNetwork());\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseNow = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseNow\",\n  props: [\"interval\"],\n  setup(props, { slots }) {\n    const data = reactive(useNow({ ...props, controls: true }));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseObjectUrl = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseObjectUrl\",\n  props: [\n    \"object\"\n  ],\n  setup(props, { slots }) {\n    const object = toRef(props, \"object\");\n    const url = useObjectUrl(object);\n    return () => {\n      if (slots.default && url.value)\n        return slots.default(url);\n    };\n  }\n});\n\nconst UseOffsetPagination = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseOffsetPagination\",\n  props: [\n    \"total\",\n    \"page\",\n    \"pageSize\",\n    \"onPageChange\",\n    \"onPageSizeChange\",\n    \"onPageCountChange\"\n  ],\n  emits: [\n    \"page-change\",\n    \"page-size-change\",\n    \"page-count-change\"\n  ],\n  setup(props, { slots, emit }) {\n    const data = reactive(useOffsetPagination({\n      ...props,\n      onPageChange(...args) {\n        var _a;\n        (_a = props.onPageChange) == null ? void 0 : _a.call(props, ...args);\n        emit(\"page-change\", ...args);\n      },\n      onPageSizeChange(...args) {\n        var _a;\n        (_a = props.onPageSizeChange) == null ? void 0 : _a.call(props, ...args);\n        emit(\"page-size-change\", ...args);\n      },\n      onPageCountChange(...args) {\n        var _a;\n        (_a = props.onPageCountChange) == null ? void 0 : _a.call(props, ...args);\n        emit(\"page-count-change\", ...args);\n      }\n    }));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseOnline = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseOnline\",\n  setup(props, { slots }) {\n    const data = reactive({\n      isOnline: useOnline()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePageLeave = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePageLeave\",\n  setup(props, { slots }) {\n    const data = reactive({\n      isLeft: usePageLeave()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePointer = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePointer\",\n  props: [\n    \"pointerTypes\",\n    \"initialValue\",\n    \"target\"\n  ],\n  setup(props, { slots }) {\n    const el = ref(null);\n    const data = reactive(usePointer({\n      ...props,\n      target: props.target === \"self\" ? el : defaultWindow\n    }));\n    return () => {\n      if (slots.default)\n        return slots.default(data, { ref: el });\n    };\n  }\n});\n\nconst UsePointerLock = /* #__PURE__ */ defineComponent({\n  name: \"UsePointerLock\",\n  props: [\"as\"],\n  setup(props, { slots }) {\n    const target = ref();\n    const data = reactive(usePointerLock(target));\n    return () => {\n      if (slots.default)\n        return h(props.as || \"div\", { ref: target }, slots.default(data));\n    };\n  }\n});\n\nconst UsePreferredColorScheme = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePreferredColorScheme\",\n  setup(props, { slots }) {\n    const data = reactive({\n      colorScheme: usePreferredColorScheme()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePreferredContrast = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePreferredContrast\",\n  setup(props, { slots }) {\n    const data = reactive({\n      contrast: usePreferredContrast()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePreferredDark = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePreferredDark\",\n  setup(props, { slots }) {\n    const data = reactive({\n      prefersDark: usePreferredDark$1()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePreferredLanguages = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePreferredLanguages\",\n  setup(props, { slots }) {\n    const data = reactive({\n      languages: usePreferredLanguages()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UsePreferredReducedMotion = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UsePreferredReducedMotion\",\n  setup(props, { slots }) {\n    const data = reactive({\n      motion: usePreferredReducedMotion()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nfunction useMutationObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...mutationOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"MutationObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => {\n    const value = toValue(target);\n    const items = (Array.isArray(value) ? value : [value]).map(unrefElement).filter(notNullish);\n    return new Set(items);\n  });\n  const stopWatch = watch(\n    () => targets.value,\n    (targets2) => {\n      cleanup();\n      if (isSupported.value && targets2.size) {\n        observer = new MutationObserver(callback);\n        targets2.forEach((el) => observer.observe(el, mutationOptions));\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const takeRecords = () => {\n    return observer == null ? void 0 : observer.takeRecords();\n  };\n  const stop = () => {\n    cleanup();\n    stopWatch();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop,\n    takeRecords\n  };\n}\n\nfunction useCssVar(prop, target, options = {}) {\n  const { window = defaultWindow, initialValue = \"\", observe = false } = options;\n  const variable = ref(initialValue);\n  const elRef = computed(() => {\n    var _a;\n    return unrefElement(target) || ((_a = window == null ? void 0 : window.document) == null ? void 0 : _a.documentElement);\n  });\n  function updateCssVar() {\n    var _a;\n    const key = toValue(prop);\n    const el = toValue(elRef);\n    if (el && window) {\n      const value = (_a = window.getComputedStyle(el).getPropertyValue(key)) == null ? void 0 : _a.trim();\n      variable.value = value || initialValue;\n    }\n  }\n  if (observe) {\n    useMutationObserver(elRef, updateCssVar, {\n      attributeFilter: [\"style\", \"class\"],\n      window\n    });\n  }\n  watch(\n    [elRef, () => toValue(prop)],\n    updateCssVar,\n    { immediate: true }\n  );\n  watch(\n    variable,\n    (val) => {\n      var _a;\n      if ((_a = elRef.value) == null ? void 0 : _a.style)\n        elRef.value.style.setProperty(toValue(prop), val);\n    }\n  );\n  return variable;\n}\n\nconst topVarName = \"--vueuse-safe-area-top\";\nconst rightVarName = \"--vueuse-safe-area-right\";\nconst bottomVarName = \"--vueuse-safe-area-bottom\";\nconst leftVarName = \"--vueuse-safe-area-left\";\nfunction useScreenSafeArea() {\n  const top = ref(\"\");\n  const right = ref(\"\");\n  const bottom = ref(\"\");\n  const left = ref(\"\");\n  if (isClient) {\n    const topCssVar = useCssVar(topVarName);\n    const rightCssVar = useCssVar(rightVarName);\n    const bottomCssVar = useCssVar(bottomVarName);\n    const leftCssVar = useCssVar(leftVarName);\n    topCssVar.value = \"env(safe-area-inset-top, 0px)\";\n    rightCssVar.value = \"env(safe-area-inset-right, 0px)\";\n    bottomCssVar.value = \"env(safe-area-inset-bottom, 0px)\";\n    leftCssVar.value = \"env(safe-area-inset-left, 0px)\";\n    update();\n    useEventListener(\"resize\", useDebounceFn(update));\n  }\n  function update() {\n    top.value = getValue(topVarName);\n    right.value = getValue(rightVarName);\n    bottom.value = getValue(bottomVarName);\n    left.value = getValue(leftVarName);\n  }\n  return {\n    top,\n    right,\n    bottom,\n    left,\n    update\n  };\n}\nfunction getValue(position) {\n  return getComputedStyle(document.documentElement).getPropertyValue(position);\n}\n\nconst UseScreenSafeArea = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseScreenSafeArea\",\n  props: {\n    top: Boolean,\n    right: Boolean,\n    bottom: Boolean,\n    left: Boolean\n  },\n  setup(props, { slots }) {\n    const {\n      top,\n      right,\n      bottom,\n      left\n    } = useScreenSafeArea();\n    return () => {\n      if (slots.default) {\n        return h(\"div\", {\n          style: {\n            paddingTop: props.top ? top.value : \"\",\n            paddingRight: props.right ? right.value : \"\",\n            paddingBottom: props.bottom ? bottom.value : \"\",\n            paddingLeft: props.left ? left.value : \"\",\n            boxSizing: \"border-box\",\n            maxHeight: \"100vh\",\n            maxWidth: \"100vw\",\n            overflow: \"auto\"\n          }\n        }, slots.default());\n      }\n    };\n  }\n});\n\nconst vScroll = {\n  [directiveHooks.mounted](el, binding) {\n    if (typeof binding.value === \"function\") {\n      const handler = binding.value;\n      const state = useScroll(el, {\n        onScroll() {\n          handler(state);\n        },\n        onStop() {\n          handler(state);\n        }\n      });\n    } else {\n      const [handler, options] = binding.value;\n      const state = useScroll(el, {\n        ...options,\n        onScroll(e) {\n          var _a;\n          (_a = options.onScroll) == null ? void 0 : _a.call(options, e);\n          handler(state);\n        },\n        onStop(e) {\n          var _a;\n          (_a = options.onStop) == null ? void 0 : _a.call(options, e);\n          handler(state);\n        }\n      });\n    }\n  }\n};\n\nfunction checkOverflowScroll(ele) {\n  const style = window.getComputedStyle(ele);\n  if (style.overflowX === \"scroll\" || style.overflowY === \"scroll\" || style.overflowX === \"auto\" && ele.clientWidth < ele.scrollWidth || style.overflowY === \"auto\" && ele.clientHeight < ele.scrollHeight) {\n    return true;\n  } else {\n    const parent = ele.parentNode;\n    if (!parent || parent.tagName === \"BODY\")\n      return false;\n    return checkOverflowScroll(parent);\n  }\n}\nfunction preventDefault(rawEvent) {\n  const e = rawEvent || window.event;\n  const _target = e.target;\n  if (checkOverflowScroll(_target))\n    return false;\n  if (e.touches.length > 1)\n    return true;\n  if (e.preventDefault)\n    e.preventDefault();\n  return false;\n}\nconst elInitialOverflow = /* @__PURE__ */ new WeakMap();\nfunction useScrollLock(element, initialState = false) {\n  const isLocked = ref(initialState);\n  let stopTouchMoveListener = null;\n  let initialOverflow = \"\";\n  watch(toRef(element), (el) => {\n    const target = resolveElement(toValue(el));\n    if (target) {\n      const ele = target;\n      if (!elInitialOverflow.get(ele))\n        elInitialOverflow.set(ele, ele.style.overflow);\n      if (ele.style.overflow !== \"hidden\")\n        initialOverflow = ele.style.overflow;\n      if (ele.style.overflow === \"hidden\")\n        return isLocked.value = true;\n      if (isLocked.value)\n        return ele.style.overflow = \"hidden\";\n    }\n  }, {\n    immediate: true\n  });\n  const lock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || isLocked.value)\n      return;\n    if (isIOS) {\n      stopTouchMoveListener = useEventListener(\n        el,\n        \"touchmove\",\n        (e) => {\n          preventDefault(e);\n        },\n        { passive: false }\n      );\n    }\n    el.style.overflow = \"hidden\";\n    isLocked.value = true;\n  };\n  const unlock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || !isLocked.value)\n      return;\n    isIOS && (stopTouchMoveListener == null ? void 0 : stopTouchMoveListener());\n    el.style.overflow = initialOverflow;\n    elInitialOverflow.delete(el);\n    isLocked.value = false;\n  };\n  tryOnScopeDispose(unlock);\n  return computed({\n    get() {\n      return isLocked.value;\n    },\n    set(v) {\n      if (v)\n        lock();\n      else unlock();\n    }\n  });\n}\n\nfunction onScrollLock() {\n  let isMounted = false;\n  const state = ref(false);\n  return (el, binding) => {\n    state.value = binding.value;\n    if (isMounted)\n      return;\n    isMounted = true;\n    const isLocked = useScrollLock(el, binding.value);\n    watch(state, (v) => isLocked.value = v);\n  };\n}\nconst vScrollLock = onScrollLock();\n\nconst UseTimeAgo = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseTimeAgo\",\n  props: [\"time\", \"updateInterval\", \"max\", \"fullDateFormatter\", \"messages\", \"showSecond\"],\n  setup(props, { slots }) {\n    const data = reactive(useTimeAgo(() => props.time, { ...props, controls: true }));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseTimestamp = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseTimestamp\",\n  props: [\"immediate\", \"interval\", \"offset\"],\n  setup(props, { slots }) {\n    const data = reactive(useTimestamp({ ...props, controls: true }));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseVirtualList = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseVirtualList\",\n  props: [\n    \"list\",\n    \"options\",\n    \"height\"\n  ],\n  setup(props, { slots, expose }) {\n    const { list: listRef } = toRefs(props);\n    const { list, containerProps, wrapperProps, scrollTo } = useVirtualList(listRef, props.options);\n    expose({ scrollTo });\n    if (containerProps.style && typeof containerProps.style === \"object\" && !Array.isArray(containerProps.style))\n      containerProps.style.height = props.height || \"300px\";\n    return () => h(\"div\", { ...containerProps }, [\n      h(\"div\", { ...wrapperProps.value }, list.value.map((item) => h(\"div\", { style: { overflow: \"hidden\", height: item.height } }, slots.default ? slots.default(item) : \"Please set content!\")))\n    ]);\n  }\n});\n\nconst UseWindowFocus = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseWindowFocus\",\n  setup(props, { slots }) {\n    const data = reactive({\n      focused: useWindowFocus()\n    });\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nconst UseWindowSize = /* @__PURE__ */ /* #__PURE__ */ defineComponent({\n  name: \"UseWindowSize\",\n  props: [\"initialWidth\", \"initialHeight\"],\n  setup(props, { slots }) {\n    const data = reactive(useWindowSize(props));\n    return () => {\n      if (slots.default)\n        return slots.default(data);\n    };\n  }\n});\n\nexport { OnClickOutside, OnLongPress, UseActiveElement, UseBattery, UseBrowserLocation, UseClipboard, UseColorMode, UseDark, UseDeviceMotion, UseDeviceOrientation, UseDevicePixelRatio, UseDevicesList, UseDocumentVisibility, UseDraggable, UseElementBounding, UseElementSize, UseElementVisibility, UseEyeDropper, UseFullscreen, UseGeolocation, UseIdle, UseImage, UseMouse, UseMouseInElement, UseMousePressed, UseNetwork, UseNow, UseObjectUrl, UseOffsetPagination, UseOnline, UsePageLeave, UsePointer, UsePointerLock, UsePreferredColorScheme, UsePreferredContrast, UsePreferredDark, UsePreferredLanguages, UsePreferredReducedMotion, UseScreenSafeArea, UseTimeAgo, UseTimestamp, UseVirtualList, UseWindowFocus, UseWindowSize, vOnClickOutside as VOnClickOutside, vOnLongPress as VOnLongPress, vElementHover, vElementSize, vElementVisibility, vInfiniteScroll, vIntersectionObserver, vOnClickOutside, vOnKeyStroke, vOnLongPress, vScroll, vScrollLock };\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction processOptions(value) {\n  var options;\n\n  if (typeof value === 'function') {\n    // Simple options (callback-only)\n    options = {\n      callback: value\n    };\n  } else {\n    // Options object\n    options = value;\n  }\n\n  return options;\n}\nfunction throttle(callback, delay) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var timeout;\n  var lastState;\n  var currentArgs;\n\n  var throttled = function throttled(state) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    currentArgs = args;\n    if (timeout && state === lastState) return;\n    var leading = options.leading;\n\n    if (typeof leading === 'function') {\n      leading = leading(state, lastState);\n    }\n\n    if ((!timeout || state !== lastState) && leading) {\n      callback.apply(void 0, [state].concat(_toConsumableArray(currentArgs)));\n    }\n\n    lastState = state;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      callback.apply(void 0, [state].concat(_toConsumableArray(currentArgs)));\n      timeout = 0;\n    }, delay);\n  };\n\n  throttled._clear = function () {\n    clearTimeout(timeout);\n    timeout = null;\n  };\n\n  return throttled;\n}\nfunction deepEqual(val1, val2) {\n  if (val1 === val2) return true;\n\n  if (_typeof(val1) === 'object') {\n    for (var key in val1) {\n      if (!deepEqual(val1[key], val2[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nvar VisibilityState =\n/*#__PURE__*/\nfunction () {\n  function VisibilityState(el, options, vnode) {\n    _classCallCheck(this, VisibilityState);\n\n    this.el = el;\n    this.observer = null;\n    this.frozen = false;\n    this.createObserver(options, vnode);\n  }\n\n  _createClass(VisibilityState, [{\n    key: \"createObserver\",\n    value: function createObserver(options, vnode) {\n      var _this = this;\n\n      if (this.observer) {\n        this.destroyObserver();\n      }\n\n      if (this.frozen) return;\n      this.options = processOptions(options);\n\n      this.callback = function (result, entry) {\n        _this.options.callback(result, entry);\n\n        if (result && _this.options.once) {\n          _this.frozen = true;\n\n          _this.destroyObserver();\n        }\n      }; // Throttle\n\n\n      if (this.callback && this.options.throttle) {\n        var _ref = this.options.throttleOptions || {},\n            _leading = _ref.leading;\n\n        this.callback = throttle(this.callback, this.options.throttle, {\n          leading: function leading(state) {\n            return _leading === 'both' || _leading === 'visible' && state || _leading === 'hidden' && !state;\n          }\n        });\n      }\n\n      this.oldResult = undefined;\n      this.observer = new IntersectionObserver(function (entries) {\n        var entry = entries[0];\n\n        if (entries.length > 1) {\n          var intersectingEntry = entries.find(function (e) {\n            return e.isIntersecting;\n          });\n\n          if (intersectingEntry) {\n            entry = intersectingEntry;\n          }\n        }\n\n        if (_this.callback) {\n          // Use isIntersecting if possible because browsers can report isIntersecting as true, but intersectionRatio as 0, when something very slowly enters the viewport.\n          var result = entry.isIntersecting && entry.intersectionRatio >= _this.threshold;\n          if (result === _this.oldResult) return;\n          _this.oldResult = result;\n\n          _this.callback(result, entry);\n        }\n      }, this.options.intersection); // Wait for the element to be in document\n\n      vnode.context.$nextTick(function () {\n        if (_this.observer) {\n          _this.observer.observe(_this.el);\n        }\n      });\n    }\n  }, {\n    key: \"destroyObserver\",\n    value: function destroyObserver() {\n      if (this.observer) {\n        this.observer.disconnect();\n        this.observer = null;\n      } // Cancel throttled call\n\n\n      if (this.callback && this.callback._clear) {\n        this.callback._clear();\n\n        this.callback = null;\n      }\n    }\n  }, {\n    key: \"threshold\",\n    get: function get() {\n      return this.options.intersection && typeof this.options.intersection.threshold === 'number' ? this.options.intersection.threshold : 0;\n    }\n  }]);\n\n  return VisibilityState;\n}();\n\nfunction bind(el, _ref2, vnode) {\n  var value = _ref2.value;\n  if (!value) return;\n\n  if (typeof IntersectionObserver === 'undefined') {\n    console.warn('[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill');\n  } else {\n    var state = new VisibilityState(el, value, vnode);\n    el._vue_visibilityState = state;\n  }\n}\n\nfunction update(el, _ref3, vnode) {\n  var value = _ref3.value,\n      oldValue = _ref3.oldValue;\n  if (deepEqual(value, oldValue)) return;\n  var state = el._vue_visibilityState;\n\n  if (!value) {\n    unbind(el);\n    return;\n  }\n\n  if (state) {\n    state.createObserver(value, vnode);\n  } else {\n    bind(el, {\n      value: value\n    }, vnode);\n  }\n}\n\nfunction unbind(el) {\n  var state = el._vue_visibilityState;\n\n  if (state) {\n    state.destroyObserver();\n    delete el._vue_visibilityState;\n  }\n}\n\nvar ObserveVisibility = {\n  bind: bind,\n  update: update,\n  unbind: unbind\n};\n\nfunction install(Vue) {\n  Vue.directive('observe-visibility', ObserveVisibility);\n  /* -- Add more components here -- */\n}\n/* -- Plugin definition & Auto-install -- */\n\n/* You shouldn't have to modify the code below */\n// Plugin\n\nvar plugin = {\n  // eslint-disable-next-line no-undef\n  version: \"1.0.0\",\n  install: install\n};\n\nvar GlobalVue = null;\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\nexport default plugin;\nexport { ObserveVisibility, install };\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : true\"\n        :aria-label=\"title\"\n        class=\"material-design-icon message-reply-text-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M18,8H6V6H18V8M18,11H6V9H18V11M18,14H6V12H18V14M22,4A2,2 0 0,0 20,2H4A2,2 0 0,0 2,4V16A2,2 0 0,0 4,18H18L22,22V4Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"MessageReplyTextIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","import mod from \"-!../vue-loader/lib/index.js??vue-loader-options!./MessageReplyText.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../vue-loader/lib/index.js??vue-loader-options!./MessageReplyText.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageReplyText.vue?vue&type=template&id=5b37a4cf\"\nimport script from \"./MessageReplyText.vue?vue&type=script&lang=js\"\nexport * from \"./MessageReplyText.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',_vm._b({staticClass:\"material-design-icon message-reply-text-icon\",attrs:{\"aria-hidden\":_vm.title ? null : true,\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},'span',_vm.$attrs,false),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M18,8H6V6H18V8M18,11H6V9H18V11M18,14H6V12H18V14M22,4A2,2 0 0,0 20,2H4A2,2 0 0,0 2,4V16A2,2 0 0,0 4,18H18L22,22V4Z\"}},[(_vm.title)?_c('title',[_vm._v(_vm._s(_vm.title))]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : true\"\n        :aria-label=\"title\"\n        class=\"material-design-icon refresh-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"RefreshIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","import mod from \"-!../vue-loader/lib/index.js??vue-loader-options!./Refresh.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../vue-loader/lib/index.js??vue-loader-options!./Refresh.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Refresh.vue?vue&type=template&id=7301d745\"\nimport script from \"./Refresh.vue?vue&type=script&lang=js\"\nexport * from \"./Refresh.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',_vm._b({staticClass:\"material-design-icon refresh-icon\",attrs:{\"aria-hidden\":_vm.title ? null : true,\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},'span',_vm.$attrs,false),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z\"}},[(_vm.title)?_c('title',[_vm._v(_vm._s(_vm.title))]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const MAX_PATTERN_LENGTH = 1024 * 64;\nexport const assertValidPattern = (pattern) => {\n    if (typeof pattern !== 'string') {\n        throw new TypeError('invalid pattern');\n    }\n    if (pattern.length > MAX_PATTERN_LENGTH) {\n        throw new TypeError('pattern is too long');\n    }\n};\n//# sourceMappingURL=assert-valid-pattern.js.map","// translate the various posix character classes into unicode properties\n// this works across all unicode locales\n// { <posix class>: [<translation>, /u flag required, negated]\nconst posixClasses = {\n    '[:alnum:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}', true],\n    '[:alpha:]': ['\\\\p{L}\\\\p{Nl}', true],\n    '[:ascii:]': ['\\\\x' + '00-\\\\x' + '7f', false],\n    '[:blank:]': ['\\\\p{Zs}\\\\t', true],\n    '[:cntrl:]': ['\\\\p{Cc}', true],\n    '[:digit:]': ['\\\\p{Nd}', true],\n    '[:graph:]': ['\\\\p{Z}\\\\p{C}', true, true],\n    '[:lower:]': ['\\\\p{Ll}', true],\n    '[:print:]': ['\\\\p{C}', true],\n    '[:punct:]': ['\\\\p{P}', true],\n    '[:space:]': ['\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f', true],\n    '[:upper:]': ['\\\\p{Lu}', true],\n    '[:word:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}', true],\n    '[:xdigit:]': ['A-Fa-f0-9', false],\n};\n// only need to escape a few things inside of brace expressions\n// escapes: [ \\ ] -\nconst braceEscape = (s) => s.replace(/[[\\]\\\\-]/g, '\\\\$&');\n// escape all regexp magic characters\nconst regexpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// everything has already been escaped, we just have to join\nconst rangesToString = (ranges) => ranges.join('');\n// takes a glob string at a posix brace expression, and returns\n// an equivalent regular expression source, and boolean indicating\n// whether the /u flag needs to be applied, and the number of chars\n// consumed to parse the character class.\n// This also removes out of order ranges, and returns ($.) if the\n// entire class just no good.\nexport const parseClass = (glob, position) => {\n    const pos = position;\n    /* c8 ignore start */\n    if (glob.charAt(pos) !== '[') {\n        throw new Error('not in a brace expression');\n    }\n    /* c8 ignore stop */\n    const ranges = [];\n    const negs = [];\n    let i = pos + 1;\n    let sawStart = false;\n    let uflag = false;\n    let escaping = false;\n    let negate = false;\n    let endPos = pos;\n    let rangeStart = '';\n    WHILE: while (i < glob.length) {\n        const c = glob.charAt(i);\n        if ((c === '!' || c === '^') && i === pos + 1) {\n            negate = true;\n            i++;\n            continue;\n        }\n        if (c === ']' && sawStart && !escaping) {\n            endPos = i + 1;\n            break;\n        }\n        sawStart = true;\n        if (c === '\\\\') {\n            if (!escaping) {\n                escaping = true;\n                i++;\n                continue;\n            }\n            // escaped \\ char, fall through and treat like normal char\n        }\n        if (c === '[' && !escaping) {\n            // either a posix class, a collation equivalent, or just a [\n            for (const [cls, [unip, u, neg]] of Object.entries(posixClasses)) {\n                if (glob.startsWith(cls, i)) {\n                    // invalid, [a-[] is fine, but not [a-[:alpha]]\n                    if (rangeStart) {\n                        return ['$.', false, glob.length - pos, true];\n                    }\n                    i += cls.length;\n                    if (neg)\n                        negs.push(unip);\n                    else\n                        ranges.push(unip);\n                    uflag = uflag || u;\n                    continue WHILE;\n                }\n            }\n        }\n        // now it's just a normal character, effectively\n        escaping = false;\n        if (rangeStart) {\n            // throw this range away if it's not valid, but others\n            // can still match.\n            if (c > rangeStart) {\n                ranges.push(braceEscape(rangeStart) + '-' + braceEscape(c));\n            }\n            else if (c === rangeStart) {\n                ranges.push(braceEscape(c));\n            }\n            rangeStart = '';\n            i++;\n            continue;\n        }\n        // now might be the start of a range.\n        // can be either c-d or c-] or c<more...>] or c] at this point\n        if (glob.startsWith('-]', i + 1)) {\n            ranges.push(braceEscape(c + '-'));\n            i += 2;\n            continue;\n        }\n        if (glob.startsWith('-', i + 1)) {\n            rangeStart = c;\n            i += 2;\n            continue;\n        }\n        // not the start of a range, just a single character\n        ranges.push(braceEscape(c));\n        i++;\n    }\n    if (endPos < i) {\n        // didn't see the end of the class, not a valid class,\n        // but might still be valid as a literal match.\n        return ['', false, 0, false];\n    }\n    // if we got no ranges and no negates, then we have a range that\n    // cannot possibly match anything, and that poisons the whole glob\n    if (!ranges.length && !negs.length) {\n        return ['$.', false, glob.length - pos, true];\n    }\n    // if we got one positive range, and it's a single character, then that's\n    // not actually a magic pattern, it's just that one literal character.\n    // we should not treat that as \"magic\", we should just return the literal\n    // character. [_] is a perfectly valid way to escape glob magic chars.\n    if (negs.length === 0 &&\n        ranges.length === 1 &&\n        /^\\\\?.$/.test(ranges[0]) &&\n        !negate) {\n        const r = ranges[0].length === 2 ? ranges[0].slice(-1) : ranges[0];\n        return [regexpEscape(r), false, endPos - pos, false];\n    }\n    const sranges = '[' + (negate ? '^' : '') + rangesToString(ranges) + ']';\n    const snegs = '[' + (negate ? '' : '^') + rangesToString(negs) + ']';\n    const comb = ranges.length && negs.length\n        ? '(' + sranges + '|' + snegs + ')'\n        : ranges.length\n            ? sranges\n            : snegs;\n    return [comb, uflag, endPos - pos, true];\n};\n//# sourceMappingURL=brace-expressions.js.map","/**\n * Un-escape a string that has been escaped with {@link escape}.\n *\n * If the {@link windowsPathsNoEscape} option is used, then square-brace\n * escapes are removed, but not backslash escapes.  For example, it will turn\n * the string `'[*]'` into `*`, but it will not turn `'\\\\*'` into `'*'`,\n * becuase `\\` is a path separator in `windowsPathsNoEscape` mode.\n *\n * When `windowsPathsNoEscape` is not set, then both brace escapes and\n * backslash escapes are removed.\n *\n * Slashes (and backslashes in `windowsPathsNoEscape` mode) cannot be escaped\n * or unescaped.\n */\nexport const unescape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    return windowsPathsNoEscape\n        ? s.replace(/\\[([^\\/\\\\])\\]/g, '$1')\n        : s.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g, '$1$2').replace(/\\\\([^\\/])/g, '$1');\n};\n//# sourceMappingURL=unescape.js.map","// parse a single path portion\nimport { parseClass } from './brace-expressions.js';\nimport { unescape } from './unescape.js';\nconst types = new Set(['!', '?', '+', '*', '@']);\nconst isExtglobType = (c) => types.has(c);\n// Patterns that get prepended to bind to the start of either the\n// entire string, or just a single path portion, to prevent dots\n// and/or traversal patterns, when needed.\n// Exts don't need the ^ or / bit, because the root binds that already.\nconst startNoTraversal = '(?!(?:^|/)\\\\.\\\\.?(?:$|/))';\nconst startNoDot = '(?!\\\\.)';\n// characters that indicate a start of pattern needs the \"no dots\" bit,\n// because a dot *might* be matched. ( is not in the list, because in\n// the case of a child extglob, it will handle the prevention itself.\nconst addPatternStart = new Set(['[', '.']);\n// cases where traversal is A-OK, no dot prevention needed\nconst justDots = new Set(['..', '.']);\nconst reSpecials = new Set('().*{}+?[]^$\\\\!');\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// any single thing other than /\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// use + when we need to ensure that *something* matches, because the * is\n// the only thing in the path portion.\nconst starNoEmpty = qmark + '+?';\n// remove the \\ chars that we added if we end up doing a nonmagic compare\n// const deslash = (s: string) => s.replace(/\\\\(.)/g, '$1')\nexport class AST {\n    type;\n    #root;\n    #hasMagic;\n    #uflag = false;\n    #parts = [];\n    #parent;\n    #parentIndex;\n    #negs;\n    #filledNegs = false;\n    #options;\n    #toString;\n    // set to true if it's an extglob with no children\n    // (which really means one child of '')\n    #emptyExt = false;\n    constructor(type, parent, options = {}) {\n        this.type = type;\n        // extglobs are inherently magical\n        if (type)\n            this.#hasMagic = true;\n        this.#parent = parent;\n        this.#root = this.#parent ? this.#parent.#root : this;\n        this.#options = this.#root === this ? options : this.#root.#options;\n        this.#negs = this.#root === this ? [] : this.#root.#negs;\n        if (type === '!' && !this.#root.#filledNegs)\n            this.#negs.push(this);\n        this.#parentIndex = this.#parent ? this.#parent.#parts.length : 0;\n    }\n    get hasMagic() {\n        /* c8 ignore start */\n        if (this.#hasMagic !== undefined)\n            return this.#hasMagic;\n        /* c8 ignore stop */\n        for (const p of this.#parts) {\n            if (typeof p === 'string')\n                continue;\n            if (p.type || p.hasMagic)\n                return (this.#hasMagic = true);\n        }\n        // note: will be undefined until we generate the regexp src and find out\n        return this.#hasMagic;\n    }\n    // reconstructs the pattern\n    toString() {\n        if (this.#toString !== undefined)\n            return this.#toString;\n        if (!this.type) {\n            return (this.#toString = this.#parts.map(p => String(p)).join(''));\n        }\n        else {\n            return (this.#toString =\n                this.type + '(' + this.#parts.map(p => String(p)).join('|') + ')');\n        }\n    }\n    #fillNegs() {\n        /* c8 ignore start */\n        if (this !== this.#root)\n            throw new Error('should only call on root');\n        if (this.#filledNegs)\n            return this;\n        /* c8 ignore stop */\n        // call toString() once to fill this out\n        this.toString();\n        this.#filledNegs = true;\n        let n;\n        while ((n = this.#negs.pop())) {\n            if (n.type !== '!')\n                continue;\n            // walk up the tree, appending everthing that comes AFTER parentIndex\n            let p = n;\n            let pp = p.#parent;\n            while (pp) {\n                for (let i = p.#parentIndex + 1; !pp.type && i < pp.#parts.length; i++) {\n                    for (const part of n.#parts) {\n                        /* c8 ignore start */\n                        if (typeof part === 'string') {\n                            throw new Error('string part in extglob AST??');\n                        }\n                        /* c8 ignore stop */\n                        part.copyIn(pp.#parts[i]);\n                    }\n                }\n                p = pp;\n                pp = p.#parent;\n            }\n        }\n        return this;\n    }\n    push(...parts) {\n        for (const p of parts) {\n            if (p === '')\n                continue;\n            /* c8 ignore start */\n            if (typeof p !== 'string' && !(p instanceof AST && p.#parent === this)) {\n                throw new Error('invalid part: ' + p);\n            }\n            /* c8 ignore stop */\n            this.#parts.push(p);\n        }\n    }\n    toJSON() {\n        const ret = this.type === null\n            ? this.#parts.slice().map(p => (typeof p === 'string' ? p : p.toJSON()))\n            : [this.type, ...this.#parts.map(p => p.toJSON())];\n        if (this.isStart() && !this.type)\n            ret.unshift([]);\n        if (this.isEnd() &&\n            (this === this.#root ||\n                (this.#root.#filledNegs && this.#parent?.type === '!'))) {\n            ret.push({});\n        }\n        return ret;\n    }\n    isStart() {\n        if (this.#root === this)\n            return true;\n        // if (this.type) return !!this.#parent?.isStart()\n        if (!this.#parent?.isStart())\n            return false;\n        if (this.#parentIndex === 0)\n            return true;\n        // if everything AHEAD of this is a negation, then it's still the \"start\"\n        const p = this.#parent;\n        for (let i = 0; i < this.#parentIndex; i++) {\n            const pp = p.#parts[i];\n            if (!(pp instanceof AST && pp.type === '!')) {\n                return false;\n            }\n        }\n        return true;\n    }\n    isEnd() {\n        if (this.#root === this)\n            return true;\n        if (this.#parent?.type === '!')\n            return true;\n        if (!this.#parent?.isEnd())\n            return false;\n        if (!this.type)\n            return this.#parent?.isEnd();\n        // if not root, it'll always have a parent\n        /* c8 ignore start */\n        const pl = this.#parent ? this.#parent.#parts.length : 0;\n        /* c8 ignore stop */\n        return this.#parentIndex === pl - 1;\n    }\n    copyIn(part) {\n        if (typeof part === 'string')\n            this.push(part);\n        else\n            this.push(part.clone(this));\n    }\n    clone(parent) {\n        const c = new AST(this.type, parent);\n        for (const p of this.#parts) {\n            c.copyIn(p);\n        }\n        return c;\n    }\n    static #parseAST(str, ast, pos, opt) {\n        let escaping = false;\n        let inBrace = false;\n        let braceStart = -1;\n        let braceNeg = false;\n        if (ast.type === null) {\n            // outside of a extglob, append until we find a start\n            let i = pos;\n            let acc = '';\n            while (i < str.length) {\n                const c = str.charAt(i++);\n                // still accumulate escapes at this point, but we do ignore\n                // starts that are escaped\n                if (escaping || c === '\\\\') {\n                    escaping = !escaping;\n                    acc += c;\n                    continue;\n                }\n                if (inBrace) {\n                    if (i === braceStart + 1) {\n                        if (c === '^' || c === '!') {\n                            braceNeg = true;\n                        }\n                    }\n                    else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                        inBrace = false;\n                    }\n                    acc += c;\n                    continue;\n                }\n                else if (c === '[') {\n                    inBrace = true;\n                    braceStart = i;\n                    braceNeg = false;\n                    acc += c;\n                    continue;\n                }\n                if (!opt.noext && isExtglobType(c) && str.charAt(i) === '(') {\n                    ast.push(acc);\n                    acc = '';\n                    const ext = new AST(c, ast);\n                    i = AST.#parseAST(str, ext, i, opt);\n                    ast.push(ext);\n                    continue;\n                }\n                acc += c;\n            }\n            ast.push(acc);\n            return i;\n        }\n        // some kind of extglob, pos is at the (\n        // find the next | or )\n        let i = pos + 1;\n        let part = new AST(null, ast);\n        const parts = [];\n        let acc = '';\n        while (i < str.length) {\n            const c = str.charAt(i++);\n            // still accumulate escapes at this point, but we do ignore\n            // starts that are escaped\n            if (escaping || c === '\\\\') {\n                escaping = !escaping;\n                acc += c;\n                continue;\n            }\n            if (inBrace) {\n                if (i === braceStart + 1) {\n                    if (c === '^' || c === '!') {\n                        braceNeg = true;\n                    }\n                }\n                else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                    inBrace = false;\n                }\n                acc += c;\n                continue;\n            }\n            else if (c === '[') {\n                inBrace = true;\n                braceStart = i;\n                braceNeg = false;\n                acc += c;\n                continue;\n            }\n            if (isExtglobType(c) && str.charAt(i) === '(') {\n                part.push(acc);\n                acc = '';\n                const ext = new AST(c, part);\n                part.push(ext);\n                i = AST.#parseAST(str, ext, i, opt);\n                continue;\n            }\n            if (c === '|') {\n                part.push(acc);\n                acc = '';\n                parts.push(part);\n                part = new AST(null, ast);\n                continue;\n            }\n            if (c === ')') {\n                if (acc === '' && ast.#parts.length === 0) {\n                    ast.#emptyExt = true;\n                }\n                part.push(acc);\n                acc = '';\n                ast.push(...parts, part);\n                return i;\n            }\n            acc += c;\n        }\n        // unfinished extglob\n        // if we got here, it was a malformed extglob! not an extglob, but\n        // maybe something else in there.\n        ast.type = null;\n        ast.#hasMagic = undefined;\n        ast.#parts = [str.substring(pos - 1)];\n        return i;\n    }\n    static fromGlob(pattern, options = {}) {\n        const ast = new AST(null, undefined, options);\n        AST.#parseAST(pattern, ast, 0, options);\n        return ast;\n    }\n    // returns the regular expression if there's magic, or the unescaped\n    // string if not.\n    toMMPattern() {\n        // should only be called on root\n        /* c8 ignore start */\n        if (this !== this.#root)\n            return this.#root.toMMPattern();\n        /* c8 ignore stop */\n        const glob = this.toString();\n        const [re, body, hasMagic, uflag] = this.toRegExpSource();\n        // if we're in nocase mode, and not nocaseMagicOnly, then we do\n        // still need a regular expression if we have to case-insensitively\n        // match capital/lowercase characters.\n        const anyMagic = hasMagic ||\n            this.#hasMagic ||\n            (this.#options.nocase &&\n                !this.#options.nocaseMagicOnly &&\n                glob.toUpperCase() !== glob.toLowerCase());\n        if (!anyMagic) {\n            return body;\n        }\n        const flags = (this.#options.nocase ? 'i' : '') + (uflag ? 'u' : '');\n        return Object.assign(new RegExp(`^${re}$`, flags), {\n            _src: re,\n            _glob: glob,\n        });\n    }\n    get options() {\n        return this.#options;\n    }\n    // returns the string match, the regexp source, whether there's magic\n    // in the regexp (so a regular expression is required) and whether or\n    // not the uflag is needed for the regular expression (for posix classes)\n    // TODO: instead of injecting the start/end at this point, just return\n    // the BODY of the regexp, along with the start/end portions suitable\n    // for binding the start/end in either a joined full-path makeRe context\n    // (where we bind to (^|/), or a standalone matchPart context (where\n    // we bind to ^, and not /).  Otherwise slashes get duped!\n    //\n    // In part-matching mode, the start is:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: ^(?!\\.\\.?$)\n    // - if dots allowed or not possible: ^\n    // - if dots possible and not allowed: ^(?!\\.)\n    // end is:\n    // - if not isEnd(): nothing\n    // - else: $\n    //\n    // In full-path matching mode, we put the slash at the START of the\n    // pattern, so start is:\n    // - if first pattern: same as part-matching mode\n    // - if not isStart(): nothing\n    // - if traversal possible, but not allowed: /(?!\\.\\.?(?:$|/))\n    // - if dots allowed or not possible: /\n    // - if dots possible and not allowed: /(?!\\.)\n    // end is:\n    // - if last pattern, same as part-matching mode\n    // - else nothing\n    //\n    // Always put the (?:$|/) on negated tails, though, because that has to be\n    // there to bind the end of the negated pattern portion, and it's easier to\n    // just stick it in now rather than try to inject it later in the middle of\n    // the pattern.\n    //\n    // We can just always return the same end, and leave it up to the caller\n    // to know whether it's going to be used joined or in parts.\n    // And, if the start is adjusted slightly, can do the same there:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: (?:/|^)(?!\\.\\.?$)\n    // - if dots allowed or not possible: (?:/|^)\n    // - if dots possible and not allowed: (?:/|^)(?!\\.)\n    //\n    // But it's better to have a simpler binding without a conditional, for\n    // performance, so probably better to return both start options.\n    //\n    // Then the caller just ignores the end if it's not the first pattern,\n    // and the start always gets applied.\n    //\n    // But that's always going to be $ if it's the ending pattern, or nothing,\n    // so the caller can just attach $ at the end of the pattern when building.\n    //\n    // So the todo is:\n    // - better detect what kind of start is needed\n    // - return both flavors of starting pattern\n    // - attach $ at the end of the pattern when creating the actual RegExp\n    //\n    // Ah, but wait, no, that all only applies to the root when the first pattern\n    // is not an extglob. If the first pattern IS an extglob, then we need all\n    // that dot prevention biz to live in the extglob portions, because eg\n    // +(*|.x*) can match .xy but not .yx.\n    //\n    // So, return the two flavors if it's #root and the first child is not an\n    // AST, otherwise leave it to the child AST to handle it, and there,\n    // use the (?:^|/) style of start binding.\n    //\n    // Even simplified further:\n    // - Since the start for a join is eg /(?!\\.) and the start for a part\n    // is ^(?!\\.), we can just prepend (?!\\.) to the pattern (either root\n    // or start or whatever) and prepend ^ or / at the Regexp construction.\n    toRegExpSource(allowDot) {\n        const dot = allowDot ?? !!this.#options.dot;\n        if (this.#root === this)\n            this.#fillNegs();\n        if (!this.type) {\n            const noEmpty = this.isStart() && this.isEnd();\n            const src = this.#parts\n                .map(p => {\n                const [re, _, hasMagic, uflag] = typeof p === 'string'\n                    ? AST.#parseGlob(p, this.#hasMagic, noEmpty)\n                    : p.toRegExpSource(allowDot);\n                this.#hasMagic = this.#hasMagic || hasMagic;\n                this.#uflag = this.#uflag || uflag;\n                return re;\n            })\n                .join('');\n            let start = '';\n            if (this.isStart()) {\n                if (typeof this.#parts[0] === 'string') {\n                    // this is the string that will match the start of the pattern,\n                    // so we need to protect against dots and such.\n                    // '.' and '..' cannot match unless the pattern is that exactly,\n                    // even if it starts with . or dot:true is set.\n                    const dotTravAllowed = this.#parts.length === 1 && justDots.has(this.#parts[0]);\n                    if (!dotTravAllowed) {\n                        const aps = addPatternStart;\n                        // check if we have a possibility of matching . or ..,\n                        // and prevent that.\n                        const needNoTrav = \n                        // dots are allowed, and the pattern starts with [ or .\n                        (dot && aps.has(src.charAt(0))) ||\n                            // the pattern starts with \\., and then [ or .\n                            (src.startsWith('\\\\.') && aps.has(src.charAt(2))) ||\n                            // the pattern starts with \\.\\., and then [ or .\n                            (src.startsWith('\\\\.\\\\.') && aps.has(src.charAt(4)));\n                        // no need to prevent dots if it can't match a dot, or if a\n                        // sub-pattern will be preventing it anyway.\n                        const needNoDot = !dot && !allowDot && aps.has(src.charAt(0));\n                        start = needNoTrav ? startNoTraversal : needNoDot ? startNoDot : '';\n                    }\n                }\n            }\n            // append the \"end of path portion\" pattern to negation tails\n            let end = '';\n            if (this.isEnd() &&\n                this.#root.#filledNegs &&\n                this.#parent?.type === '!') {\n                end = '(?:$|\\\\/)';\n            }\n            const final = start + src + end;\n            return [\n                final,\n                unescape(src),\n                (this.#hasMagic = !!this.#hasMagic),\n                this.#uflag,\n            ];\n        }\n        // We need to calculate the body *twice* if it's a repeat pattern\n        // at the start, once in nodot mode, then again in dot mode, so a\n        // pattern like *(?) can match 'x.y'\n        const repeated = this.type === '*' || this.type === '+';\n        // some kind of extglob\n        const start = this.type === '!' ? '(?:(?!(?:' : '(?:';\n        let body = this.#partsToRegExp(dot);\n        if (this.isStart() && this.isEnd() && !body && this.type !== '!') {\n            // invalid extglob, has to at least be *something* present, if it's\n            // the entire path portion.\n            const s = this.toString();\n            this.#parts = [s];\n            this.type = null;\n            this.#hasMagic = undefined;\n            return [s, unescape(this.toString()), false, false];\n        }\n        // XXX abstract out this map method\n        let bodyDotAllowed = !repeated || allowDot || dot || !startNoDot\n            ? ''\n            : this.#partsToRegExp(true);\n        if (bodyDotAllowed === body) {\n            bodyDotAllowed = '';\n        }\n        if (bodyDotAllowed) {\n            body = `(?:${body})(?:${bodyDotAllowed})*?`;\n        }\n        // an empty !() is exactly equivalent to a starNoEmpty\n        let final = '';\n        if (this.type === '!' && this.#emptyExt) {\n            final = (this.isStart() && !dot ? startNoDot : '') + starNoEmpty;\n        }\n        else {\n            const close = this.type === '!'\n                ? // !() must match something,but !(x) can match ''\n                    '))' +\n                        (this.isStart() && !dot && !allowDot ? startNoDot : '') +\n                        star +\n                        ')'\n                : this.type === '@'\n                    ? ')'\n                    : this.type === '?'\n                        ? ')?'\n                        : this.type === '+' && bodyDotAllowed\n                            ? ')'\n                            : this.type === '*' && bodyDotAllowed\n                                ? `)?`\n                                : `)${this.type}`;\n            final = start + body + close;\n        }\n        return [\n            final,\n            unescape(body),\n            (this.#hasMagic = !!this.#hasMagic),\n            this.#uflag,\n        ];\n    }\n    #partsToRegExp(dot) {\n        return this.#parts\n            .map(p => {\n            // extglob ASTs should only contain parent ASTs\n            /* c8 ignore start */\n            if (typeof p === 'string') {\n                throw new Error('string type in extglob ast??');\n            }\n            /* c8 ignore stop */\n            // can ignore hasMagic, because extglobs are already always magic\n            const [re, _, _hasMagic, uflag] = p.toRegExpSource(dot);\n            this.#uflag = this.#uflag || uflag;\n            return re;\n        })\n            .filter(p => !(this.isStart() && this.isEnd()) || !!p)\n            .join('|');\n    }\n    static #parseGlob(glob, hasMagic, noEmpty = false) {\n        let escaping = false;\n        let re = '';\n        let uflag = false;\n        for (let i = 0; i < glob.length; i++) {\n            const c = glob.charAt(i);\n            if (escaping) {\n                escaping = false;\n                re += (reSpecials.has(c) ? '\\\\' : '') + c;\n                continue;\n            }\n            if (c === '\\\\') {\n                if (i === glob.length - 1) {\n                    re += '\\\\\\\\';\n                }\n                else {\n                    escaping = true;\n                }\n                continue;\n            }\n            if (c === '[') {\n                const [src, needUflag, consumed, magic] = parseClass(glob, i);\n                if (consumed) {\n                    re += src;\n                    uflag = uflag || needUflag;\n                    i += consumed - 1;\n                    hasMagic = hasMagic || magic;\n                    continue;\n                }\n            }\n            if (c === '*') {\n                if (noEmpty && glob === '*')\n                    re += starNoEmpty;\n                else\n                    re += star;\n                hasMagic = true;\n                continue;\n            }\n            if (c === '?') {\n                re += qmark;\n                hasMagic = true;\n                continue;\n            }\n            re += regExpEscape(c);\n        }\n        return [re, unescape(glob), !!hasMagic, uflag];\n    }\n}\n//# sourceMappingURL=ast.js.map","import expand from 'brace-expansion';\nimport { assertValidPattern } from './assert-valid-pattern.js';\nimport { AST } from './ast.js';\nimport { escape } from './escape.js';\nimport { unescape } from './unescape.js';\nexport const minimatch = (p, pattern, options = {}) => {\n    assertValidPattern(pattern);\n    // shortcut: comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n        return false;\n    }\n    return new Minimatch(pattern, options).match(p);\n};\n// Optimized checking for the most common glob patterns.\nconst starDotExtRE = /^\\*+([^+@!?\\*\\[\\(]*)$/;\nconst starDotExtTest = (ext) => (f) => !f.startsWith('.') && f.endsWith(ext);\nconst starDotExtTestDot = (ext) => (f) => f.endsWith(ext);\nconst starDotExtTestNocase = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => !f.startsWith('.') && f.toLowerCase().endsWith(ext);\n};\nconst starDotExtTestNocaseDot = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => f.toLowerCase().endsWith(ext);\n};\nconst starDotStarRE = /^\\*+\\.\\*+$/;\nconst starDotStarTest = (f) => !f.startsWith('.') && f.includes('.');\nconst starDotStarTestDot = (f) => f !== '.' && f !== '..' && f.includes('.');\nconst dotStarRE = /^\\.\\*+$/;\nconst dotStarTest = (f) => f !== '.' && f !== '..' && f.startsWith('.');\nconst starRE = /^\\*+$/;\nconst starTest = (f) => f.length !== 0 && !f.startsWith('.');\nconst starTestDot = (f) => f.length !== 0 && f !== '.' && f !== '..';\nconst qmarksRE = /^\\?+([^+@!?\\*\\[\\(]*)?$/;\nconst qmarksTestNocase = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestNocaseDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTest = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTestNoExt = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && !f.startsWith('.');\n};\nconst qmarksTestNoExtDot = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && f !== '.' && f !== '..';\n};\n/* c8 ignore start */\nconst defaultPlatform = (typeof process === 'object' && process\n    ? (typeof process.env === 'object' &&\n        process.env &&\n        process.env.__MINIMATCH_TESTING_PLATFORM__) ||\n        process.platform\n    : 'posix');\nconst path = {\n    win32: { sep: '\\\\' },\n    posix: { sep: '/' },\n};\n/* c8 ignore stop */\nexport const sep = defaultPlatform === 'win32' ? path.win32.sep : path.posix.sep;\nminimatch.sep = sep;\nexport const GLOBSTAR = Symbol('globstar **');\nminimatch.GLOBSTAR = GLOBSTAR;\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?';\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\/|^)\\\\.).)*?';\nexport const filter = (pattern, options = {}) => (p) => minimatch(p, pattern, options);\nminimatch.filter = filter;\nconst ext = (a, b = {}) => Object.assign({}, a, b);\nexport const defaults = (def) => {\n    if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n        return minimatch;\n    }\n    const orig = minimatch;\n    const m = (p, pattern, options = {}) => orig(p, pattern, ext(def, options));\n    return Object.assign(m, {\n        Minimatch: class Minimatch extends orig.Minimatch {\n            constructor(pattern, options = {}) {\n                super(pattern, ext(def, options));\n            }\n            static defaults(options) {\n                return orig.defaults(ext(def, options)).Minimatch;\n            }\n        },\n        AST: class AST extends orig.AST {\n            /* c8 ignore start */\n            constructor(type, parent, options = {}) {\n                super(type, parent, ext(def, options));\n            }\n            /* c8 ignore stop */\n            static fromGlob(pattern, options = {}) {\n                return orig.AST.fromGlob(pattern, ext(def, options));\n            }\n        },\n        unescape: (s, options = {}) => orig.unescape(s, ext(def, options)),\n        escape: (s, options = {}) => orig.escape(s, ext(def, options)),\n        filter: (pattern, options = {}) => orig.filter(pattern, ext(def, options)),\n        defaults: (options) => orig.defaults(ext(def, options)),\n        makeRe: (pattern, options = {}) => orig.makeRe(pattern, ext(def, options)),\n        braceExpand: (pattern, options = {}) => orig.braceExpand(pattern, ext(def, options)),\n        match: (list, pattern, options = {}) => orig.match(list, pattern, ext(def, options)),\n        sep: orig.sep,\n        GLOBSTAR: GLOBSTAR,\n    });\n};\nminimatch.defaults = defaults;\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nexport const braceExpand = (pattern, options = {}) => {\n    assertValidPattern(pattern);\n    // Thanks to Yeting Li <https://github.com/yetingli> for\n    // improving this regexp to avoid a ReDOS vulnerability.\n    if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n        // shortcut. no need to expand.\n        return [pattern];\n    }\n    return expand(pattern);\n};\nminimatch.braceExpand = braceExpand;\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nexport const makeRe = (pattern, options = {}) => new Minimatch(pattern, options).makeRe();\nminimatch.makeRe = makeRe;\nexport const match = (list, pattern, options = {}) => {\n    const mm = new Minimatch(pattern, options);\n    list = list.filter(f => mm.match(f));\n    if (mm.options.nonull && !list.length) {\n        list.push(pattern);\n    }\n    return list;\n};\nminimatch.match = match;\n// replace stuff like \\* with *\nconst globMagic = /[?*]|[+@!]\\(.*?\\)|\\[|\\]/;\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\nexport class Minimatch {\n    options;\n    set;\n    pattern;\n    windowsPathsNoEscape;\n    nonegate;\n    negate;\n    comment;\n    empty;\n    preserveMultipleSlashes;\n    partial;\n    globSet;\n    globParts;\n    nocase;\n    isWindows;\n    platform;\n    windowsNoMagicRoot;\n    regexp;\n    constructor(pattern, options = {}) {\n        assertValidPattern(pattern);\n        options = options || {};\n        this.options = options;\n        this.pattern = pattern;\n        this.platform = options.platform || defaultPlatform;\n        this.isWindows = this.platform === 'win32';\n        this.windowsPathsNoEscape =\n            !!options.windowsPathsNoEscape || options.allowWindowsEscape === false;\n        if (this.windowsPathsNoEscape) {\n            this.pattern = this.pattern.replace(/\\\\/g, '/');\n        }\n        this.preserveMultipleSlashes = !!options.preserveMultipleSlashes;\n        this.regexp = null;\n        this.negate = false;\n        this.nonegate = !!options.nonegate;\n        this.comment = false;\n        this.empty = false;\n        this.partial = !!options.partial;\n        this.nocase = !!this.options.nocase;\n        this.windowsNoMagicRoot =\n            options.windowsNoMagicRoot !== undefined\n                ? options.windowsNoMagicRoot\n                : !!(this.isWindows && this.nocase);\n        this.globSet = [];\n        this.globParts = [];\n        this.set = [];\n        // make the set of regexps etc.\n        this.make();\n    }\n    hasMagic() {\n        if (this.options.magicalBraces && this.set.length > 1) {\n            return true;\n        }\n        for (const pattern of this.set) {\n            for (const part of pattern) {\n                if (typeof part !== 'string')\n                    return true;\n            }\n        }\n        return false;\n    }\n    debug(..._) { }\n    make() {\n        const pattern = this.pattern;\n        const options = this.options;\n        // empty patterns and comments match nothing.\n        if (!options.nocomment && pattern.charAt(0) === '#') {\n            this.comment = true;\n            return;\n        }\n        if (!pattern) {\n            this.empty = true;\n            return;\n        }\n        // step 1: figure out negation, etc.\n        this.parseNegate();\n        // step 2: expand braces\n        this.globSet = [...new Set(this.braceExpand())];\n        if (options.debug) {\n            this.debug = (...args) => console.error(...args);\n        }\n        this.debug(this.pattern, this.globSet);\n        // step 3: now we have a set, so turn each one into a series of\n        // path-portion matching patterns.\n        // These will be regexps, except in the case of \"**\", which is\n        // set to the GLOBSTAR object for globstar behavior,\n        // and will not contain any / characters\n        //\n        // First, we preprocess to make the glob pattern sets a bit simpler\n        // and deduped.  There are some perf-killing patterns that can cause\n        // problems with a glob walk, but we can simplify them down a bit.\n        const rawGlobParts = this.globSet.map(s => this.slashSplit(s));\n        this.globParts = this.preprocess(rawGlobParts);\n        this.debug(this.pattern, this.globParts);\n        // glob --> regexps\n        let set = this.globParts.map((s, _, __) => {\n            if (this.isWindows && this.windowsNoMagicRoot) {\n                // check if it's a drive or unc path.\n                const isUNC = s[0] === '' &&\n                    s[1] === '' &&\n                    (s[2] === '?' || !globMagic.test(s[2])) &&\n                    !globMagic.test(s[3]);\n                const isDrive = /^[a-z]:/i.test(s[0]);\n                if (isUNC) {\n                    return [...s.slice(0, 4), ...s.slice(4).map(ss => this.parse(ss))];\n                }\n                else if (isDrive) {\n                    return [s[0], ...s.slice(1).map(ss => this.parse(ss))];\n                }\n            }\n            return s.map(ss => this.parse(ss));\n        });\n        this.debug(this.pattern, set);\n        // filter out everything that didn't compile properly.\n        this.set = set.filter(s => s.indexOf(false) === -1);\n        // do not treat the ? in UNC paths as magic\n        if (this.isWindows) {\n            for (let i = 0; i < this.set.length; i++) {\n                const p = this.set[i];\n                if (p[0] === '' &&\n                    p[1] === '' &&\n                    this.globParts[i][2] === '?' &&\n                    typeof p[3] === 'string' &&\n                    /^[a-z]:$/i.test(p[3])) {\n                    p[2] = '?';\n                }\n            }\n        }\n        this.debug(this.pattern, this.set);\n    }\n    // various transforms to equivalent pattern sets that are\n    // faster to process in a filesystem walk.  The goal is to\n    // eliminate what we can, and push all ** patterns as far\n    // to the right as possible, even if it increases the number\n    // of patterns that we have to process.\n    preprocess(globParts) {\n        // if we're not in globstar mode, then turn all ** into *\n        if (this.options.noglobstar) {\n            for (let i = 0; i < globParts.length; i++) {\n                for (let j = 0; j < globParts[i].length; j++) {\n                    if (globParts[i][j] === '**') {\n                        globParts[i][j] = '*';\n                    }\n                }\n            }\n        }\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            // aggressive optimization for the purpose of fs walking\n            globParts = this.firstPhasePreProcess(globParts);\n            globParts = this.secondPhasePreProcess(globParts);\n        }\n        else if (optimizationLevel >= 1) {\n            // just basic optimizations to remove some .. parts\n            globParts = this.levelOneOptimize(globParts);\n        }\n        else {\n            // just collapse multiple ** portions into one\n            globParts = this.adjascentGlobstarOptimize(globParts);\n        }\n        return globParts;\n    }\n    // just get rid of adjascent ** portions\n    adjascentGlobstarOptimize(globParts) {\n        return globParts.map(parts => {\n            let gs = -1;\n            while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                let i = gs;\n                while (parts[i + 1] === '**') {\n                    i++;\n                }\n                if (i !== gs) {\n                    parts.splice(gs, i - gs);\n                }\n            }\n            return parts;\n        });\n    }\n    // get rid of adjascent ** and resolve .. portions\n    levelOneOptimize(globParts) {\n        return globParts.map(parts => {\n            parts = parts.reduce((set, part) => {\n                const prev = set[set.length - 1];\n                if (part === '**' && prev === '**') {\n                    return set;\n                }\n                if (part === '..') {\n                    if (prev && prev !== '..' && prev !== '.' && prev !== '**') {\n                        set.pop();\n                        return set;\n                    }\n                }\n                set.push(part);\n                return set;\n            }, []);\n            return parts.length === 0 ? [''] : parts;\n        });\n    }\n    levelTwoFileOptimize(parts) {\n        if (!Array.isArray(parts)) {\n            parts = this.slashSplit(parts);\n        }\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/<e>/<rest> -> <pre>/<rest>\n            if (!this.preserveMultipleSlashes) {\n                for (let i = 1; i < parts.length - 1; i++) {\n                    const p = parts[i];\n                    // don't squeeze out UNC patterns\n                    if (i === 1 && p === '' && parts[0] === '')\n                        continue;\n                    if (p === '.' || p === '') {\n                        didSomething = true;\n                        parts.splice(i, 1);\n                        i--;\n                    }\n                }\n                if (parts[0] === '.' &&\n                    parts.length === 2 &&\n                    (parts[1] === '.' || parts[1] === '')) {\n                    didSomething = true;\n                    parts.pop();\n                }\n            }\n            // <pre>/<p>/../<rest> -> <pre>/<rest>\n            let dd = 0;\n            while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                const p = parts[dd - 1];\n                if (p && p !== '.' && p !== '..' && p !== '**') {\n                    didSomething = true;\n                    parts.splice(dd - 1, 2);\n                    dd -= 2;\n                }\n            }\n        } while (didSomething);\n        return parts.length === 0 ? [''] : parts;\n    }\n    // First phase: single-pattern processing\n    // <pre> is 1 or more portions\n    // <rest> is 1 or more portions\n    // <p> is any portion other than ., .., '', or **\n    // <e> is . or ''\n    //\n    // **/.. is *brutal* for filesystem walking performance, because\n    // it effectively resets the recursive walk each time it occurs,\n    // and ** cannot be reduced out by a .. pattern part like a regexp\n    // or most strings (other than .., ., and '') can be.\n    //\n    // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n    // <pre>/<e>/<rest> -> <pre>/<rest>\n    // <pre>/<p>/../<rest> -> <pre>/<rest>\n    // **/**/<rest> -> **/<rest>\n    //\n    // **/*/<rest> -> */**/<rest> <== not valid because ** doesn't follow\n    // this WOULD be allowed if ** did follow symlinks, or * didn't\n    firstPhasePreProcess(globParts) {\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n            for (let parts of globParts) {\n                let gs = -1;\n                while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                    let gss = gs;\n                    while (parts[gss + 1] === '**') {\n                        // <pre>/**/**/<rest> -> <pre>/**/<rest>\n                        gss++;\n                    }\n                    // eg, if gs is 2 and gss is 4, that means we have 3 **\n                    // parts, and can remove 2 of them.\n                    if (gss > gs) {\n                        parts.splice(gs + 1, gss - gs);\n                    }\n                    let next = parts[gs + 1];\n                    const p = parts[gs + 2];\n                    const p2 = parts[gs + 3];\n                    if (next !== '..')\n                        continue;\n                    if (!p ||\n                        p === '.' ||\n                        p === '..' ||\n                        !p2 ||\n                        p2 === '.' ||\n                        p2 === '..') {\n                        continue;\n                    }\n                    didSomething = true;\n                    // edit parts in place, and push the new one\n                    parts.splice(gs, 1);\n                    const other = parts.slice(0);\n                    other[gs] = '**';\n                    globParts.push(other);\n                    gs--;\n                }\n                // <pre>/<e>/<rest> -> <pre>/<rest>\n                if (!this.preserveMultipleSlashes) {\n                    for (let i = 1; i < parts.length - 1; i++) {\n                        const p = parts[i];\n                        // don't squeeze out UNC patterns\n                        if (i === 1 && p === '' && parts[0] === '')\n                            continue;\n                        if (p === '.' || p === '') {\n                            didSomething = true;\n                            parts.splice(i, 1);\n                            i--;\n                        }\n                    }\n                    if (parts[0] === '.' &&\n                        parts.length === 2 &&\n                        (parts[1] === '.' || parts[1] === '')) {\n                        didSomething = true;\n                        parts.pop();\n                    }\n                }\n                // <pre>/<p>/../<rest> -> <pre>/<rest>\n                let dd = 0;\n                while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                    const p = parts[dd - 1];\n                    if (p && p !== '.' && p !== '..' && p !== '**') {\n                        didSomething = true;\n                        const needDot = dd === 1 && parts[dd + 1] === '**';\n                        const splin = needDot ? ['.'] : [];\n                        parts.splice(dd - 1, 2, ...splin);\n                        if (parts.length === 0)\n                            parts.push('');\n                        dd -= 2;\n                    }\n                }\n            }\n        } while (didSomething);\n        return globParts;\n    }\n    // second phase: multi-pattern dedupes\n    // {<pre>/*/<rest>,<pre>/<p>/<rest>} -> <pre>/*/<rest>\n    // {<pre>/<rest>,<pre>/<rest>} -> <pre>/<rest>\n    // {<pre>/**/<rest>,<pre>/<rest>} -> <pre>/**/<rest>\n    //\n    // {<pre>/**/<rest>,<pre>/**/<p>/<rest>} -> <pre>/**/<rest>\n    // ^-- not valid because ** doens't follow symlinks\n    secondPhasePreProcess(globParts) {\n        for (let i = 0; i < globParts.length - 1; i++) {\n            for (let j = i + 1; j < globParts.length; j++) {\n                const matched = this.partsMatch(globParts[i], globParts[j], !this.preserveMultipleSlashes);\n                if (matched) {\n                    globParts[i] = [];\n                    globParts[j] = matched;\n                    break;\n                }\n            }\n        }\n        return globParts.filter(gs => gs.length);\n    }\n    partsMatch(a, b, emptyGSMatch = false) {\n        let ai = 0;\n        let bi = 0;\n        let result = [];\n        let which = '';\n        while (ai < a.length && bi < b.length) {\n            if (a[ai] === b[bi]) {\n                result.push(which === 'b' ? b[bi] : a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (emptyGSMatch && a[ai] === '**' && b[bi] === a[ai + 1]) {\n                result.push(a[ai]);\n                ai++;\n            }\n            else if (emptyGSMatch && b[bi] === '**' && a[ai] === b[bi + 1]) {\n                result.push(b[bi]);\n                bi++;\n            }\n            else if (a[ai] === '*' &&\n                b[bi] &&\n                (this.options.dot || !b[bi].startsWith('.')) &&\n                b[bi] !== '**') {\n                if (which === 'b')\n                    return false;\n                which = 'a';\n                result.push(a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (b[bi] === '*' &&\n                a[ai] &&\n                (this.options.dot || !a[ai].startsWith('.')) &&\n                a[ai] !== '**') {\n                if (which === 'a')\n                    return false;\n                which = 'b';\n                result.push(b[bi]);\n                ai++;\n                bi++;\n            }\n            else {\n                return false;\n            }\n        }\n        // if we fall out of the loop, it means they two are identical\n        // as long as their lengths match\n        return a.length === b.length && result;\n    }\n    parseNegate() {\n        if (this.nonegate)\n            return;\n        const pattern = this.pattern;\n        let negate = false;\n        let negateOffset = 0;\n        for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n            negate = !negate;\n            negateOffset++;\n        }\n        if (negateOffset)\n            this.pattern = pattern.slice(negateOffset);\n        this.negate = negate;\n    }\n    // set partial to true to test if, for example,\n    // \"/a/b\" matches the start of \"/*/b/*/d\"\n    // Partial means, if you run out of file before you run\n    // out of pattern, then that's fine, as long as all\n    // the parts match.\n    matchOne(file, pattern, partial = false) {\n        const options = this.options;\n        // UNC paths like //?/X:/... can match X:/... and vice versa\n        // Drive letters in absolute drive or unc paths are always compared\n        // case-insensitively.\n        if (this.isWindows) {\n            const fileDrive = typeof file[0] === 'string' && /^[a-z]:$/i.test(file[0]);\n            const fileUNC = !fileDrive &&\n                file[0] === '' &&\n                file[1] === '' &&\n                file[2] === '?' &&\n                /^[a-z]:$/i.test(file[3]);\n            const patternDrive = typeof pattern[0] === 'string' && /^[a-z]:$/i.test(pattern[0]);\n            const patternUNC = !patternDrive &&\n                pattern[0] === '' &&\n                pattern[1] === '' &&\n                pattern[2] === '?' &&\n                typeof pattern[3] === 'string' &&\n                /^[a-z]:$/i.test(pattern[3]);\n            const fdi = fileUNC ? 3 : fileDrive ? 0 : undefined;\n            const pdi = patternUNC ? 3 : patternDrive ? 0 : undefined;\n            if (typeof fdi === 'number' && typeof pdi === 'number') {\n                const [fd, pd] = [file[fdi], pattern[pdi]];\n                if (fd.toLowerCase() === pd.toLowerCase()) {\n                    pattern[pdi] = fd;\n                    if (pdi > fdi) {\n                        pattern = pattern.slice(pdi);\n                    }\n                    else if (fdi > pdi) {\n                        file = file.slice(fdi);\n                    }\n                }\n            }\n        }\n        // resolve and reduce . and .. portions in the file as well.\n        // dont' need to do the second phase, because it's only one string[]\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            file = this.levelTwoFileOptimize(file);\n        }\n        this.debug('matchOne', this, { file, pattern });\n        this.debug('matchOne', file.length, pattern.length);\n        for (var fi = 0, pi = 0, fl = file.length, pl = pattern.length; fi < fl && pi < pl; fi++, pi++) {\n            this.debug('matchOne loop');\n            var p = pattern[pi];\n            var f = file[fi];\n            this.debug(pattern, p, f);\n            // should be impossible.\n            // some invalid regexp stuff in the set.\n            /* c8 ignore start */\n            if (p === false) {\n                return false;\n            }\n            /* c8 ignore stop */\n            if (p === GLOBSTAR) {\n                this.debug('GLOBSTAR', [pattern, p, f]);\n                // \"**\"\n                // a/**/b/**/c would match the following:\n                // a/b/x/y/z/c\n                // a/x/y/z/b/c\n                // a/b/x/b/x/c\n                // a/b/c\n                // To do this, take the rest of the pattern after\n                // the **, and see if it would match the file remainder.\n                // If so, return success.\n                // If not, the ** \"swallows\" a segment, and try again.\n                // This is recursively awful.\n                //\n                // a/**/b/**/c matching a/b/x/y/z/c\n                // - a matches a\n                // - doublestar\n                //   - matchOne(b/x/y/z/c, b/**/c)\n                //     - b matches b\n                //     - doublestar\n                //       - matchOne(x/y/z/c, c) -> no\n                //       - matchOne(y/z/c, c) -> no\n                //       - matchOne(z/c, c) -> no\n                //       - matchOne(c, c) yes, hit\n                var fr = fi;\n                var pr = pi + 1;\n                if (pr === pl) {\n                    this.debug('** at the end');\n                    // a ** at the end will just swallow the rest.\n                    // We have found a match.\n                    // however, it will not swallow /.x, unless\n                    // options.dot is set.\n                    // . and .. are *never* matched by **, for explosively\n                    // exponential reasons.\n                    for (; fi < fl; fi++) {\n                        if (file[fi] === '.' ||\n                            file[fi] === '..' ||\n                            (!options.dot && file[fi].charAt(0) === '.'))\n                            return false;\n                    }\n                    return true;\n                }\n                // ok, let's see if we can swallow whatever we can.\n                while (fr < fl) {\n                    var swallowee = file[fr];\n                    this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee);\n                    // XXX remove this slice.  Just pass the start index.\n                    if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n                        this.debug('globstar found match!', fr, fl, swallowee);\n                        // found a match.\n                        return true;\n                    }\n                    else {\n                        // can't swallow \".\" or \"..\" ever.\n                        // can only swallow \".foo\" when explicitly asked.\n                        if (swallowee === '.' ||\n                            swallowee === '..' ||\n                            (!options.dot && swallowee.charAt(0) === '.')) {\n                            this.debug('dot detected!', file, fr, pattern, pr);\n                            break;\n                        }\n                        // ** swallows a segment, and continue.\n                        this.debug('globstar swallow a segment, and continue');\n                        fr++;\n                    }\n                }\n                // no match was found.\n                // However, in partial mode, we can't say this is necessarily over.\n                /* c8 ignore start */\n                if (partial) {\n                    // ran out of file\n                    this.debug('\\n>>> no match, partial?', file, fr, pattern, pr);\n                    if (fr === fl) {\n                        return true;\n                    }\n                }\n                /* c8 ignore stop */\n                return false;\n            }\n            // something other than **\n            // non-magic patterns just have to match exactly\n            // patterns with magic have been turned into regexps.\n            let hit;\n            if (typeof p === 'string') {\n                hit = f === p;\n                this.debug('string match', p, f, hit);\n            }\n            else {\n                hit = p.test(f);\n                this.debug('pattern match', p, f, hit);\n            }\n            if (!hit)\n                return false;\n        }\n        // Note: ending in / means that we'll get a final \"\"\n        // at the end of the pattern.  This can only match a\n        // corresponding \"\" at the end of the file.\n        // If the file ends in /, then it can only match a\n        // a pattern that ends in /, unless the pattern just\n        // doesn't have any more for it. But, a/b/ should *not*\n        // match \"a/b/*\", even though \"\" matches against the\n        // [^/]*? pattern, except in partial mode, where it might\n        // simply not be reached yet.\n        // However, a/b/ should still satisfy a/*\n        // now either we fell off the end of the pattern, or we're done.\n        if (fi === fl && pi === pl) {\n            // ran out of pattern and filename at the same time.\n            // an exact hit!\n            return true;\n        }\n        else if (fi === fl) {\n            // ran out of file, but still had pattern left.\n            // this is ok if we're doing the match as part of\n            // a glob fs traversal.\n            return partial;\n        }\n        else if (pi === pl) {\n            // ran out of pattern, still have file left.\n            // this is only acceptable if we're on the very last\n            // empty segment of a file with a trailing slash.\n            // a/* should match a/b/\n            return fi === fl - 1 && file[fi] === '';\n            /* c8 ignore start */\n        }\n        else {\n            // should be unreachable.\n            throw new Error('wtf?');\n        }\n        /* c8 ignore stop */\n    }\n    braceExpand() {\n        return braceExpand(this.pattern, this.options);\n    }\n    parse(pattern) {\n        assertValidPattern(pattern);\n        const options = this.options;\n        // shortcuts\n        if (pattern === '**')\n            return GLOBSTAR;\n        if (pattern === '')\n            return '';\n        // far and away, the most common glob pattern parts are\n        // *, *.*, and *.<ext>  Add a fast check method for those.\n        let m;\n        let fastTest = null;\n        if ((m = pattern.match(starRE))) {\n            fastTest = options.dot ? starTestDot : starTest;\n        }\n        else if ((m = pattern.match(starDotExtRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? starDotExtTestNocaseDot\n                    : starDotExtTestNocase\n                : options.dot\n                    ? starDotExtTestDot\n                    : starDotExtTest)(m[1]);\n        }\n        else if ((m = pattern.match(qmarksRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? qmarksTestNocaseDot\n                    : qmarksTestNocase\n                : options.dot\n                    ? qmarksTestDot\n                    : qmarksTest)(m);\n        }\n        else if ((m = pattern.match(starDotStarRE))) {\n            fastTest = options.dot ? starDotStarTestDot : starDotStarTest;\n        }\n        else if ((m = pattern.match(dotStarRE))) {\n            fastTest = dotStarTest;\n        }\n        const re = AST.fromGlob(pattern, this.options).toMMPattern();\n        if (fastTest && typeof re === 'object') {\n            // Avoids overriding in frozen environments\n            Reflect.defineProperty(re, 'test', { value: fastTest });\n        }\n        return re;\n    }\n    makeRe() {\n        if (this.regexp || this.regexp === false)\n            return this.regexp;\n        // at this point, this.set is a 2d array of partial\n        // pattern strings, or \"**\".\n        //\n        // It's better to use .match().  This function shouldn't\n        // be used, really, but it's pretty convenient sometimes,\n        // when you just want to work with a regex.\n        const set = this.set;\n        if (!set.length) {\n            this.regexp = false;\n            return this.regexp;\n        }\n        const options = this.options;\n        const twoStar = options.noglobstar\n            ? star\n            : options.dot\n                ? twoStarDot\n                : twoStarNoDot;\n        const flags = new Set(options.nocase ? ['i'] : []);\n        // regexpify non-globstar patterns\n        // if ** is only item, then we just do one twoStar\n        // if ** is first, and there are more, prepend (\\/|twoStar\\/)? to next\n        // if ** is last, append (\\/twoStar|) to previous\n        // if ** is in the middle, append (\\/|\\/twoStar\\/) to previous\n        // then filter out GLOBSTAR symbols\n        let re = set\n            .map(pattern => {\n            const pp = pattern.map(p => {\n                if (p instanceof RegExp) {\n                    for (const f of p.flags.split(''))\n                        flags.add(f);\n                }\n                return typeof p === 'string'\n                    ? regExpEscape(p)\n                    : p === GLOBSTAR\n                        ? GLOBSTAR\n                        : p._src;\n            });\n            pp.forEach((p, i) => {\n                const next = pp[i + 1];\n                const prev = pp[i - 1];\n                if (p !== GLOBSTAR || prev === GLOBSTAR) {\n                    return;\n                }\n                if (prev === undefined) {\n                    if (next !== undefined && next !== GLOBSTAR) {\n                        pp[i + 1] = '(?:\\\\/|' + twoStar + '\\\\/)?' + next;\n                    }\n                    else {\n                        pp[i] = twoStar;\n                    }\n                }\n                else if (next === undefined) {\n                    pp[i - 1] = prev + '(?:\\\\/|' + twoStar + ')?';\n                }\n                else if (next !== GLOBSTAR) {\n                    pp[i - 1] = prev + '(?:\\\\/|\\\\/' + twoStar + '\\\\/)' + next;\n                    pp[i + 1] = GLOBSTAR;\n                }\n            });\n            return pp.filter(p => p !== GLOBSTAR).join('/');\n        })\n            .join('|');\n        // need to wrap in parens if we had more than one thing with |,\n        // otherwise only the first will be anchored to ^ and the last to $\n        const [open, close] = set.length > 1 ? ['(?:', ')'] : ['', ''];\n        // must match entire pattern\n        // ending in a * or ** will make it less strict.\n        re = '^' + open + re + close + '$';\n        // can match anything, as long as it's not this.\n        if (this.negate)\n            re = '^(?!' + re + ').+$';\n        try {\n            this.regexp = new RegExp(re, [...flags].join(''));\n            /* c8 ignore start */\n        }\n        catch (ex) {\n            // should be impossible\n            this.regexp = false;\n        }\n        /* c8 ignore stop */\n        return this.regexp;\n    }\n    slashSplit(p) {\n        // if p starts with // on windows, we preserve that\n        // so that UNC paths aren't broken.  Otherwise, any number of\n        // / characters are coalesced into one, unless\n        // preserveMultipleSlashes is set to true.\n        if (this.preserveMultipleSlashes) {\n            return p.split('/');\n        }\n        else if (this.isWindows && /^\\/\\/[^\\/]+/.test(p)) {\n            // add an extra '' for the one we lose\n            return ['', ...p.split(/\\/+/)];\n        }\n        else {\n            return p.split(/\\/+/);\n        }\n    }\n    match(f, partial = this.partial) {\n        this.debug('match', f, this.pattern);\n        // short-circuit in the case of busted things.\n        // comments, etc.\n        if (this.comment) {\n            return false;\n        }\n        if (this.empty) {\n            return f === '';\n        }\n        if (f === '/' && partial) {\n            return true;\n        }\n        const options = this.options;\n        // windows: need to use /, not \\\n        if (this.isWindows) {\n            f = f.split('\\\\').join('/');\n        }\n        // treat the test path as a set of pathparts.\n        const ff = this.slashSplit(f);\n        this.debug(this.pattern, 'split', ff);\n        // just ONE of the pattern sets in this.set needs to match\n        // in order for it to be valid.  If negating, then just one\n        // match means that we have failed.\n        // Either way, return on the first hit.\n        const set = this.set;\n        this.debug(this.pattern, 'set', set);\n        // Find the basename of the path by looking for the last non-empty segment\n        let filename = ff[ff.length - 1];\n        if (!filename) {\n            for (let i = ff.length - 2; !filename && i >= 0; i--) {\n                filename = ff[i];\n            }\n        }\n        for (let i = 0; i < set.length; i++) {\n            const pattern = set[i];\n            let file = ff;\n            if (options.matchBase && pattern.length === 1) {\n                file = [filename];\n            }\n            const hit = this.matchOne(file, pattern, partial);\n            if (hit) {\n                if (options.flipNegate) {\n                    return true;\n                }\n                return !this.negate;\n            }\n        }\n        // didn't get any hits.  this is success if it's a negative\n        // pattern, failure otherwise.\n        if (options.flipNegate) {\n            return false;\n        }\n        return this.negate;\n    }\n    static defaults(def) {\n        return minimatch.defaults(def).Minimatch;\n    }\n}\n/* c8 ignore start */\nexport { AST } from './ast.js';\nexport { escape } from './escape.js';\nexport { unescape } from './unescape.js';\n/* c8 ignore stop */\nminimatch.AST = AST;\nminimatch.Minimatch = Minimatch;\nminimatch.escape = escape;\nminimatch.unescape = unescape;\n//# sourceMappingURL=index.js.map","export function convertResponseHeaders(headers) {\n    const output = {};\n    for (const key of headers.keys()) {\n        output[key] = headers.get(key);\n    }\n    return output;\n}\nexport function mergeHeaders(...headerPayloads) {\n    if (headerPayloads.length === 0)\n        return {};\n    const headerKeys = {};\n    return headerPayloads.reduce((output, headers) => {\n        Object.keys(headers).forEach(header => {\n            const lowerHeader = header.toLowerCase();\n            if (headerKeys.hasOwnProperty(lowerHeader)) {\n                output[headerKeys[lowerHeader]] = headers[header];\n            }\n            else {\n                headerKeys[lowerHeader] = header;\n                output[header] = headers[header];\n            }\n        });\n        return output;\n    }, {});\n}\n","/**\n * Escape all magic characters in a glob pattern.\n *\n * If the {@link windowsPathsNoEscape | GlobOptions.windowsPathsNoEscape}\n * option is used, then characters are escaped by wrapping in `[]`, because\n * a magic character wrapped in a character class can only be satisfied by\n * that exact character.  In this mode, `\\` is _not_ escaped, because it is\n * not interpreted as a magic character, but instead as a path separator.\n */\nexport const escape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    // don't need to escape +@! because we escape the parens\n    // that make those magic, and escaping ! as [!] isn't valid,\n    // because [!]] is a valid glob class meaning not ']'.\n    return windowsPathsNoEscape\n        ? s.replace(/[?*()[\\]]/g, '[$&]')\n        : s.replace(/[?*()[\\]\\\\]/g, '\\\\$&');\n};\n//# sourceMappingURL=escape.js.map","import path from \"path-posix\";\nimport { XMLParser } from \"fast-xml-parser\";\nimport nestedProp from \"nested-property\";\nimport { encodePath, normalisePath } from \"./path.js\";\nvar PropertyType;\n(function (PropertyType) {\n    PropertyType[\"Array\"] = \"array\";\n    PropertyType[\"Object\"] = \"object\";\n    PropertyType[\"Original\"] = \"original\";\n})(PropertyType || (PropertyType = {}));\nfunction getParser() {\n    return new XMLParser({\n        removeNSPrefix: true,\n        numberParseOptions: {\n            hex: true,\n            leadingZeros: false\n        }\n        // We don't use the processors here as decoding is done manually\n        // later on - decoding early would break some path checks.\n    });\n}\nfunction getPropertyOfType(obj, prop, type = PropertyType.Original) {\n    const val = nestedProp.get(obj, prop);\n    if (type === \"array\" && Array.isArray(val) === false) {\n        return [val];\n    }\n    else if (type === \"object\" && Array.isArray(val)) {\n        return val[0];\n    }\n    return val;\n}\nfunction normaliseResponse(response) {\n    const output = Object.assign({}, response);\n    // Only either status OR propstat is allowed\n    if (output.status) {\n        nestedProp.set(output, \"status\", getPropertyOfType(output, \"status\", PropertyType.Object));\n    }\n    else {\n        nestedProp.set(output, \"propstat\", getPropertyOfType(output, \"propstat\", PropertyType.Object));\n        nestedProp.set(output, \"propstat.prop\", getPropertyOfType(output, \"propstat.prop\", PropertyType.Object));\n    }\n    return output;\n}\nfunction normaliseResult(result) {\n    const { multistatus } = result;\n    if (multistatus === \"\") {\n        return {\n            multistatus: {\n                response: []\n            }\n        };\n    }\n    if (!multistatus) {\n        throw new Error(\"Invalid response: No root multistatus found\");\n    }\n    const output = {\n        multistatus: Array.isArray(multistatus) ? multistatus[0] : multistatus\n    };\n    nestedProp.set(output, \"multistatus.response\", getPropertyOfType(output, \"multistatus.response\", PropertyType.Array));\n    nestedProp.set(output, \"multistatus.response\", nestedProp.get(output, \"multistatus.response\").map(response => normaliseResponse(response)));\n    return output;\n}\n/**\n * Parse an XML response from a WebDAV service,\n *  converting it to an internal DAV result\n * @param xml The raw XML string\n * @returns A parsed and processed DAV result\n */\nexport function parseXML(xml) {\n    return new Promise(resolve => {\n        const result = getParser().parse(xml);\n        resolve(normaliseResult(result));\n    });\n}\n/**\n * Get a file stat result from given DAV properties\n * @param props DAV properties\n * @param filename The filename for the file stat\n * @param isDetailed Whether or not the raw props of the resource should be returned\n * @returns A file stat result\n */\nexport function prepareFileFromProps(props, filename, isDetailed = false) {\n    // Last modified time, raw size, item type and mime\n    const { getlastmodified: lastMod = null, getcontentlength: rawSize = \"0\", resourcetype: resourceType = null, getcontenttype: mimeType = null, getetag: etag = null } = props;\n    const type = resourceType &&\n        typeof resourceType === \"object\" &&\n        typeof resourceType.collection !== \"undefined\"\n        ? \"directory\"\n        : \"file\";\n    const stat = {\n        filename,\n        basename: path.basename(filename),\n        lastmod: lastMod,\n        size: parseInt(rawSize, 10),\n        type,\n        etag: typeof etag === \"string\" ? etag.replace(/\"/g, \"\") : null\n    };\n    if (type === \"file\") {\n        stat.mime = mimeType && typeof mimeType === \"string\" ? mimeType.split(\";\")[0] : \"\";\n    }\n    if (isDetailed) {\n        // The XML parser tries to interpret values, but the display name is required to be a string\n        if (typeof props.displayname !== \"undefined\") {\n            props.displayname = String(props.displayname);\n        }\n        stat.props = props;\n    }\n    return stat;\n}\n/**\n * Parse a DAV result for file stats\n * @param result The resulting DAV response\n * @param filename The filename that was stat'd\n * @param isDetailed Whether or not the raw props of\n *  the resource should be returned\n * @returns A file stat result\n */\nexport function parseStat(result, filename, isDetailed = false) {\n    let responseItem = null;\n    try {\n        // should be a propstat response, if not the if below will throw an error\n        if (result.multistatus.response[0].propstat) {\n            responseItem = result.multistatus.response[0];\n        }\n    }\n    catch (e) {\n        /* ignore */\n    }\n    if (!responseItem) {\n        throw new Error(\"Failed getting item stat: bad response\");\n    }\n    const { propstat: { prop: props, status: statusLine } } = responseItem;\n    // As defined in https://tools.ietf.org/html/rfc2068#section-6.1\n    const [_, statusCodeStr, statusText] = statusLine.split(\" \", 3);\n    const statusCode = parseInt(statusCodeStr, 10);\n    if (statusCode >= 400) {\n        const err = new Error(`Invalid response: ${statusCode} ${statusText}`);\n        err.status = statusCode;\n        throw err;\n    }\n    const filePath = normalisePath(filename);\n    return prepareFileFromProps(props, filePath, isDetailed);\n}\n/**\n * Parse a DAV result for a search request\n *\n * @param result The resulting DAV response\n * @param searchArbiter The collection path that was searched\n * @param isDetailed Whether or not the raw props of the resource should be returned\n */\nexport function parseSearch(result, searchArbiter, isDetailed) {\n    const response = {\n        truncated: false,\n        results: []\n    };\n    response.truncated = result.multistatus.response.some(v => {\n        return ((v.status || v.propstat?.status).split(\" \", 3)?.[1] === \"507\" &&\n            v.href.replace(/\\/$/, \"\").endsWith(encodePath(searchArbiter).replace(/\\/$/, \"\")));\n    });\n    result.multistatus.response.forEach(result => {\n        if (result.propstat === undefined) {\n            return;\n        }\n        const filename = result.href.split(\"/\").map(decodeURIComponent).join(\"/\");\n        response.results.push(prepareFileFromProps(result.propstat.prop, filename, isDetailed));\n    });\n    return response;\n}\n/**\n * Translate a disk quota indicator to a recognised\n *  value (includes \"unlimited\" and \"unknown\")\n * @param value The quota indicator, eg. \"-3\"\n * @returns The value in bytes, or another indicator\n */\nexport function translateDiskSpace(value) {\n    switch (String(value)) {\n        case \"-3\":\n            return \"unlimited\";\n        case \"-2\":\n        /* falls-through */\n        case \"-1\":\n            // -1 is non-computed\n            return \"unknown\";\n        default:\n            return parseInt(String(value), 10);\n    }\n}\n","import { assertError, isError } from \"./error.js\";\nimport { getGlobalName } from \"./global.js\";\nimport { parseArguments } from \"./tools.js\";\nexport class Layerr extends Error {\n    constructor(errorOptionsOrMessage, messageText) {\n        const args = [...arguments];\n        const { options, shortMessage } = parseArguments(args);\n        let message = shortMessage;\n        if (options.cause) {\n            message = `${message}: ${options.cause.message}`;\n        }\n        super(message);\n        this.message = message;\n        if (options.name && typeof options.name === \"string\") {\n            this.name = options.name;\n        }\n        else {\n            this.name = getGlobalName();\n        }\n        if (options.cause) {\n            Object.defineProperty(this, \"_cause\", { value: options.cause });\n        }\n        Object.defineProperty(this, \"_info\", { value: {} });\n        if (options.info && typeof options.info === \"object\") {\n            Object.assign(this._info, options.info);\n        }\n        if (Error.captureStackTrace) {\n            const ctor = options.constructorOpt || this.constructor;\n            Error.captureStackTrace(this, ctor);\n        }\n    }\n    static cause(err) {\n        assertError(err);\n        if (!err._cause)\n            return null;\n        return isError(err._cause)\n            ? err._cause\n            : null;\n    }\n    static fullStack(err) {\n        assertError(err);\n        const cause = Layerr.cause(err);\n        if (cause) {\n            return `${err.stack}\\ncaused by: ${Layerr.fullStack(cause)}`;\n        }\n        return err.stack ?? \"\";\n    }\n    static info(err) {\n        assertError(err);\n        const output = {};\n        const cause = Layerr.cause(err);\n        if (cause) {\n            Object.assign(output, Layerr.info(cause));\n        }\n        if (err._info) {\n            Object.assign(output, err._info);\n        }\n        return output;\n    }\n    toString() {\n        let output = this.name ||\n            this.constructor.name ||\n            this.constructor.prototype.name;\n        if (this.message) {\n            output = `${output}: ${this.message}`;\n        }\n        return output;\n    }\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { generateRemoteUrl } from '@nextcloud/router'\n\nconst getRootPath = function() {\n\treturn generateRemoteUrl('dav/comments')\n}\n\nexport { getRootPath }\n","/**\n * @copyright Copyright (c) 2021 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { createClient } from 'webdav'\nimport { getRootPath } from '../utils/davUtils.js'\nimport { getRequestToken, onRequestTokenUpdate } from '@nextcloud/auth'\n\n// init webdav client\nconst client = createClient(getRootPath())\n\n// set CSRF token header\nconst setHeaders = (token) => {\n  client.setHeaders({\n    // Add this so the server knows it is an request from the browser\n    'X-Requested-With': 'XMLHttpRequest',\n    // Inject user auth\n    requesttoken: token ?? '',\n  })\n}\n\n// refresh headers when request token changes\nonRequestTokenUpdate(setHeaders)\nsetHeaders(getRequestToken())\n\nexport default client\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { parseXML } from 'webdav';\n// https://github.com/perry-mitchell/webdav-client/issues/339\nimport { processResponsePayload } from 'webdav/dist/node/response.js';\nimport { prepareFileFromProps } from 'webdav/dist/node/tools/dav.js';\nimport client from './DavClient.js';\nexport const DEFAULT_LIMIT = 20;\n/**\n * Retrieve the comments list\n *\n * @param {object} data destructuring object\n * @param {string} data.resourceType the resource type\n * @param {number} data.resourceId the resource ID\n * @param {object} [options] optional options for axios\n * @param {number} [options.offset] the pagination offset\n * @param {number} [options.limit] the pagination limit, defaults to 20\n * @param {Date} [options.datetime] optional date to query\n * @return {{data: object[]}} the comments list\n */\nexport const getComments = async function ({ resourceType, resourceId }, options) {\n    const resourcePath = ['', resourceType, resourceId].join('/');\n    const datetime = options.datetime ? `<oc:datetime>${options.datetime.toISOString()}</oc:datetime>` : '';\n    const response = await client.customRequest(resourcePath, Object.assign({\n        method: 'REPORT',\n        data: `<?xml version=\"1.0\"?>\n\t\t\t<oc:filter-comments\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\"\n\t\t\t\txmlns:nc=\"http://nextcloud.org/ns\"\n\t\t\t\txmlns:ocs=\"http://open-collaboration-services.org/ns\">\n\t\t\t\t<oc:limit>${options.limit ?? DEFAULT_LIMIT}</oc:limit>\n\t\t\t\t<oc:offset>${options.offset || 0}</oc:offset>\n\t\t\t\t${datetime}\n\t\t\t</oc:filter-comments>`,\n    }, options));\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const stat = getDirectoryFiles(result, true);\n    return processResponsePayload(response, stat, true);\n};\n// https://github.com/perry-mitchell/webdav-client/blob/8d9694613c978ce7404e26a401c39a41f125f87f/source/operations/directoryContents.ts\nconst getDirectoryFiles = function (result, isDetailed = false) {\n    // Extract the response items (directory contents)\n    const { multistatus: { response: responseItems }, } = result;\n    // Map all items to a consistent output structure (results)\n    return responseItems.map(item => {\n        // Each item should contain a stat object\n        const props = item.propstat.prop;\n        return prepareFileFromProps(props, props.id.toString(), isDetailed);\n    });\n};\n","import { minimatch } from \"minimatch\";\nimport { convertResponseHeaders } from \"./tools/headers.js\";\nexport function createErrorFromResponse(response, prefix = \"\") {\n    const err = new Error(`${prefix}Invalid response: ${response.status} ${response.statusText}`);\n    err.status = response.status;\n    err.response = response;\n    return err;\n}\nexport function handleResponseCode(context, response) {\n    const { status } = response;\n    if (status === 401 && context.digest)\n        return response;\n    if (status >= 400) {\n        const err = createErrorFromResponse(response);\n        throw err;\n    }\n    return response;\n}\nexport function processGlobFilter(files, glob) {\n    return files.filter(file => minimatch(file.filename, glob, { matchBase: true }));\n}\n/**\n * Process a response payload (eg. from `customRequest`) and\n *  prepare it for further processing. Exposed for custom\n *  request handling.\n * @param response The response for a request\n * @param data The data returned\n * @param isDetailed Whether or not a detailed result is\n *  requested\n * @returns The response data, or a detailed response object\n *  if required\n */\nexport function processResponsePayload(response, data, isDetailed = false) {\n    return isDetailed\n        ? {\n            data,\n            headers: response.headers ? convertResponseHeaders(response.headers) : {},\n            status: response.status,\n            statusText: response.statusText\n        }\n        : data;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c(_vm.tag,{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.deleted && !_vm.isLimbo),expression:\"!deleted && !isLimbo\"}],tag:\"component\",staticClass:\"comment\",class:{'comment--loading': _vm.loading}},[_c('div',{staticClass:\"comment__side\"},[_c('NcAvatar',{staticClass:\"comment__avatar\",attrs:{\"display-name\":_vm.actorDisplayName,\"user\":_vm.actorId,\"size\":32}})],1),_vm._v(\" \"),_c('div',{staticClass:\"comment__body\"},[_c('div',{staticClass:\"comment__header\"},[_c('span',{staticClass:\"comment__author\"},[_vm._v(_vm._s(_vm.actorDisplayName))]),_vm._v(\" \"),(_vm.isOwnComment && _vm.id && !_vm.loading)?_c('NcActions',{staticClass:\"comment__actions\"},[(!_vm.editing)?[_c('NcActionButton',{attrs:{\"close-after-click\":\"\"},on:{\"click\":_vm.onEdit},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconEdit',{attrs:{\"size\":20}})]},proxy:true}],null,false,649782975)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Edit comment'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionSeparator'),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"close-after-click\":\"\"},on:{\"click\":_vm.onDeleteWithUndo},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDelete',{attrs:{\"size\":20}})]},proxy:true}],null,false,881161434)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Delete comment'))+\"\\n\\t\\t\\t\\t\\t\")])]:_c('NcActionButton',{on:{\"click\":_vm.onEditCancel},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconClose',{attrs:{\"size\":20}})]},proxy:true}],null,false,2888946197)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Cancel edit'))+\"\\n\\t\\t\\t\\t\")])],2):_vm._e(),_vm._v(\" \"),(_vm.id && _vm.loading)?_c('div',{staticClass:\"comment_loading icon-loading-small\"}):(_vm.creationDateTime)?_c('NcDateTime',{staticClass:\"comment__timestamp\",attrs:{\"timestamp\":_vm.timestamp,\"ignore-seconds\":true}}):_vm._e()],1),_vm._v(\" \"),(_vm.editor || _vm.editing)?_c('form',{staticClass:\"comment__editor\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"comment__editor-group\"},[_c('NcRichContenteditable',{ref:\"editor\",attrs:{\"auto-complete\":_vm.autoComplete,\"contenteditable\":!_vm.loading,\"label\":_vm.editor ? _vm.t('comments', 'New comment') : _vm.t('comments', 'Edit comment'),\"placeholder\":_vm.t('comments', 'Write a comment '),\"value\":_vm.localMessage,\"user-data\":_vm.userData,\"aria-describedby\":\"tab-comments__editor-description\"},on:{\"update:value\":_vm.updateLocalMessage,\"submit\":_vm.onSubmit}}),_vm._v(\" \"),_c('div',{staticClass:\"comment__submit\"},[_c('NcButton',{attrs:{\"type\":\"tertiary-no-background\",\"native-type\":\"submit\",\"aria-label\":_vm.t('comments', 'Post comment'),\"disabled\":_vm.isEmptyMessage},on:{\"click\":_vm.onSubmit},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('NcLoadingIcon'):_c('IconArrowRight',{attrs:{\"size\":20}})]},proxy:true}],null,false,758946661)})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"comment__editor-description\",attrs:{\"id\":\"tab-comments__editor-description\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', '@ for mentions, : for emoji, / for smart picker'))+\"\\n\\t\\t\\t\")])]):_c('div',{staticClass:\"comment__message\",class:{'comment__message--expanded': _vm.expanded},domProps:{\"innerHTML\":_vm._s(_vm.renderedContent)},on:{\"click\":_vm.onExpand}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2021 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @param {any} value -\n * @param {any} passes -\n */\nexport function decodeHtmlEntities(value, passes = 1) {\n\tconst parser = new DOMParser()\n\tlet decoded = value\n\tfor (let i = 0; i < passes; i++) {\n\t\tdecoded = parser.parseFromString(decoded, 'text/html').documentElement.textContent\n\t}\n\treturn decoded\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { defineStore } from 'pinia'\n\nexport const useDeletedCommentLimbo = defineStore('deletedCommentLimbo', {\n\tstate: () => ({\n\t\tidsInLimbo: [],\n\t}),\n\tactions: {\n\t\taddId(id) {\n\t\t\tthis.idsInLimbo.push(id)\n\t\t},\n\n\t\tremoveId(id) {\n\t\t\tconst index = this.idsInLimbo.indexOf(id)\n\t\t\tif (index > -1) {\n\t\t\t\tthis.idsInLimbo.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\tcheckForId(id) {\n\t\t\tthis.idsInLimbo.includes(id)\n\t\t},\n\t},\n})\n","/**\n * @copyright Copyright (c) 2023 Lucas Azevedo <lhs_azevedo@hotmail.com>\n *\n * @author Lucas Azevedo <lhs_azevedo@hotmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nexport default getLoggerBuilder()\n\t.setApp('comments')\n\t.detectUser()\n\t.build()\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { showError, showUndo, TOAST_UNDO_TIMEOUT } from '@nextcloud/dialogs'\nimport NewComment from '../services/NewComment.js'\nimport DeleteComment from '../services/DeleteComment.js'\nimport EditComment from '../services/EditComment.js'\nimport { mapStores } from 'pinia'\nimport { useDeletedCommentLimbo } from '../store/deletedCommentLimbo.js'\nimport logger from '../logger.js'\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tresourceId: {\n\t\t\ttype: [String, Number],\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'files',\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tdeleted: false,\n\t\t\tediting: false,\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapStores(useDeletedCommentLimbo),\n\t},\n\n\tmethods: {\n\t\t// EDITION\n\t\tonEdit() {\n\t\t\tthis.editing = true\n\t\t},\n\t\tonEditCancel() {\n\t\t\tthis.editing = false\n\t\t\t// Restore original value\n\t\t\tthis.updateLocalMessage(this.message)\n\t\t},\n\t\tasync onEditComment(message) {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tawait EditComment(this.resourceType, this.resourceId, this.id, message)\n\t\t\t\tlogger.debug('Comment edited', { resourceType: this.resourceType, resourceId: this.resourceId, id: this.id, message })\n\t\t\t\tthis.$emit('update:message', message)\n\t\t\t\tthis.editing = false\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to edit the comment'))\n\t\t\t\tconsole.error(error)\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t// DELETION\n\t\tonDeleteWithUndo() {\n\t\t\tthis.$emit('delete')\n\t\t\tthis.deleted = true\n\t\t\tthis.deletedCommentLimboStore.addId(this.id)\n\t\t\tconst timeOutDelete = setTimeout(this.onDelete, TOAST_UNDO_TIMEOUT)\n\t\t\tshowUndo(t('comments', 'Comment deleted'), () => {\n\t\t\t\tclearTimeout(timeOutDelete)\n\t\t\t\tthis.deleted = false\n\t\t\t\tthis.deletedCommentLimboStore.removeId(this.id)\n\t\t\t})\n\t\t},\n\t\tasync onDelete() {\n\t\t\ttry {\n\t\t\t\tawait DeleteComment(this.resourceType, this.resourceId, this.id)\n\t\t\t\tlogger.debug('Comment deleted', { resourceType: this.resourceType, resourceId: this.resourceId, id: this.id })\n\t\t\t\tthis.$emit('delete', this.id)\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to delete the comment'))\n\t\t\t\tconsole.error(error)\n\t\t\t\tthis.deleted = false\n\t\t\t\tthis.deletedCommentLimboStore.removeId(this.id)\n\t\t\t}\n\t\t},\n\n\t\t// CREATION\n\t\tasync onNewComment(message) {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst newComment = await NewComment(this.resourceType, this.resourceId, message)\n\t\t\t\tlogger.debug('New comment posted', { resourceType: this.resourceType, resourceId: this.resourceId, newComment })\n\t\t\t\tthis.$emit('new', newComment)\n\n\t\t\t\t// Clear old content\n\t\t\t\tthis.$emit('update:message', '')\n\t\t\t\tthis.localMessage = ''\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to create the comment'))\n\t\t\t\tconsole.error(error)\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport client from './DavClient.js'\n\n/**\n * Edit an existing comment\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {number} commentId the comment iD\n * @param {string} message the message content\n */\nexport default async function(resourceType, resourceId, commentId, message) {\n\tconst commentPath = ['', resourceType, resourceId, commentId].join('/')\n\n\treturn await client.customRequest(commentPath, Object.assign({\n\t\tmethod: 'PROPPATCH',\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:message>${message}</oc:message>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`,\n\t}))\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport client from './DavClient.js'\n\n/**\n * Delete a comment\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {number} commentId the comment iD\n */\nexport default async function(resourceType, resourceId, commentId) {\n\tconst commentPath = ['', resourceType, resourceId, commentId].join('/')\n\n\t// Fetch newly created comment data\n\tawait client.deleteFile(commentPath)\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { getRootPath } from '../utils/davUtils.js'\nimport { decodeHtmlEntities } from '../utils/decodeHtmlEntities.js'\nimport axios from '@nextcloud/axios'\nimport client from './DavClient.js'\n\n/**\n * Retrieve the comments list\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {string} message the message\n * @return {object} the new comment\n */\nexport default async function(resourceType, resourceId, message) {\n\tconst resourcePath = ['', resourceType, resourceId].join('/')\n\n\tconst response = await axios.post(getRootPath() + resourcePath, {\n\t\tactorDisplayName: getCurrentUser().displayName,\n\t\tactorId: getCurrentUser().uid,\n\t\tactorType: 'users',\n\t\tcreationDateTime: (new Date()).toUTCString(),\n\t\tmessage,\n\t\tobjectType: resourceType,\n\t\tverb: 'comment',\n\t})\n\n\t// Retrieve comment id from resource location\n\tconst commentId = parseInt(response.headers['content-location'].split('/').pop())\n\tconst commentPath = resourcePath + '/' + commentId\n\n\t// Fetch newly created comment data\n\tconst comment = await client.stat(commentPath, {\n\t\tdetails: true,\n\t})\n\n\tconst props = comment.data.props\n\t// Decode twice to handle potentially double-encoded entities\n\t// FIXME Remove this once https://github.com/nextcloud/server/issues/29306\n\t// is resolved\n\tprops.actorDisplayName = decodeHtmlEntities(props.actorDisplayName, 2)\n\tprops.message = decodeHtmlEntities(props.message, 2)\n\n\treturn comment.data\n}\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<component :is=\"tag\"\n\t\tv-show=\"!deleted && !isLimbo\"\n\t\t:class=\"{'comment--loading': loading}\"\n\t\tclass=\"comment\">\n\t\t<!-- Comment header toolbar -->\n\t\t<div class=\"comment__side\">\n\t\t\t<!-- Author -->\n\t\t\t<NcAvatar class=\"comment__avatar\"\n\t\t\t\t:display-name=\"actorDisplayName\"\n\t\t\t\t:user=\"actorId\"\n\t\t\t\t:size=\"32\" />\n\t\t</div>\n\t\t<div class=\"comment__body\">\n\t\t\t<div class=\"comment__header\">\n\t\t\t\t<span class=\"comment__author\">{{ actorDisplayName }}</span>\n\n\t\t\t\t<!-- Comment actions,\n\t\t\t\t\tshow if we have a message id and current user is author -->\n\t\t\t\t<NcActions v-if=\"isOwnComment && id && !loading\" class=\"comment__actions\">\n\t\t\t\t\t<template v-if=\"!editing\">\n\t\t\t\t\t\t<NcActionButton close-after-click\n\t\t\t\t\t\t\t@click=\"onEdit\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconEdit :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('comments', 'Edit comment') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionSeparator />\n\t\t\t\t\t\t<NcActionButton close-after-click\n\t\t\t\t\t\t\t@click=\"onDeleteWithUndo\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('comments', 'Delete comment') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<NcActionButton v-else @click=\"onEditCancel\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconClose :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('comments', 'Cancel edit') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</NcActions>\n\n\t\t\t\t<!-- Show loading if we're editing or deleting, not on new ones -->\n\t\t\t\t<div v-if=\"id && loading\" class=\"comment_loading icon-loading-small\" />\n\n\t\t\t\t<!-- Relative time to the comment creation -->\n\t\t\t\t<NcDateTime v-else-if=\"creationDateTime\"\n\t\t\t\t\tclass=\"comment__timestamp\"\n\t\t\t\t\t:timestamp=\"timestamp\"\n\t\t\t\t\t:ignore-seconds=\"true\" />\n\t\t\t</div>\n\n\t\t\t<!-- Message editor -->\n\t\t\t<form v-if=\"editor || editing\" class=\"comment__editor\" @submit.prevent>\n\t\t\t\t<div class=\"comment__editor-group\">\n\t\t\t\t\t<NcRichContenteditable ref=\"editor\"\n\t\t\t\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t\t\t\t:contenteditable=\"!loading\"\n\t\t\t\t\t\t:label=\"editor ? t('comments', 'New comment') : t('comments', 'Edit comment')\"\n\t\t\t\t\t\t:placeholder=\"t('comments', 'Write a comment ')\"\n\t\t\t\t\t\t:value=\"localMessage\"\n\t\t\t\t\t\t:user-data=\"userData\"\n\t\t\t\t\t\taria-describedby=\"tab-comments__editor-description\"\n\t\t\t\t\t\t@update:value=\"updateLocalMessage\"\n\t\t\t\t\t\t@submit=\"onSubmit\" />\n\t\t\t\t\t<div class=\"comment__submit\">\n\t\t\t\t\t\t<NcButton type=\"tertiary-no-background\"\n\t\t\t\t\t\t\tnative-type=\"submit\"\n\t\t\t\t\t\t\t:aria-label=\"t('comments', 'Post comment')\"\n\t\t\t\t\t\t\t:disabled=\"isEmptyMessage\"\n\t\t\t\t\t\t\t@click=\"onSubmit\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" />\n\t\t\t\t\t\t\t\t<IconArrowRight v-else :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"tab-comments__editor-description\" class=\"comment__editor-description\">\n\t\t\t\t\t{{ t('comments', '@ for mentions, : for emoji, / for smart picker') }}\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<!-- Message content -->\n\t\t\t<!-- The html is escaped and sanitized before rendering -->\n\t\t\t<!-- eslint-disable vue/no-v-html-->\n\t\t\t<div v-else\n\t\t\t\t:class=\"{'comment__message--expanded': expanded}\"\n\t\t\t\tclass=\"comment__message\"\n\t\t\t\t@click=\"onExpand\"\n\t\t\t\tv-html=\"renderedContent\" />\n\t\t\t<!-- eslint-enable vue/no-v-html-->\n\t\t</div>\n\t</component>\n</template>\n\n<script>\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton.js'\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions.js'\nimport NcActionSeparator from '@nextcloud/vue/dist/Components/NcActionSeparator.js'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcDateTime from '@nextcloud/vue/dist/Components/NcDateTime.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport RichEditorMixin from '@nextcloud/vue/dist/Mixins/richEditor.js'\n\nimport IconArrowRight from 'vue-material-design-icons/ArrowRight.vue'\nimport IconClose from 'vue-material-design-icons/Close.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconEdit from 'vue-material-design-icons/Pencil.vue'\n\nimport CommentMixin from '../mixins/CommentMixin.js'\nimport { mapStores } from 'pinia'\nimport { useDeletedCommentLimbo } from '../store/deletedCommentLimbo.js'\n\n// Dynamic loading\nconst NcRichContenteditable = () => import('@nextcloud/vue/dist/Components/NcRichContenteditable.js')\n\nexport default {\n\tname: 'Comment',\n\n\tcomponents: {\n\t\tIconArrowRight,\n\t\tIconClose,\n\t\tIconDelete,\n\t\tIconEdit,\n\t\tNcActionButton,\n\t\tNcActions,\n\t\tNcActionSeparator,\n\t\tNcAvatar,\n\t\tNcButton,\n\t\tNcDateTime,\n\t\tNcLoadingIcon,\n\t\tNcRichContenteditable,\n\t},\n\tmixins: [RichEditorMixin, CommentMixin],\n\n\tinheritAttrs: false,\n\n\tprops: {\n\t\tactorDisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tactorId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcreationDateTime: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\n\t\t/**\n\t\t * Force the editor display\n\t\t */\n\t\teditor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\t/**\n\t\t * Provide the autocompletion data\n\t\t */\n\t\tautoComplete: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\n\t\ttag: {\n\t\t\ttype: String,\n\t\t\tdefault: 'div',\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\texpanded: false,\n\t\t\t// Only change data locally and update the original\n\t\t\t// parent data when the request is sent and resolved\n\t\t\tlocalMessage: '',\n\t\t\tsubmitted: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapStores(useDeletedCommentLimbo),\n\n\t\t/**\n\t\t * Is the current user the author of this comment\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisOwnComment() {\n\t\t\treturn getCurrentUser().uid === this.actorId\n\t\t},\n\n\t\t/**\n\t\t * Rendered content as html string\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\trenderedContent() {\n\t\t\tif (this.isEmptyMessage) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn this.renderContent(this.localMessage)\n\t\t},\n\n\t\tisEmptyMessage() {\n\t\t\treturn !this.localMessage || this.localMessage.trim() === ''\n\t\t},\n\n\t\t/**\n\t\t * Timestamp of the creation time (in ms UNIX time)\n\t\t */\n\t\ttimestamp() {\n\t\t\treturn Date.parse(this.creationDateTime)\n\t\t},\n\n\t\tisLimbo() {\n\t\t\treturn this.deletedCommentLimboStore.checkForId(this.id)\n\t\t},\n\t},\n\n\twatch: {\n\t\t// If the data change, update the local value\n\t\tmessage(message) {\n\t\t\tthis.updateLocalMessage(message)\n\t\t},\n\t},\n\n\tbeforeMount() {\n\t\t// Init localMessage\n\t\tthis.updateLocalMessage(this.message)\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Update local Message on outer change\n\t\t *\n\t\t * @param {string} message the message to set\n\t\t */\n\t\tupdateLocalMessage(message) {\n\t\t\tthis.localMessage = message.toString()\n\t\t\tthis.submitted = false\n\t\t},\n\n\t\t/**\n\t\t * Dispatch message between edit and create\n\t\t */\n\t\tonSubmit() {\n\t\t\t// Do not submit if message is empty\n\t\t\tif (this.localMessage.trim() === '') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.editor) {\n\t\t\t\tthis.onNewComment(this.localMessage.trim())\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// Focus the editor again\n\t\t\t\t\tthis.$refs.editor.$el.focus()\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.onEditComment(this.localMessage.trim())\n\t\t},\n\n\t\tonExpand() {\n\t\t\tthis.expanded = true\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n\n$comment-padding: 10px;\n\n.comment {\n\tdisplay: flex;\n\tgap: 8px;\n\tpadding: 5px $comment-padding;\n\n\t&__side {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tpadding-top: 6px;\n\t}\n\n\t&__body {\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t\tflex-direction: column;\n\t}\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmin-height: 44px;\n\t}\n\n\t&__actions {\n\t\tmargin-left: $comment-padding !important;\n\t}\n\n\t&__author {\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&_loading,\n\t&__timestamp {\n\t\tmargin-left: auto;\n\t\ttext-align: right;\n\t\twhite-space: nowrap;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__editor-group {\n\t\tposition: relative;\n\t}\n\n\t&__editor-description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-block: var(--default-grid-baseline);\n\t}\n\n\t&__submit {\n\t\tposition: absolute !important;\n\t\tbottom: 5px;\n\t\tright: 0;\n\t}\n\n\t&__message {\n\t\twhite-space: pre-wrap;\n\t\tword-break: break-word;\n\t\tmax-height: 70px;\n\t\toverflow: hidden;\n\t\tmargin-top: -6px;\n\t\t&--expanded {\n\t\t\tmax-height: none;\n\t\t\toverflow: visible;\n\t\t}\n\t}\n}\n\n.rich-contenteditable__input {\n\tmin-height: 44px;\n\tmargin: 0;\n\tpadding: $comment-padding;\n}\n\n</style>\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=6f6ef97e&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=6f6ef97e&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=6f6ef97e&scoped=true\"\nimport script from \"./Comment.vue?vue&type=script&lang=js\"\nexport * from \"./Comment.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=6f6ef97e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f6ef97e\",\n  null\n  \n)\n\nexport default component.exports","import axios from '@nextcloud/axios';\nimport { getCurrentUser } from '@nextcloud/auth';\nimport { loadState } from '@nextcloud/initial-state';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport { defineComponent } from 'vue';\nexport default defineComponent({\n    props: {\n        resourceId: {\n            type: Number,\n            required: true,\n        },\n        resourceType: {\n            type: String,\n            default: 'files',\n        },\n    },\n    data() {\n        return {\n            editorData: {\n                actorDisplayName: getCurrentUser().displayName,\n                actorId: getCurrentUser().uid,\n                key: 'editor',\n            },\n            userData: {},\n        };\n    },\n    methods: {\n        /**\n         * Autocomplete @mentions\n         *\n         * @param {string} search the query\n         * @param {Function} callback the callback to process the results with\n         */\n        async autoComplete(search, callback) {\n            const { data } = await axios.get(generateOcsUrl('core/autocomplete/get'), {\n                params: {\n                    search,\n                    itemType: 'files',\n                    itemId: this.resourceId,\n                    sorter: 'commenters|share-recipients',\n                    limit: loadState('comments', 'maxAutoCompleteResults'),\n                },\n            });\n            // Save user data so it can be used by the editor to replace mentions\n            data.ocs.data.forEach(user => { this.userData[user.id] = user; });\n            return callback(Object.values(this.userData));\n        },\n        /**\n         * Make sure we have all mentions as Array of objects\n         *\n         * @param mentions the mentions list\n         */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        genMentionsData(mentions) {\n            Object.values(mentions)\n                .flat()\n                .forEach(mention => {\n                this.userData[mention.mentionId] = {\n                    // TODO: support groups\n                    icon: 'icon-user',\n                    id: mention.mentionId,\n                    label: mention.mentionDisplayName,\n                    source: 'users',\n                    primary: getCurrentUser()?.uid === mention.mentionId,\n                };\n            });\n            return this.userData;\n        },\n    },\n});\n","<!--\n  - @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvo <skjnldsv@protonmail.com>\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div v-observe-visibility=\"onVisibilityChange\"\n\t\tclass=\"comments\"\n\t\t:class=\"{ 'icon-loading': isFirstLoading }\">\n\t\t<!-- Editor -->\n\t\t<Comment v-bind=\"editorData\"\n\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t:resource-type=\"resourceType\"\n\t\t\t:editor=\"true\"\n\t\t\t:user-data=\"userData\"\n\t\t\t:resource-id=\"currentResourceId\"\n\t\t\tclass=\"comments__writer\"\n\t\t\t@new=\"onNewComment\" />\n\n\t\t<template v-if=\"!isFirstLoading\">\n\t\t\t<NcEmptyContent v-if=\"!hasComments && done\"\n\t\t\t\tclass=\"comments__empty\"\n\t\t\t\t:name=\"t('comments', 'No comments yet, start the conversation!')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<MessageReplyTextIcon />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t\t<ul v-else>\n\t\t\t\t<!-- Comments -->\n\t\t\t\t<Comment v-for=\"comment in comments\"\n\t\t\t\t\t:key=\"comment.props.id\"\n\t\t\t\t\ttag=\"li\"\n\t\t\t\t\tv-bind=\"comment.props\"\n\t\t\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t\t\t:resource-type=\"resourceType\"\n\t\t\t\t\t:message.sync=\"comment.props.message\"\n\t\t\t\t\t:resource-id=\"currentResourceId\"\n\t\t\t\t\t:user-data=\"genMentionsData(comment.props.mentions)\"\n\t\t\t\t\tclass=\"comments__list\"\n\t\t\t\t\t@delete=\"onDelete\" />\n\t\t\t</ul>\n\n\t\t\t<!-- Loading more message -->\n\t\t\t<div v-if=\"loading && !isFirstLoading\" class=\"comments__info icon-loading\" />\n\n\t\t\t<div v-else-if=\"hasComments && done\" class=\"comments__info\">\n\t\t\t\t{{ t('comments', 'No more messages') }}\n\t\t\t</div>\n\n\t\t\t<!-- Error message -->\n\t\t\t<template v-else-if=\"error\">\n\t\t\t\t<NcEmptyContent class=\"comments__error\" :name=\"error\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AlertCircleOutlineIcon />\n\t\t\t\t\t</template>\n\t\t\t\t</NcEmptyContent>\n\t\t\t\t<NcButton class=\"comments__retry\" @click=\"getComments\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<RefreshIcon />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('comments', 'Retry') }}\n\t\t\t\t</NcButton>\n\t\t\t</template>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { vElementVisibility as elementVisibility } from '@vueuse/components'\nimport VTooltip from 'v-tooltip'\nimport Vue from 'vue'\nimport VueObserveVisibility from 'vue-observe-visibility'\n\nimport AlertCircleOutlineIcon from 'vue-material-design-icons/AlertCircleOutline.vue'\nimport MessageReplyTextIcon from 'vue-material-design-icons/MessageReplyText.vue'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcEmptyContent from '@nextcloud/vue/dist/Components/NcEmptyContent.js'\nimport RefreshIcon from 'vue-material-design-icons/Refresh.vue'\n\nimport { getComments, DEFAULT_LIMIT } from '../services/GetComments.ts'\nimport { markCommentsAsRead } from '../services/ReadComments.ts'\nimport cancelableRequest from '../utils/cancelableRequest.js'\nimport Comment from '../components/Comment.vue'\nimport CommentView from '../mixins/CommentView'\n\nVue.use(VTooltip)\nVue.use(VueObserveVisibility)\n\nexport default {\n\tname: 'Comments',\n\n\tcomponents: {\n\t\tComment,\n\t\tNcEmptyContent,\n\t\tNcButton,\n\t\tRefreshIcon,\n\t\tMessageReplyTextIcon,\n\t\tAlertCircleOutlineIcon,\n\t},\n\n\tdirectives: {\n\t\telementVisibility,\n\t},\n\n\tmixins: [CommentView],\n\n\tdata() {\n\t\treturn {\n\t\t\terror: '',\n\t\t\tloading: false,\n\t\t\tdone: false,\n\n\t\t\tcurrentResourceId: this.resourceId,\n\t\t\toffset: 0,\n\t\t\tcomments: [],\n\n\t\t\tcancelRequest: () => {},\n\n\t\t\tComment,\n\t\t\tuserData: {},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasComments() {\n\t\t\treturn this.comments.length > 0\n\t\t},\n\t\tisFirstLoading() {\n\t\t\treturn this.loading && this.offset === 0\n\t\t},\n\t},\n\n\twatch: {\n\t\tresourceId() {\n\t\t\tthis.currentResourceId = this.resourceId\n\t\t},\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\tasync onVisibilityChange(isVisible) {\n\t\t\tif (isVisible) {\n\t\t\t\ttry {\n\t\t\t\t\tawait markCommentsAsRead(this.resourceType, this.currentResourceId, new Date())\n\t\t\t\t} catch (e) {\n\t\t\t\t\tshowError(e.message || t('comments', 'Failed to mark comments as read'))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update current resourceId and fetch new data\n\t\t *\n\t\t * @param {number} resourceId the current resourceId (fileId...)\n\t\t */\n\t\tasync update(resourceId) {\n\t\t\tthis.currentResourceId = resourceId\n\t\t\tthis.resetState()\n\t\t\tthis.getComments()\n\t\t},\n\n\t\t/**\n\t\t * Ran when the bottom of the tab is reached\n\t\t */\n\t\tonScrollBottomReached() {\n\t\t\t/**\n\t\t\t * Do not fetch more if we:\n\t\t\t * - are showing an error\n\t\t\t * - already fetched everything\n\t\t\t * - are currently loading\n\t\t\t */\n\t\t\tif (this.error || this.done || this.loading) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.getComments()\n\t\t},\n\n\t\t/**\n\t\t * Get the existing shares infos\n\t\t */\n\t\tasync getComments() {\n\t\t\t// Cancel any ongoing request\n\t\t\tthis.cancelRequest('cancel')\n\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.error = ''\n\n\t\t\t\t// Init cancellable request\n\t\t\t\tconst { request, abort } = cancelableRequest(getComments)\n\t\t\t\tthis.cancelRequest = abort\n\n\t\t\t\t// Fetch comments\n\t\t\t\tconst { data: comments } = await request({\n\t\t\t\t\tresourceType: this.resourceType,\n\t\t\t\t\tresourceId: this.currentResourceId,\n\t\t\t\t}, { offset: this.offset }) || { data: [] }\n\n\t\t\t\tthis.logger.debug(`Processed ${comments.length} comments`, { comments })\n\n\t\t\t\t// We received less than the requested amount,\n\t\t\t\t// we're done fetching comments\n\t\t\t\tif (comments.length < DEFAULT_LIMIT) {\n\t\t\t\t\tthis.done = true\n\t\t\t\t}\n\n\t\t\t\t// Insert results\n\t\t\t\tthis.comments.push(...comments)\n\n\t\t\t\t// Increase offset for next fetch\n\t\t\t\tthis.offset += DEFAULT_LIMIT\n\t\t\t} catch (error) {\n\t\t\t\tif (error.message === 'cancel') {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.error = t('comments', 'Unable to load the comments list')\n\t\t\t\tconsole.error('Error loading the comments list', error)\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Add newly created comment to the list\n\t\t *\n\t\t * @param {object} comment the new comment\n\t\t */\n\t\tonNewComment(comment) {\n\t\t\tthis.comments.unshift(comment)\n\t\t},\n\n\t\t/**\n\t\t * Remove deleted comment from the list\n\t\t *\n\t\t * @param {number} id the deleted comment\n\t\t */\n\t\tonDelete(id) {\n\t\t\tconst index = this.comments.findIndex(comment => comment.props.id === id)\n\t\t\tif (index > -1) {\n\t\t\t\tthis.comments.splice(index, 1)\n\t\t\t} else {\n\t\t\t\tconsole.error('Could not find the deleted comment in the list', id)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset the current view to its default state\n\t\t */\n\t\tresetState() {\n\t\t\tthis.error = ''\n\t\t\tthis.loading = false\n\t\t\tthis.done = false\n\t\t\tthis.offset = 0\n\t\t\tthis.comments = []\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.comments {\n\tmin-height: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__empty,\n\t&__error {\n\t\tflex: 1 0;\n\t}\n\n\t&__retry {\n\t\tmargin: 0 auto;\n\t}\n\n\t&__info {\n\t\theight: 60px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tline-height: 60px;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"","/**\n * @copyright 2023 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport client from './DavClient.js';\n/**\n * Mark comments older than the date timestamp as read\n *\n * @param resourceType the resource type\n * @param resourceId the resource ID\n * @param date the date object\n */\nexport const markCommentsAsRead = (resourceType, resourceId, date) => {\n    const resourcePath = ['', resourceType, resourceId].join('/');\n    const readMarker = date.toUTCString();\n    return client.customRequest(resourcePath, {\n        method: 'PROPPATCH',\n        data: `<?xml version=\"1.0\"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:readMarker>${readMarker}</oc:readMarker>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`,\n    });\n};\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * Creates a cancelable axios 'request object'.\n *\n * @param {Function} request the axios promise request\n * @return {object}\n */\nconst cancelableRequest = function(request) {\n\tconst controller = new AbortController()\n\tconst signal = controller.signal\n\n\t/**\n\t * Execute the request\n\t *\n\t * @param {string} url the url to send the request to\n\t * @param {object} [options] optional config for the request\n\t */\n\tconst fetch = async function(url, options) {\n\t\tconst response = await request(\n\t\t\turl,\n\t\t\tObject.assign({ signal }, options)\n\t\t)\n\t\treturn response\n\t}\n\n\treturn {\n\t\trequest: fetch,\n\t\tabort: () => controller.abort(),\n\t}\n}\n\nexport default cancelableRequest\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=style&index=0&id=222c65b2&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=style&index=0&id=222c65b2&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Comments.vue?vue&type=template&id=222c65b2&scoped=true\"\nimport script from \"./Comments.vue?vue&type=script&lang=js\"\nexport * from \"./Comments.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comments.vue?vue&type=style&index=0&id=222c65b2&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"222c65b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"observe-visibility\",rawName:\"v-observe-visibility\",value:(_vm.onVisibilityChange),expression:\"onVisibilityChange\"}],staticClass:\"comments\",class:{ 'icon-loading': _vm.isFirstLoading }},[_c('Comment',_vm._b({staticClass:\"comments__writer\",attrs:{\"auto-complete\":_vm.autoComplete,\"resource-type\":_vm.resourceType,\"editor\":true,\"user-data\":_vm.userData,\"resource-id\":_vm.currentResourceId},on:{\"new\":_vm.onNewComment}},'Comment',_vm.editorData,false)),_vm._v(\" \"),(!_vm.isFirstLoading)?[(!_vm.hasComments && _vm.done)?_c('NcEmptyContent',{staticClass:\"comments__empty\",attrs:{\"name\":_vm.t('comments', 'No comments yet, start the conversation!')},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('MessageReplyTextIcon')]},proxy:true}],null,false,1033639148)}):_c('ul',_vm._l((_vm.comments),function(comment){return _c('Comment',_vm._b({key:comment.props.id,staticClass:\"comments__list\",attrs:{\"tag\":\"li\",\"auto-complete\":_vm.autoComplete,\"resource-type\":_vm.resourceType,\"message\":comment.props.message,\"resource-id\":_vm.currentResourceId,\"user-data\":_vm.genMentionsData(comment.props.mentions)},on:{\"update:message\":function($event){return _vm.$set(comment.props, \"message\", $event)},\"delete\":_vm.onDelete}},'Comment',comment.props,false))}),1),_vm._v(\" \"),(_vm.loading && !_vm.isFirstLoading)?_c('div',{staticClass:\"comments__info icon-loading\"}):(_vm.hasComments && _vm.done)?_c('div',{staticClass:\"comments__info\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('comments', 'No more messages'))+\"\\n\\t\\t\")]):(_vm.error)?[_c('NcEmptyContent',{staticClass:\"comments__error\",attrs:{\"name\":_vm.error},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlertCircleOutlineIcon')]},proxy:true}],null,false,66050004)}),_vm._v(\" \"),_c('NcButton',{staticClass:\"comments__retry\",on:{\"click\":_vm.getComments},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('RefreshIcon')]},proxy:true}],null,false,3924573781)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Retry'))+\"\\n\\t\\t\\t\")])]:_vm._e()]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getRequestToken } from '@nextcloud/auth'\nimport { t, n } from '@nextcloud/l10n'\nimport { PiniaVuePlugin, createPinia } from 'pinia'\nimport Vue from 'vue'\nimport CommentsApp from '../views/Comments.vue'\nimport logger from '../logger.js'\n\nVue.use(PiniaVuePlugin)\n// eslint-disable-next-line camelcase\n__webpack_nonce__ = btoa(getRequestToken())\n\n// Add translates functions\nVue.mixin({\n\tdata() {\n\t\treturn {\n\t\t\tlogger,\n\t\t}\n\t},\n\tmethods: {\n\t\tt,\n\t\tn,\n\t},\n})\n\nexport default class CommentInstance {\n\n\t/**\n\t * Initialize a new Comments instance for the desired type\n\t *\n\t * @param {string} resourceType the comments endpoint type\n\t * @param  {object} options the vue options (propsData, parent, el...)\n\t */\n\tconstructor(resourceType = 'files', options = {}) {\n\t\tconst pinia = createPinia()\n\n\t\t// Merge options and set `resourceType` property\n\t\toptions = {\n\t\t\t...options,\n\t\t\tpropsData: {\n\t\t\t\t...(options.propsData ?? {}),\n\t\t\t\tresourceType,\n\t\t\t},\n\t\t\tpinia,\n\t\t}\n\t\t// Init Comments component\n\t\tconst View = Vue.extend(CommentsApp)\n\t\treturn new View(options)\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvo <skjnldsv@protonmail.com>\n *\n * @author John Molakvo <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport CommentsInstance from './services/CommentsInstance.js'\n\n// Init Comments\nif (window.OCA && !window.OCA.Comments) {\n\tObject.assign(window.OCA, { Comments: {} })\n}\n\n// Init Comments App view\nObject.assign(window.OCA.Comments, { View: CommentsInstance })\nconsole.debug('OCA.Comments.View initialized')\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","var balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m) return [str];\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  if (/\\$$/.test(m.pre)) {    \n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre+ '{' + m.body + '}' + post[k];\n      expansions.push(expansion);\n    }\n  } else {\n    var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isSequence = isNumericSequence || isAlphaSequence;\n    var isOptions = m.body.indexOf(',') >= 0;\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,.*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post;\n        return expand(str);\n      }\n      return [str];\n    }\n\n    var n;\n    if (isSequence) {\n      n = m.body.split(/\\.\\./);\n    } else {\n      n = parseCommaParts(m.body);\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace);\n        if (n.length === 1) {\n          return post.map(function(p) {\n            return m.pre + n[0] + p;\n          });\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    var N;\n\n    if (isSequence) {\n      var x = numeric(n[0]);\n      var y = numeric(n[1]);\n      var width = Math.max(n[0].length, n[1].length)\n      var incr = n.length == 3\n        ? Math.abs(numeric(n[2]))\n        : 1;\n      var test = lte;\n      var reverse = y < x;\n      if (reverse) {\n        incr *= -1;\n        test = gte;\n      }\n      var pad = n.some(isPadded);\n\n      N = [];\n\n      for (var i = x; test(i, y); i += incr) {\n        var c;\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i);\n          if (c === '\\\\')\n            c = '';\n        } else {\n          c = String(i);\n          if (pad) {\n            var need = width - c.length;\n            if (need > 0) {\n              var z = new Array(need + 1).join('0');\n              if (i < 0)\n                c = '-' + z + c.slice(1);\n              else\n                c = z + c;\n            }\n          }\n        }\n        N.push(c);\n      }\n    } else {\n      N = [];\n\n      for (var j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false));\n      }\n    }\n\n    for (var j = 0; j < N.length; j++) {\n      for (var k = 0; k < post.length; k++) {\n        var expansion = pre + N[j] + post[k];\n        if (!isTop || isSequence || expansion)\n          expansions.push(expansion);\n      }\n    }\n  }\n\n  return expansions;\n}\n\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.comment[data-v-6f6ef97e]{display:flex;gap:8px;padding:5px 10px}.comment__side[data-v-6f6ef97e]{display:flex;align-items:flex-start;padding-top:6px}.comment__body[data-v-6f6ef97e]{display:flex;flex-grow:1;flex-direction:column}.comment__header[data-v-6f6ef97e]{display:flex;align-items:center;min-height:44px}.comment__actions[data-v-6f6ef97e]{margin-left:10px !important}.comment__author[data-v-6f6ef97e]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:var(--color-text-maxcontrast)}.comment_loading[data-v-6f6ef97e],.comment__timestamp[data-v-6f6ef97e]{margin-left:auto;text-align:right;white-space:nowrap;color:var(--color-text-maxcontrast)}.comment__editor-group[data-v-6f6ef97e]{position:relative}.comment__editor-description[data-v-6f6ef97e]{color:var(--color-text-maxcontrast);padding-block:var(--default-grid-baseline)}.comment__submit[data-v-6f6ef97e]{position:absolute !important;bottom:5px;right:0}.comment__message[data-v-6f6ef97e]{white-space:pre-wrap;word-break:break-word;max-height:70px;overflow:hidden;margin-top:-6px}.comment__message--expanded[data-v-6f6ef97e]{max-height:none;overflow:visible}.rich-contenteditable__input[data-v-6f6ef97e]{min-height:44px;margin:0;padding:10px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/comments/src/components/Comment.vue\"],\"names\":[],\"mappings\":\"AAKA,0BACC,YAAA,CACA,OAAA,CACA,gBAAA,CAEA,gCACC,YAAA,CACA,sBAAA,CACA,eAAA,CAGD,gCACC,YAAA,CACA,WAAA,CACA,qBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAGD,mCACC,2BAAA,CAGD,kCACC,eAAA,CACA,kBAAA,CACA,sBAAA,CACA,mCAAA,CAGD,uEAEC,gBAAA,CACA,gBAAA,CACA,kBAAA,CACA,mCAAA,CAGD,wCACC,iBAAA,CAGD,8CACC,mCAAA,CACA,0CAAA,CAGD,kCACC,4BAAA,CACA,UAAA,CACA,OAAA,CAGD,mCACC,oBAAA,CACA,qBAAA,CACA,eAAA,CACA,eAAA,CACA,eAAA,CACA,6CACC,eAAA,CACA,gBAAA,CAKH,8CACC,eAAA,CACA,QAAA,CACA,YA3EiB\",\"sourcesContent\":[\"\\n@use \\\"sass:math\\\";\\n\\n$comment-padding: 10px;\\n\\n.comment {\\n\\tdisplay: flex;\\n\\tgap: 8px;\\n\\tpadding: 5px $comment-padding;\\n\\n\\t&__side {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-start;\\n\\t\\tpadding-top: 6px;\\n\\t}\\n\\n\\t&__body {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-grow: 1;\\n\\t\\tflex-direction: column;\\n\\t}\\n\\n\\t&__header {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tmin-height: 44px;\\n\\t}\\n\\n\\t&__actions {\\n\\t\\tmargin-left: $comment-padding !important;\\n\\t}\\n\\n\\t&__author {\\n\\t\\toverflow: hidden;\\n\\t\\twhite-space: nowrap;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t}\\n\\n\\t&_loading,\\n\\t&__timestamp {\\n\\t\\tmargin-left: auto;\\n\\t\\ttext-align: right;\\n\\t\\twhite-space: nowrap;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t}\\n\\n\\t&__editor-group {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t&__editor-description {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\tpadding-block: var(--default-grid-baseline);\\n\\t}\\n\\n\\t&__submit {\\n\\t\\tposition: absolute !important;\\n\\t\\tbottom: 5px;\\n\\t\\tright: 0;\\n\\t}\\n\\n\\t&__message {\\n\\t\\twhite-space: pre-wrap;\\n\\t\\tword-break: break-word;\\n\\t\\tmax-height: 70px;\\n\\t\\toverflow: hidden;\\n\\t\\tmargin-top: -6px;\\n\\t\\t&--expanded {\\n\\t\\t\\tmax-height: none;\\n\\t\\t\\toverflow: visible;\\n\\t\\t}\\n\\t}\\n}\\n\\n.rich-contenteditable__input {\\n\\tmin-height: 44px;\\n\\tmargin: 0;\\n\\tpadding: $comment-padding;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.comments[data-v-222c65b2]{min-height:100%;display:flex;flex-direction:column}.comments__empty[data-v-222c65b2],.comments__error[data-v-222c65b2]{flex:1 0}.comments__retry[data-v-222c65b2]{margin:0 auto}.comments__info[data-v-222c65b2]{height:60px;color:var(--color-text-maxcontrast);text-align:center;line-height:60px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/comments/src/views/Comments.vue\"],\"names\":[],\"mappings\":\"AACA,2BACC,eAAA,CACA,YAAA,CACA,qBAAA,CAEA,oEAEC,QAAA,CAGD,kCACC,aAAA,CAGD,iCACC,WAAA,CACA,mCAAA,CACA,iBAAA,CACA,gBAAA\",\"sourcesContent\":[\"\\n.comments {\\n\\tmin-height: 100%;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\n\\t&__empty,\\n\\t&__error {\\n\\t\\tflex: 1 0;\\n\\t}\\n\\n\\t&__retry {\\n\\t\\tmargin: 0 auto;\\n\\t}\\n\\n\\t&__info {\\n\\t\\theight: 60px;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\ttext-align: center;\\n\\t\\tline-height: 60px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","/**\n* @license nested-property https://github.com/cosmosio/nested-property\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2014-2020 Olivier Scherrer <pode.fr@gmail.com>\n*/\n\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar ARRAY_WILDCARD = \"+\";\nvar PATH_DELIMITER = \".\";\n\nvar ObjectPrototypeMutationError = /*#__PURE__*/function (_Error) {\n  _inherits(ObjectPrototypeMutationError, _Error);\n\n  function ObjectPrototypeMutationError(params) {\n    var _this;\n\n    _classCallCheck(this, ObjectPrototypeMutationError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ObjectPrototypeMutationError).call(this, params));\n    _this.name = \"ObjectPrototypeMutationError\";\n    return _this;\n  }\n\n  return ObjectPrototypeMutationError;\n}(_wrapNativeSuper(Error));\n\nmodule.exports = {\n  set: setNestedProperty,\n  get: getNestedProperty,\n  has: hasNestedProperty,\n  hasOwn: function hasOwn(object, property, options) {\n    return this.has(object, property, options || {\n      own: true\n    });\n  },\n  isIn: isInNestedProperty,\n  ObjectPrototypeMutationError: ObjectPrototypeMutationError\n};\n/**\n * Get the property of an object nested in one or more objects or array\n * Given an object such as a.b.c.d = 5, getNestedProperty(a, \"b.c.d\") will return 5.\n * It also works through arrays. Given a nested array such as a[0].b = 5, getNestedProperty(a, \"0.b\") will return 5.\n * For accessing nested properties through all items in an array, you may use the array wildcard \"+\".\n * For instance, getNestedProperty([{a:1}, {a:2}, {a:3}], \"+.a\") will return [1, 2, 3]\n * @param {Object} object the object to get the property from\n * @param {String} property the path to the property as a string\n * @returns the object or the the property value if found\n */\n\nfunction getNestedProperty(object, property) {\n  if (_typeof(object) != \"object\" || object === null) {\n    return object;\n  }\n\n  if (typeof property == \"undefined\") {\n    return object;\n  }\n\n  if (typeof property == \"number\") {\n    return object[property];\n  }\n\n  try {\n    return traverse(object, property, function _getNestedProperty(currentObject, currentProperty) {\n      return currentObject[currentProperty];\n    });\n  } catch (err) {\n    return object;\n  }\n}\n/**\n * Tell if a nested object has a given property (or array a given index)\n * given an object such as a.b.c.d = 5, hasNestedProperty(a, \"b.c.d\") will return true.\n * It also returns true if the property is in the prototype chain.\n * @param {Object} object the object to get the property from\n * @param {String} property the path to the property as a string\n * @param {Object} options:\n *  - own: set to reject properties from the prototype\n * @returns true if has (property in object), false otherwise\n */\n\n\nfunction hasNestedProperty(object, property) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (_typeof(object) != \"object\" || object === null) {\n    return false;\n  }\n\n  if (typeof property == \"undefined\") {\n    return false;\n  }\n\n  if (typeof property == \"number\") {\n    return property in object;\n  }\n\n  try {\n    var has = false;\n    traverse(object, property, function _hasNestedProperty(currentObject, currentProperty, segments, index) {\n      if (isLastSegment(segments, index)) {\n        if (options.own) {\n          has = currentObject.hasOwnProperty(currentProperty);\n        } else {\n          has = currentProperty in currentObject;\n        }\n      } else {\n        return currentObject && currentObject[currentProperty];\n      }\n    });\n    return has;\n  } catch (err) {\n    return false;\n  }\n}\n/**\n * Set the property of an object nested in one or more objects\n * If the property doesn't exist, it gets created.\n * @param {Object} object\n * @param {String} property\n * @param value the value to set\n * @returns object if no assignment was made or the value if the assignment was made\n */\n\n\nfunction setNestedProperty(object, property, value) {\n  if (_typeof(object) != \"object\" || object === null) {\n    return object;\n  }\n\n  if (typeof property == \"undefined\") {\n    return object;\n  }\n\n  if (typeof property == \"number\") {\n    object[property] = value;\n    return object[property];\n  }\n\n  try {\n    return traverse(object, property, function _setNestedProperty(currentObject, currentProperty, segments, index) {\n      if (currentObject === Reflect.getPrototypeOf({})) {\n        throw new ObjectPrototypeMutationError(\"Attempting to mutate Object.prototype\");\n      }\n\n      if (!currentObject[currentProperty]) {\n        var nextPropIsNumber = Number.isInteger(Number(segments[index + 1]));\n        var nextPropIsArrayWildcard = segments[index + 1] === ARRAY_WILDCARD;\n\n        if (nextPropIsNumber || nextPropIsArrayWildcard) {\n          currentObject[currentProperty] = [];\n        } else {\n          currentObject[currentProperty] = {};\n        }\n      }\n\n      if (isLastSegment(segments, index)) {\n        currentObject[currentProperty] = value;\n      }\n\n      return currentObject[currentProperty];\n    });\n  } catch (err) {\n    if (err instanceof ObjectPrototypeMutationError) {\n      // rethrow\n      throw err;\n    } else {\n      return object;\n    }\n  }\n}\n/**\n * Tell if an object is on the path to a nested property\n * If the object is on the path, and the path exists, it returns true, and false otherwise.\n * @param {Object} object to get the nested property from\n * @param {String} property name of the nested property\n * @param {Object} objectInPath the object to check\n * @param {Object} options:\n *  - validPath: return false if the path is invalid, even if the object is in the path\n * @returns {boolean} true if the object is on the path\n */\n\n\nfunction isInNestedProperty(object, property, objectInPath) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (_typeof(object) != \"object\" || object === null) {\n    return false;\n  }\n\n  if (typeof property == \"undefined\") {\n    return false;\n  }\n\n  try {\n    var isIn = false,\n        pathExists = false;\n    traverse(object, property, function _isInNestedProperty(currentObject, currentProperty, segments, index) {\n      isIn = isIn || currentObject === objectInPath || !!currentObject && currentObject[currentProperty] === objectInPath;\n      pathExists = isLastSegment(segments, index) && _typeof(currentObject) === \"object\" && currentProperty in currentObject;\n      return currentObject && currentObject[currentProperty];\n    });\n\n    if (options.validPath) {\n      return isIn && pathExists;\n    } else {\n      return isIn;\n    }\n  } catch (err) {\n    return false;\n  }\n}\n\nfunction traverse(object, path) {\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n  var segments = path.split(PATH_DELIMITER);\n  var length = segments.length;\n\n  var _loop = function _loop(idx) {\n    var currentSegment = segments[idx];\n\n    if (!object) {\n      return {\n        v: void 0\n      };\n    }\n\n    if (currentSegment === ARRAY_WILDCARD) {\n      if (Array.isArray(object)) {\n        return {\n          v: object.map(function (value, index) {\n            var remainingSegments = segments.slice(idx + 1);\n\n            if (remainingSegments.length > 0) {\n              return traverse(value, remainingSegments.join(PATH_DELIMITER), callback);\n            } else {\n              return callback(object, index, segments, idx);\n            }\n          })\n        };\n      } else {\n        var pathToHere = segments.slice(0, idx).join(PATH_DELIMITER);\n        throw new Error(\"Object at wildcard (\".concat(pathToHere, \") is not an array\"));\n      }\n    } else {\n      object = callback(object, currentSegment, segments, idx);\n    }\n  };\n\n  for (var idx = 0; idx < length; idx++) {\n    var _ret = _loop(idx);\n\n    if (_typeof(_ret) === \"object\") return _ret.v;\n  }\n\n  return object;\n}\n\nfunction isLastSegment(segments, index) {\n  return segments.length === index + 1;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\nvar util = require('util');\nvar isString = function (x) {\n  return typeof x === 'string';\n};\n\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  var res = [];\n  for (var i = 0; i < parts.length; i++) {\n    var p = parts[i];\n\n    // ignore empty parts\n    if (!p || p === '.')\n      continue;\n\n    if (p === '..') {\n      if (res.length && res[res.length - 1] !== '..') {\n        res.pop();\n      } else if (allowAboveRoot) {\n        res.push('..');\n      }\n    } else {\n      res.push(p);\n    }\n  }\n\n  return res;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar posix = {};\n\n\nfunction posixSplitPath(filename) {\n  return splitPathRe.exec(filename).slice(1);\n}\n\n\n// path.resolve([from ...], to)\n// posix version\nposix.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (!isString(path)) {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(resolvedPath.split('/'),\n                                !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nposix.normalize = function(path) {\n  var isAbsolute = posix.isAbsolute(path),\n      trailingSlash = path.substr(-1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(path.split('/'), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nposix.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nposix.join = function() {\n  var path = '';\n  for (var i = 0; i < arguments.length; i++) {\n    var segment = arguments[i];\n    if (!isString(segment)) {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    if (segment) {\n      if (!path) {\n        path += segment;\n      } else {\n        path += '/' + segment;\n      }\n    }\n  }\n  return posix.normalize(path);\n};\n\n\n// path.relative(from, to)\n// posix version\nposix.relative = function(from, to) {\n  from = posix.resolve(from).substr(1);\n  to = posix.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\n\nposix._makeLong = function(path) {\n  return path;\n};\n\n\nposix.dirname = function(path) {\n  var result = posixSplitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nposix.basename = function(path, ext) {\n  var f = posixSplitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nposix.extname = function(path) {\n  return posixSplitPath(path)[3];\n};\n\n\nposix.format = function(pathObject) {\n  if (!util.isObject(pathObject)) {\n    throw new TypeError(\n        \"Parameter 'pathObject' must be an object, not \" + typeof pathObject\n    );\n  }\n\n  var root = pathObject.root || '';\n\n  if (!isString(root)) {\n    throw new TypeError(\n        \"'pathObject.root' must be a string or undefined, not \" +\n        typeof pathObject.root\n    );\n  }\n\n  var dir = pathObject.dir ? pathObject.dir + posix.sep : '';\n  var base = pathObject.base || '';\n  return dir + base;\n};\n\n\nposix.parse = function(pathString) {\n  if (!isString(pathString)) {\n    throw new TypeError(\n        \"Parameter 'pathString' must be a string, not \" + typeof pathString\n    );\n  }\n  var allParts = posixSplitPath(pathString);\n  if (!allParts || allParts.length !== 4) {\n    throw new TypeError(\"Invalid path '\" + pathString + \"'\");\n  }\n  allParts[1] = allParts[1] || '';\n  allParts[2] = allParts[2] || '';\n  allParts[3] = allParts[3] || '';\n\n  return {\n    root: allParts[0],\n    dir: allParts[0] + allParts[1].slice(0, allParts[1].length - 1),\n    base: allParts[2],\n    ext: allParts[3],\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\n  };\n};\n\n\nposix.sep = '/';\nposix.delimiter = ':';\n\n  module.exports = posix;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"1957\":\"ff57431ba9f291043cb4\",\"4473\":\"6009e669b1a0737a2378\",\"5528\":\"d76dd95da4f749064c4f\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 7062;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t7062: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4208], () => (__webpack_require__(51340)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","activePinia","setActivePinia","pinia","piniaSymbol","Symbol","isPlainObject","o","Object","prototype","toString","call","toJSON","MutationType","IS_CLIENT","window","USE_DEVTOOLS","__VUE_PROD_DEVTOOLS__","_global","self","global","globalThis","HTMLElement","download","url","name","opts","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","console","error","send","corsEnabled","e","status","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","_navigator","navigator","userAgent","isMacOSWebView","test","HTMLAnchorElement","blob","a","createElement","rel","href","origin","location","target","URL","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","type","Blob","String","fromCharCode","bom","popup","title","body","innerText","force","isSafari","isChromeIOS","FileReader","reader","onloadend","result","Error","replace","assign","readAsDataURL","toastMessage","message","piniaMessage","__VUE_DEVTOOLS_TOAST__","warn","log","isPinia","checkClipboardAccess","checkNotFocusedError","toLowerCase","includes","fileInput","loadStoresState","state","key","storeState","value","formatDisplay","display","_custom","PINIA_ROOT_LABEL","PINIA_ROOT_ID","formatStoreForInspectorTree","store","id","label","$id","formatEventData","events","Array","isArray","reduce","data","event","keys","push","operations","oldValue","newValue","operation","formatMutationType","direct","patchFunction","patchObject","isTimelineActive","componentStateTypes","MUTATIONS_LAYER_ID","INSPECTOR_ID","assign$1","getStoreType","registerPiniaDevtools","app","logo","packageName","homepage","api","now","addTimelineLayer","color","addInspector","icon","treeFilterPlaceholder","actions","action","async","clipboard","writeText","JSON","stringify","actionGlobalCopyState","tooltip","parse","readText","actionGlobalPasteState","sendInspectorTree","sendInspectorState","actionGlobalSaveState","accept","Promise","resolve","reject","onchange","files","file","item","text","oncancel","actionGlobalOpenStateFile","nodeActions","nodeId","_s","get","$reset","on","inspectComponent","payload","ctx","proxy","componentInstance","_pStores","piniaStores","values","forEach","instanceData","editable","_isOptionsAPI","$state","_getters","length","getters","getInspectorTree","inspectorId","stores","concat","from","rootNodes","filter","map","getInspectorState","inspectedStore","storeNames","storeMap","storeId","getterName","_customProperties","size","customProperties","formatStoreForInspectorState","editInspectorState","path","unshift","has","set","editComponentState","startsWith","activeAction","runningActionId","patchActionForGrouping","actionNames","wrapWithProxy","storeActions","actionName","_actionId","trackedStore","Proxy","args","Reflect","retValue","apply","arguments","undefined","devtoolsPlugin","options","originalHotUpdate","_hotUpdate","newStore","this","_hmrPayload","settings","logStoreChanges","defaultValue","bind","Date","$onAction","after","onError","groupId","addTimelineEvent","layerId","time","subtitle","logType","notifyComponentUpdate","deep","$subscribe","eventData","detached","flush","hotUpdate","info","$dispose","getSettings","addStoreToDevtools","noop","addSubscription","subscriptions","callback","onCleanup","removeSubscription","idx","indexOf","splice","triggerSubscriptions","slice","fallbackRunWithContext","fn","mergeReactiveObjects","patchToApply","Map","Set","add","hasOwnProperty","subPatch","targetValue","skipHydrateSymbol","skipHydrateMap","WeakMap","createSetupStore","setup","hot","isOptionsStore","scope","optionsForPlugin","$subscribeOptions","isListening","isSyncListening","debuggerEvents","actionSubscriptions","initialState","hotState","activeListener","$patch","partialStateOrMutator","subscriptionMutation","myListenerId","then","newState","wrapAction","afterCallbackList","onErrorCallbackList","ret","catch","partialStore","_p","stopWatcher","run","stop","delete","_r","setupStore","_a","runWithContext","_e","prop","effect","obj","actionValue","defineProperty","nonEnumerable","writable","configurable","enumerable","p","extender","extensions","hydrate","mapStores","reduced","useStore","$pinia","unrefElement","elRef","plain","$el","defaultWindow","useSupported","isMounted","instance","useMounted","Boolean","useElementVisibility","element","scrollTarget","threshold","elementIsVisible","root","rootMargin","immediate","isSupported","targets","_target","cleanup","isActive","stopWatch","targets2","root2","observer","IntersectionObserver","el","observe","disconnect","useIntersectionObserver","intersectionObserverEntries","isIntersecting","latestTime","entry","mounted","unmounted","vElementVisibility","binding","handler","isVisible","v","_typeof","iterator","constructor","_defineProperties","props","i","descriptor","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","_iterableToArray","TypeError","_nonIterableSpread","deepEqual","val1","val2","VisibilityState","vnode","Constructor","_classCallCheck","frozen","createObserver","protoProps","_this","destroyObserver","once","throttle","_leading","throttleOptions","leading","delay","timeout","lastState","currentArgs","throttled","_len","_key","clearTimeout","_clear","oldResult","entries","intersectingEntry","find","intersectionRatio","intersection","context","$nextTick","_ref2","_vue_visibilityState","unbind","ObserveVisibility","update","_ref3","version","install","Vue","directive","GlobalVue","g","use","emits","fillColor","default","Number","_vm","_c","_self","_b","staticClass","attrs","$event","$emit","$attrs","_v","assertValidPattern","pattern","posixClasses","braceEscape","s","rangesToString","ranges","join","parseClass","glob","position","pos","charAt","negs","sawStart","uflag","escaping","negate","endPos","rangeStart","WHILE","c","cls","unip","u","neg","sranges","snegs","windowsPathsNoEscape","types","isExtglobType","startNoDot","addPatternStart","justDots","reSpecials","qmark","star","starNoEmpty","AST","parent","hasMagic","n","pop","pp","part","copyIn","parts","isStart","isEnd","pl","clone","str","ast","opt","inBrace","braceStart","braceNeg","acc","noext","ext","substring","fromGlob","toMMPattern","re","toRegExpSource","nocase","nocaseMagicOnly","toUpperCase","flags","RegExp","_src","_glob","allowDot","dot","noEmpty","src","_","start","aps","needNoTrav","needNoDot","end","repeated","bodyDotAllowed","final","_hasMagic","needUflag","consumed","magic","nocomment","Minimatch","match","starDotExtRE","starDotExtTest","f","endsWith","starDotExtTestDot","starDotExtTestNocase","starDotExtTestNocaseDot","starDotStarRE","starDotStarTest","starDotStarTestDot","dotStarRE","dotStarTest","starRE","starTest","starTestDot","qmarksRE","qmarksTestNocase","$0","qmarksTestNoExt","qmarksTestNocaseDot","qmarksTestNoExtDot","qmarksTestDot","qmarksTest","len","defaultPlatform","process","env","__MINIMATCH_TESTING_PLATFORM__","platform","sep","GLOBSTAR","b","defaults","def","orig","super","unescape","escape","makeRe","braceExpand","list","nobrace","mm","nonull","globMagic","nonegate","comment","empty","preserveMultipleSlashes","partial","globSet","globParts","isWindows","windowsNoMagicRoot","regexp","allowWindowsEscape","make","magicalBraces","debug","parseNegate","rawGlobParts","slashSplit","preprocess","__","isUNC","isDrive","ss","noglobstar","j","optimizationLevel","firstPhasePreProcess","secondPhasePreProcess","levelOneOptimize","adjascentGlobstarOptimize","gs","prev","levelTwoFileOptimize","didSomething","dd","gss","next","p2","other","splin","matched","partsMatch","emptyGSMatch","ai","bi","which","negateOffset","matchOne","fileDrive","fileUNC","patternDrive","fdi","pdi","fd","pd","fi","pi","fl","fr","pr","swallowee","hit","m","fastTest","twoStar","split","close","ex","ff","filename","matchBase","flipNegate","convertResponseHeaders","headers","output","PropertyType","getRootPath","generateRemoteUrl","client","createClient","setHeaders","token","requesttoken","onRequestTokenUpdate","getRequestToken","getComments","_ref","_options$limit","resourceType","resourceId","resourcePath","datetime","toISOString","customRequest","method","limit","offset","responseData","parseXML","isDetailed","statusText","processResponsePayload","getDirectoryFiles","multistatus","responseItems","propstat","getlastmodified","lastMod","getcontentlength","rawSize","resourcetype","getcontenttype","mimeType","getetag","etag","collection","stat","basename","lastmod","parseInt","mime","displayname","prepareFileFromProps","decodeHtmlEntities","passes","parser","DOMParser","decoded","parseFromString","documentElement","textContent","useDeletedCommentLimbo","idOrOptions","setupOptions","isSetupStore","hasContext","localState","computedGetters","createOptionsStore","defineStore","idsInLimbo","addId","removeId","index","checkForId","getLoggerBuilder","setApp","detectUser","build","required","deleted","editing","loading","computed","methods","onEdit","onEditCancel","updateLocalMessage","onEditComment","commentId","commentPath","EditComment","logger","showError","t","onDeleteWithUndo","deletedCommentLimboStore","timeOutDelete","onDelete","TOAST_UNDO_TIMEOUT","showUndo","deleteFile","DeleteComment","onNewComment","newComment","axios","post","actorDisplayName","getCurrentUser","displayName","actorId","uid","actorType","creationDateTime","toUTCString","objectType","verb","details","NewComment","localMessage","components","IconArrowRight","IconClose","IconDelete","IconEdit","NcActionButton","NcActions","NcActionSeparator","NcAvatar","NcButton","NcDateTime","NcLoadingIcon","NcRichContenteditable","mixins","RichEditorMixin","CommentMixin","inheritAttrs","editor","autoComplete","Function","tag","expanded","submitted","isOwnComment","renderedContent","isEmptyMessage","renderContent","trim","timestamp","isLimbo","watch","beforeMount","onSubmit","$refs","focus","onExpand","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","directives","rawName","expression","class","scopedSlots","_u","preventDefault","ref","userData","domProps","defineComponent","editorData","search","generateOcsUrl","params","itemType","itemId","sorter","loadState","ocs","user","genMentionsData","mentions","flat","mention","_getCurrentUser","mentionId","mentionDisplayName","source","primary","VTooltip","VueObserveVisibility","Comment","NcEmptyContent","RefreshIcon","MessageReplyTextIcon","AlertCircleOutlineIcon","elementVisibility","CommentView","done","currentResourceId","comments","cancelRequest","hasComments","isFirstLoading","onVisibilityChange","markCommentsAsRead","date","readMarker","resetState","onScrollBottomReached","request","abort","controller","AbortController","signal","cancelableRequest","findIndex","_l","$set","_Vue","mixin","beforeCreate","$options","_provided","provideCache","destroyed","__webpack_nonce__","btoa","OCA","Comments","View","_options$propsData","toBeInstalled","provide","config","globalProperties","plugin","createPinia","propsData","extend","CommentsApp","balanced","maybeMatch","r","range","pre","reg","begs","beg","left","right","module","exports","substr","expand","escSlash","escOpen","escClose","escComma","escPeriod","escapeBraces","unescapeBraces","Math","random","numeric","charCodeAt","parseCommaParts","postParts","shift","embrace","isPadded","lte","y","gte","isTop","expansions","k","expansion","N","isNumericSequence","isAlphaSequence","isSequence","isOptions","x","width","max","incr","abs","pad","some","need","z","___CSS_LOADER_EXPORT___","validator","XMLParser","XMLBuilder","XMLValidator","_wrapNativeSuper","Class","_cache","Wrapper","_construct","_getPrototypeOf","create","_setPrototypeOf","Parent","construct","sham","_isNativeReflectConstruct","setPrototypeOf","__proto__","getPrototypeOf","ObjectPrototypeMutationError","_Error","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","subClass","superClass","_inherits","traverse","object","segments","_loop","currentSegment","remainingSegments","pathToHere","_ret","isLastSegment","property","currentObject","currentProperty","nextPropIsNumber","isInteger","nextPropIsArrayWildcard","err","own","hasOwn","isIn","objectInPath","pathExists","validPath","util","isString","normalizeArray","allowAboveRoot","res","splitPathRe","posix","posixSplitPath","exec","resolvedPath","resolvedAbsolute","cwd","normalize","isAbsolute","trailingSlash","segment","relative","to","fromParts","toParts","min","samePartsLength","outputParts","_makeLong","dirname","dir","extname","format","pathObject","isObject","base","pathString","allParts","delimiter","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","d","definition","chunkId","all","promises","l","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","doneFns","parentNode","removeChild","head","appendChild","toStringTag","nmd","paths","children","scriptUrl","importScripts","currentScript","tagName","baseURI","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}